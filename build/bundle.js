var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function s(){return Object.create(null)}function o(t){t.forEach(n)}function r(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,n,s){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const s=e.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}(n,s))}function l(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function d(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function h(){return p(" ")}function g(){return p("")}function m(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function w(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function b(t,e){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e)return void(s.selected=!0)}t.selectedIndex=-1}function v(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}let x;function _(t){x=t}function q(){if(!x)throw new Error("Function called outside component initialization");return x}function y(t){q().$$.on_mount.push(t)}const k=[],S=[],C=[],L=[],T=Promise.resolve();let E=!1;function V(t){C.push(t)}let H=!1;const j=new Set;function A(){if(!H){H=!0;do{for(let t=0;t<k.length;t+=1){const e=k[t];_(e),M(e.$$)}for(_(null),k.length=0;S.length;)S.pop()();for(let t=0;t<C.length;t+=1){const e=C[t];j.has(e)||(j.add(e),e())}C.length=0}while(k.length);for(;L.length;)L.pop()();E=!1,H=!1,j.clear()}}function M(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(V)}}const P=new Set;let I;function O(){I={r:0,c:[],p:I}}function D(){I.r||o(I.c),I=I.p}function B(t,e){t&&t.i&&(P.delete(t),t.i(e))}function N(t,e,n,s){if(t&&t.o){if(P.has(t))return;P.add(t),I.c.push((()=>{P.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}}function z(t){t&&t.c()}function Q(t,e,s,c){const{fragment:i,on_mount:l,on_destroy:a,after_update:u}=t.$$;i&&i.m(e,s),c||V((()=>{const e=l.map(n).filter(r);a?a.push(...e):o(e),t.$$.on_mount=[]})),u.forEach(V)}function U(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function W(t,e){-1===t.$$.dirty[0]&&(k.push(t),E||(E=!0,T.then(A)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function F(e,n,r,c,i,l,a,d=[-1]){const f=x;_(e);const p=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:i,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:n.context||[]),callbacks:s(),dirty:d,skip_bound:!1,root:n.target||f.$$.root};a&&a(p.root);let h=!1;if(p.ctx=r?r(e,n.props||{},((t,n,...s)=>{const o=s.length?s[0]:n;return p.ctx&&i(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),h&&W(e,t)),n})):[],p.update(),h=!0,o(p.before_update),p.fragment=!!c&&c(p.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);p.fragment&&p.fragment.l(t),t.forEach(u)}else p.fragment&&p.fragment.c();n.intro&&B(e.$$.fragment),Q(e,n.target,n.anchor,n.customElement),A()}_(f)}class J{$destroy(){U(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const R=[];function K(e,n=t){let s;const o=new Set;function r(t){if(c(e,t)&&(e=t,s)){const t=!R.length;for(const t of o)t[1](),R.push(t,e);if(t){for(let t=0;t<R.length;t+=2)R[t][0](R[t+1]);R.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(c,i=t){const l=[c,i];return o.add(l),1===o.size&&(s=n(r)||t),c(e),()=>{o.delete(l),0===o.size&&(s(),s=null)}}}}const Y=(()=>{const{subscribe:t,set:e,update:n}=K({component:""});return{views:{},subscribe:t,setView:(t,n)=>{const s=Y.views[t];s.props=n,e(s)}}})(),G=(()=>{const{subscribe:t,set:e,update:n}=K([]);return{subscribe:t,addError:t=>{console.log("Added error:",t),n((e=>(e.push(t),e)))},resetErrors:()=>{e([])}}})(),X=t=>fetch(t).then((e=>{if(!e.ok)throw Error(`Unable to get JSON: ${t} - ${e.statusText}`);return e.json()})).catch((t=>G.addError("fetchJson: "+t)));let Z;const tt=t=>{G.addError(t.type)},et=()=>new Promise(((t,e)=>{const n=indexedDB.open("s-card",1);n.onupgradeneeded=t=>{Z=n.result,t.oldVersion<1&&(Z.createObjectStore("topics",{keyPath:"file"}),Z.createObjectStore("questions",{keyPath:"id",autoIncrement:!0}).createIndex("file","file",{unique:!1}),Z.createObjectStore("config",{keyPath:"key"}).transaction.oncomplete=()=>{console.log("Upgrade completed!")})},n.onerror=tt,n.onsuccess=e=>{Z=n.result,Z.onerror=tt,console.log("db init success!"),t()}})),nt=t=>{if(!t)return"";const e=t.getDate()>9?t.getDate():"0"+t.getDate(),n=t.getMonth()+1,s=n>9?n:"0"+n,o=t.getHours()>9?t.getHours():"0"+t.getHours(),r=t.getMinutes()>9?t.getMinutes():"0"+t.getMinutes();return`${e}.${s}.${t.getFullYear()} ${o}:${r}`},st=(t,e)=>{const n=e||[];return(t||[]).toString()===n.toString()},ot=(t,e)=>{if(!e)return 0;const n=100*t/e;return Math.round(n)},rt=(t,e)=>((t,e,n,s)=>new Promise(((o,r)=>{const c=t.objectStore(e),i=c.index(n).getAllKeys(s);i.onsuccess=t=>{i.result.forEach((t=>{c.delete(t).onsuccess=e=>{console.log("Store:",c.name,"deleted:",t)}})),o()}})))(t,"questions","file",e),ct=t=>{const e=Z.transaction(["questions"],"readonly").objectStore("questions");return it(e,t)},it=(t,e)=>new Promise(((n,s)=>{const o=t.index("file").getAll(e.file);o.onsuccess=t=>{n(o.result)}})),lt=t=>{const e=Z.transaction(["topics","questions"],"readwrite"),n=e.objectStore("topics"),s=n.getAll();s.onsuccess=o=>{const r=((t,e)=>{const n=new Map;return t.forEach((t=>{if(!t.hasOwnProperty(e))throw new Error(`Object has no property: ${e}`);n.set(t[e],t)})),n})(s.result,"file"),c=t.map((t=>t.file));for(let t of r.keys())c.includes(t)||(n.delete(t).onsuccess=()=>{console.log("Store:",n.name,"deleted:",t),rt(e,t)});t.forEach((t=>{((t,e)=>!e||(e.lastLoaded&&(t.lastLoaded=e.lastLoaded),e.lastLearned&&(t.lastLearned=e.lastLearned),e.hash&&(t.hash=e.hash),t.title!==e.title||t.desc!==e.desc||!st(t.tags,e.tags)||!st(t.details,e.details)))(t,r.get(t.file))&&(n.put(t).onsuccess=e=>{console.log("Store:",n.name,"update:",t.file)})}))}},at=async t=>{console.log(t);const e=(t=>new Promise(((e,n)=>{const s=Z.transaction(["topics"],"readonly").objectStore("topics"),o=s.get(t);o.onsuccess=t=>{const n=o.result.hash;console.log("Store:",s.name,"get hash:",n),e(n)}})))(t),n=(s=t,fetch(s,{method:"HEAD"}).then((t=>{if(!t.ok)throw Error(`Unable to get hash for: ${s} - ${t.statusText}`);const e=t.headers.get("Content-Length");return console.log("url: ",s,"header:",e),e})).catch((t=>G.addError("fetchHash: "+t))));var s;const[o,r]=await Promise.all([e,n]);if(console.log("lmStore",o,"lmJson",r),!r)return;if(o&&o===r)return;const c=await X(t);c.forEach((e=>((t,e)=>{t.file=e,t.total=0,t.failed=0,t.ratio=0,t.progress=0})(e,t))),console.log(c);const i=Z.transaction(["topics","questions"],"readwrite");rt(i,t).then((()=>{((t,e,n)=>new Promise(((s,o)=>{const r=t.objectStore(e);n.forEach((t=>{r.add(t).onsuccess=e=>{console.log("Store:",r.name,"added:",t)}})),s()})))(i,"questions",c).then((()=>{((t,e,n)=>{const s=t.objectStore("topics"),o=s.get(e);s.get(e).onsuccess=t=>{const e=o.result;e.hash=n,e.lastLoaded=new Date,s.put(e).onsuccess=()=>{console.log("Store:",s.name,"set hash:",e)}}})(i,t,r)}))}))},ut=async()=>{await et();const t=new Promise(((t,e)=>{const n=Z.transaction(["config"],"readonly").objectStore("config").get("topics-last-modified");n.onsuccess=e=>{const s=n.result;s?t(s.value):t()}})),e=(n="data/topics.json",fetch(n,{method:"HEAD"}).then((t=>{if(!t.ok)throw Error(`Unable to last modified for: ${n} - ${t.statusText}`);const e=t.headers.get("Last-Modified");if(console.log("url: ",n,"header:",e),e)return new Date(e)})).catch((t=>G.addError("fetchLastModified: "+t))));var n;const[s,o]=await Promise.all([t,e]);console.log("hash store:",s),console.log("hash head:",o),o&&(null!==s||s<o)&&await X("data/topics.json").then((t=>{lt(t),(t=>{const e={key:"topics-last-modified",value:t},n=Z.transaction(["config"],"readwrite").objectStore("config");n.put(e).onsuccess=()=>{console.log("Store:",n.name,"set lastModified:",e)}})(o)}))};function dt(t,e,n){const s=t.slice();return s[2]=e[n],s}function ft(t){let e,n,s=t[2]+"";return{c(){e=f("li"),n=p(s)},m(t,s){a(t,e,s),l(e,n)},p(t,e){1&e&&s!==(s=t[2]+"")&&w(n,s)},d(t){t&&u(e)}}}function pt(e){let n,s,o,r,c,i,p,g,w,b=e[0],v=[];for(let t=0;t<b.length;t+=1)v[t]=ft(dt(e,b,t));return{c(){n=f("div"),s=f("h4"),s.textContent="Errors",o=h(),r=f("ul");for(let t=0;t<v.length;t+=1)v[t].c();c=h(),i=f("div"),p=f("button"),p.textContent="Ok",$(s,"class","is-text-danger"),$(p,"class","button"),$(i,"class","buttons"),$(n,"class","card card-shadow block content")},m(t,u){a(t,n,u),l(n,s),l(n,o),l(n,r);for(let t=0;t<v.length;t+=1)v[t].m(r,null);l(n,c),l(n,i),l(i,p),g||(w=m(p,"click",e[1]),g=!0)},p(t,[e]){if(1&e){let n;for(b=t[0],n=0;n<b.length;n+=1){const s=dt(t,b,n);v[n]?v[n].p(s,e):(v[n]=ft(s),v[n].c(),v[n].m(r,null))}for(;n<v.length;n+=1)v[n].d(1);v.length=b.length}},i:t,o:t,d(t){t&&u(n),d(v,t),g=!1,w()}}}function ht(t,e,n){let s;i(t,G,(t=>n(0,s=t)));return[s,()=>{G.resetErrors()}]}class gt extends J{constructor(t){super(),F(this,t,ht,pt,c,{})}}function mt(t){let e,n,s,o,r,c,i,d,g,m,$,b,v,x,_,q,y,k,S,C,L,T,E,V,H=nt(t[0].lastLoaded)+"",j=(t[0].hash?t[0].hash:"")+"";return{c(){e=f("tr"),n=f("td"),n.textContent="Questions",s=h(),o=f("td"),r=p(t[2]),c=h(),i=f("tr"),d=f("td"),d.textContent="Status",g=h(),m=f("td"),$=p(t[1]),b=p("%"),v=h(),x=f("tr"),_=f("td"),_.textContent="Last loaded",q=h(),y=f("td"),k=p(H),S=h(),C=f("tr"),L=f("td"),L.textContent="Hash",T=h(),E=f("td"),V=p(j)},m(t,u){a(t,e,u),l(e,n),l(e,s),l(e,o),l(o,r),a(t,c,u),a(t,i,u),l(i,d),l(i,g),l(i,m),l(m,$),l(m,b),a(t,v,u),a(t,x,u),l(x,_),l(x,q),l(x,y),l(y,k),a(t,S,u),a(t,C,u),l(C,L),l(C,T),l(C,E),l(E,V)},p(t,e){4&e&&w(r,t[2]),2&e&&w($,t[1]),1&e&&H!==(H=nt(t[0].lastLoaded)+"")&&w(k,H),1&e&&j!==(j=(t[0].hash?t[0].hash:"")+"")&&w(V,j)},d(t){t&&u(e),t&&u(c),t&&u(i),t&&u(v),t&&u(x),t&&u(S),t&&u(C)}}}function $t(t){let e,n,s=t[0].desc+"";return{c(){e=f("p"),n=p(s)},m(t,s){a(t,e,s),l(e,n)},p(t,e){1&e&&s!==(s=t[0].desc+"")&&w(n,s)},d(t){t&&u(e)}}}function wt(e){let n,s,o,r,c,i,d,m,$,b,v,x,_,q,y,k,S,C,L=e[0].title+"",T=nt(e[0].lastLearned)+"",E=e[0].tags.join(", ")+"",V=e[3]&&mt(e),H=e[0].desc&&$t(e);return{c(){n=f("h4"),s=p(L),o=h(),r=f("table"),c=f("tr"),i=f("td"),i.textContent="Last learned",d=h(),m=f("td"),$=p(T),b=h(),v=f("tr"),x=f("td"),x.textContent="Tags",_=h(),q=f("td"),y=p(E),k=h(),V&&V.c(),S=h(),H&&H.c(),C=g()},m(t,e){a(t,n,e),l(n,s),a(t,o,e),a(t,r,e),l(r,c),l(c,i),l(c,d),l(c,m),l(m,$),l(r,b),l(r,v),l(v,x),l(v,_),l(v,q),l(q,y),l(r,k),V&&V.m(r,null),a(t,S,e),H&&H.m(t,e),a(t,C,e)},p(t,[e]){1&e&&L!==(L=t[0].title+"")&&w(s,L),1&e&&T!==(T=nt(t[0].lastLearned)+"")&&w($,T),1&e&&E!==(E=t[0].tags.join(", ")+"")&&w(y,E),t[3]?V?V.p(t,e):(V=mt(t),V.c(),V.m(r,null)):V&&(V.d(1),V=null),t[0].desc?H?H.p(t,e):(H=$t(t),H.c(),H.m(C.parentNode,C)):H&&(H.d(1),H=null)},i:t,o:t,d(t){t&&u(n),t&&u(o),t&&u(r),V&&V.d(),t&&u(S),H&&H.d(t),t&&u(C)}}}function bt(t,e,n){let{topic:s}=e,{status:o=0}=e,{size:r=0}=e,{details:c=!0}=e;return t.$$set=t=>{"topic"in t&&n(0,s=t.topic),"status"in t&&n(1,o=t.status),"size"in t&&n(2,r=t.size),"details"in t&&n(3,c=t.details)},[s,o,r,c]}class vt extends J{constructor(t){super(),F(this,t,bt,wt,c,{topic:0,status:1,size:2,details:3})}}function xt(t){let e,n,s,o,r,c,i,d,p;return n=new vt({props:{topic:t[0],details:!1}}),{c(){e=f("div"),z(n.$$.fragment),s=h(),o=f("div"),r=f("button"),r.textContent="Show",$(r,"class","button"),$(o,"class","buttons"),$(e,"class","card card-shadow content"),$(e,"id",c=t[0].file)},m(c,u){a(c,e,u),Q(n,e,null),l(e,s),l(e,o),l(o,r),i=!0,d||(p=m(r,"click",t[2]),d=!0)},p(t,[s]){const o={};1&s&&(o.topic=t[0]),n.$set(o),(!i||1&s&&c!==(c=t[0].file))&&$(e,"id",c)},i(t){i||(B(n.$$.fragment,t),i=!0)},o(t){N(n.$$.fragment,t),i=!1},d(t){t&&u(e),U(n),d=!1,p()}}}function _t(t,e,n){let{topic:s}=e;const o=t=>{Y.setView("ViewTopicInfo",{topic:t})};return t.$$set=t=>{"topic"in t&&n(0,s=t.topic)},[s,o,()=>o(s)]}class qt extends J{constructor(t){super(),F(this,t,_t,xt,c,{topic:0})}}function yt(t,e,n){const s=t.slice();return s[8]=e[n],s}function kt(t,e,n){const s=t.slice();return s[11]=e[n],s}function St(t){let e,n,s,r,c,i,p,g,w=t[1],v=[];for(let e=0;e<w.length;e+=1)v[e]=Ct(kt(t,w,e));let x=t[2]&&Lt(t);return{c(){e=f("div"),n=f("label"),n.textContent="Tag Filter",s=h(),r=f("select"),c=f("option"),c.textContent="-- Select --";for(let t=0;t<v.length;t+=1)v[t].c();i=h(),x&&x.c(),$(n,"for","tag-select"),c.__value="",c.value=c.__value,$(r,"id","tag-select"),void 0===t[2]&&V((()=>t[5].call(r))),$(e,"class","block")},m(o,u){a(o,e,u),l(e,n),l(e,s),l(e,r),l(r,c);for(let t=0;t<v.length;t+=1)v[t].m(r,null);b(r,t[2]),l(e,i),x&&x.m(e,null),p||(g=[m(r,"change",t[5]),m(r,"change",t[3])],p=!0)},p(t,n){if(2&n){let e;for(w=t[1],e=0;e<w.length;e+=1){const s=kt(t,w,e);v[e]?v[e].p(s,n):(v[e]=Ct(s),v[e].c(),v[e].m(r,null))}for(;e<v.length;e+=1)v[e].d(1);v.length=w.length}6&n&&b(r,t[2]),t[2]?x?x.p(t,n):(x=Lt(t),x.c(),x.m(e,null)):x&&(x.d(1),x=null)},d(t){t&&u(e),d(v,t),x&&x.d(),p=!1,o(g)}}}function Ct(t){let e,n,s,o=t[11]+"";return{c(){e=f("option"),n=p(o),e.__value=s=t[11],e.value=e.__value},m(t,s){a(t,e,s),l(e,n)},p(t,r){2&r&&o!==(o=t[11]+"")&&w(n,o),2&r&&s!==(s=t[11])&&(e.__value=s,e.value=e.__value)},d(t){t&&u(e)}}}function Lt(e){let n,s,o;return{c(){n=f("button"),n.textContent="Show",$(n,"class","button")},m(t,r){a(t,n,r),s||(o=m(n,"click",e[6]),s=!0)},p:t,d(t){t&&u(n),s=!1,o()}}}function Tt(t){let e,n;return e=new qt({props:{topic:t[8]}}),{c(){z(e.$$.fragment)},m(t,s){Q(e,t,s),n=!0},p(t,n){const s={};1&n&&(s.topic=t[8]),e.$set(s)},i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){N(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function Et(t){let e,n,s,o=t[1]&&St(t),r=t[0],c=[];for(let e=0;e<r.length;e+=1)c[e]=Tt(yt(t,r,e));const i=t=>N(c[t],1,1,(()=>{c[t]=null}));return{c(){o&&o.c(),e=h(),n=f("div");for(let t=0;t<c.length;t+=1)c[t].c();$(n,"class","grid grid-4")},m(t,r){o&&o.m(t,r),a(t,e,r),a(t,n,r);for(let t=0;t<c.length;t+=1)c[t].m(n,null);s=!0},p(t,[s]){if(t[1]?o?o.p(t,s):(o=St(t),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),1&s){let e;for(r=t[0],e=0;e<r.length;e+=1){const o=yt(t,r,e);c[e]?(c[e].p(o,s),B(c[e],1)):(c[e]=Tt(o),c[e].c(),B(c[e],1),c[e].m(n,null))}for(O(),e=r.length;e<c.length;e+=1)i(e);D()}},i(t){if(!s){for(let t=0;t<r.length;t+=1)B(c[t]);s=!0}},o(t){c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)N(c[t]);s=!1},d(t){o&&o.d(t),t&&u(e),t&&u(n),d(c,t)}}}function Vt(t,e,n){let s,o,{id:r=null}=e,c=[],i=[];var l;y((()=>{new Promise(((t,e)=>{const n=Z.transaction(["topics"],"readonly").objectStore("topics").getAll();n.onsuccess=e=>{t(n.result)}})).then((t=>{c=t,n(0,i=t),n(1,s=(t=>{const e=[];return t.forEach((t=>{t.tags.forEach((t=>{e.includes(t)||e.push(t)}))})),e.sort()})(c))}))})),l=()=>{if(r){const t=document.getElementById(r);t&&t.scrollIntoView()}},q().$$.after_update.push(l);return t.$$set=t=>{"id"in t&&n(4,r=t.id)},[i,s,o,()=>{n(0,i=o?c.filter((t=>t.tags.includes(o))):c)},r,function(){o=v(this),n(2,o),n(1,s)},()=>Y.setView("ViewTagInfo",{tag:o,topics:i})]}class Ht extends J{constructor(t){super(),F(this,t,Vt,Et,c,{id:4})}}class jt{constructor(t,e){this.count=0,this.md=t,this.tag=e}getTag(){return++this.count%2?`<${this.tag}>`:`</${this.tag}>`}check(){if(this.count%2)throw new Error(`Unbalanced tag: ${this.md} count: ${this.count}`);this.count=0}}class At{constructor(){this.map={},this._register("_","u"),this._register("*","b"),this._register("~","i"),this.regex=this._pattern()}_register(t,e){this.map[t]=new jt(t,e)}_pattern(){let t="";for(let e in this.map)t+=e;return new RegExp(`[${t}]`,"g")}tag(t){if(!this.map.hasOwnProperty(t))throw new Error("Unknown element: "+t);return this.map[t].getTag()}_check(){for(let t in this.map)this.map[t].check()}_substitute(t){const e=this;return t.replaceAll(this.regex,(function(t){return e.tag(t)}))}toHtml(t){Array.isArray(t)||(t=[t]);let e=!1,n="";for(let s of t)s.startsWith("- ")?(e||(n+="<ul>",e=!0),n+="<li>"+this._substitute(s.substring(2).trim())+"</li>"):(e?(n+="</ul>",e=!1):""!==n&&(n+="<br />"),n+=this._substitute(s.trim()));return e&&(n+="</ul>"),this._check(),n}}function Mt(t){let e,n,s,o,r,c=t[4].toHtml(t[0].details)+"";return{c(){e=f("div"),n=f("h5"),n.textContent="Details",s=h(),o=f("div"),r=f("p"),$(o,"class","card content is-info")},m(t,i){a(t,e,i),l(e,n),l(e,s),l(e,o),l(o,r),r.innerHTML=c},p(t,e){1&e&&c!==(c=t[4].toHtml(t[0].details)+"")&&(r.innerHTML=c)},d(t){t&&u(e)}}}function Pt(t){let e,n,s,r,c,i,d,g,w,b,v,x,_,q,y,k,S,C,L,T,E,V,H,j,A,M;r=new vt({props:{topic:t[0],status:t[1],size:t[3]}});let P=t[0].details&&Mt(t);return{c(){e=f("div"),n=f("div"),s=f("div"),z(r.$$.fragment),c=h(),i=f("div"),d=f("label"),d.textContent="Number of correct answers",g=h(),w=f("select"),b=f("option"),b.textContent="-- Select --",v=f("option"),v.textContent="Set 0",x=f("option"),x.textContent="Set 1",_=f("option"),_.textContent="Set 2",q=f("option"),q.textContent="Set 3",y=h(),P&&P.c(),k=h(),S=f("div"),C=f("button"),C.textContent="Back",L=h(),T=f("button"),T.textContent="Listing",E=h(),V=f("button"),H=p("Start"),$(s,"class","is-text-left"),$(d,"for","sf-set"),b.__value="",b.value=b.__value,v.__value="0",v.value=v.__value,x.__value="1",x.value=x.__value,_.__value="2",_.value=_.__value,q.__value="3",q.value=q.__value,$(w,"id","sf-set"),$(n,"class","grid grid-4"),$(C,"class","button"),$(T,"class","button"),$(V,"class","button"),V.disabled=t[2],$(S,"class","buttons"),$(e,"class","card card-shadow content")},m(o,u){a(o,e,u),l(e,n),l(n,s),Q(r,s,null),l(n,c),l(n,i),l(i,d),l(i,g),l(i,w),l(w,b),l(w,v),l(w,x),l(w,_),l(w,q),l(n,y),P&&P.m(n,null),l(e,k),l(e,S),l(S,C),l(S,L),l(S,T),l(S,E),l(S,V),l(V,H),j=!0,A||(M=[m(w,"change",t[8]),m(C,"click",t[5]),m(T,"click",t[6]),m(V,"click",t[7])],A=!0)},p(t,[e]){const s={};1&e&&(s.topic=t[0]),2&e&&(s.status=t[1]),8&e&&(s.size=t[3]),r.$set(s),t[0].details?P?P.p(t,e):(P=Mt(t),P.c(),P.m(n,null)):P&&(P.d(1),P=null),(!j||4&e)&&(V.disabled=t[2])},i(t){j||(B(r.$$.fragment,t),j=!0)},o(t){N(r.$$.fragment,t),j=!1},d(t){t&&u(e),U(r),P&&P.d(),A=!1,o(M)}}}function It(t,e,n){let{topic:s}=e,{questions:o=null}=e;const r=new At;let c=0,i=!0,l=0;const a=()=>{if(!o)return;const t=o.map((t=>t.progress));n(1,c=((t,e)=>{let n=0;for(let e=0;e<t.length;e++)n+=t[e];return ot(n,t.length*e)})(t,3)),n(2,i=((t,e)=>{for(let n in t)if(t[n]!==e)return!1;return!0})(t,3)),n(3,l=t.length)};y((async()=>{try{o||(await at(s.file),console.log("Loading questions for topics"),n(9,o=await ct(s)),a())}catch(t){G.addError("ViewTopicInfo: "+t.message)}}));return t.$$set=t=>{"topic"in t&&n(0,s=t.topic),"questions"in t&&n(9,o=t.questions)},[s,c,i,l,r,()=>{Y.setView("ViewTopicList",{id:s.file})},()=>{Y.setView("ViewTopicQuests",{topic:s})},()=>{Y.setView("ViewQuestAnswer",{topic:s})},t=>{const e=t.target;((t,e)=>{const n=IDBKeyRange.only(t),s=Z.transaction(["questions"],"readwrite").objectStore("questions"),o=s.index("file").openCursor(n);o.onsuccess=t=>{const n=o.result;if(n){const t=n.value;t.progress!==e&&(t.progress=e,s.put(t),console.log("Store:",s.name," update:",t.id)),n.continue()}else console.log("Store:",s.name,"set progress done:",e)}})(s.file,e.selectedIndex-1),e.selectedIndex=0,a()},o]}class Ot extends J{constructor(t){super(),F(this,t,It,Pt,c,{topic:0,questions:9})}}function Dt(e){let n,s,o,r,c,i,d,g,m,b,v,x,_,q,y,k=e[0].progress+"",S=e[0].total+"",C=e[0].ratio+"";return{c(){n=f("span"),s=p("Progress: "),o=f("span"),r=p(k),c=p(" /\n  "),i=f("span"),i.textContent="3",d=h(),g=f("span"),m=p("Total: "),b=f("span"),v=p(S),x=p(" Wrong:\n    "),_=f("span"),q=p(C),y=p("%"),$(o,"class","is-text-success"),$(i,"class","is-text-success"),$(b,"class","is-text-success"),$(_,"class","is-text-danger"),$(g,"class","hide-sm"),$(n,"class","h6")},m(t,e){a(t,n,e),l(n,s),l(n,o),l(o,r),l(n,c),l(n,i),l(n,d),l(n,g),l(g,m),l(g,b),l(b,v),l(g,x),l(g,_),l(_,q),l(_,y)},p(t,[e]){1&e&&k!==(k=t[0].progress+"")&&w(r,k),1&e&&S!==(S=t[0].total+"")&&w(v,S),1&e&&C!==(C=t[0].ratio+"")&&w(q,C)},i:t,o:t,d(t){t&&u(n)}}}function Bt(t,e,n){let{quest:s}=e;return t.$$set=t=>{"quest"in t&&n(0,s=t.quest)},[s]}class Nt extends J{constructor(t){super(),F(this,t,Bt,Dt,c,{quest:0})}}function zt(t,e,n){const s=t.slice();return s[3]=e[n],s}function Qt(t){let e,n,s,o,r,c,i,d,g,m,b,v,x,_,q,y,k,S,C,L,T,E,V=t[3].id+"",H=t[3].file+"",j=t[1].toHtml(t[3].quest)+"",A=t[1].toHtml(t[3].answer)+"";return m=new Nt({props:{quest:t[3]}}),{c(){e=f("div"),n=f("div"),s=f("span"),o=p("Id: "),r=p(V),c=h(),i=f("span"),d=p(H),g=h(),z(m.$$.fragment),b=h(),v=f("div"),x=f("div"),_=f("p"),y=h(),k=f("div"),S=f("div"),C=f("p"),L=h(),$(s,"class","h6"),$(i,"class","hide-sm"),$(e,"class","is-flex-spread grid-full"),$(x,"class","content"),$(v,"class",q="card "+t[2]()),$(S,"class","content"),$(k,"class",T="card "+t[2]())},m(t,u){a(t,e,u),l(e,n),l(n,s),l(s,o),l(s,r),l(n,c),l(n,i),l(i,d),l(e,g),Q(m,e,null),a(t,b,u),a(t,v,u),l(v,x),l(x,_),_.innerHTML=j,a(t,y,u),a(t,k,u),l(k,S),l(S,C),C.innerHTML=A,l(k,L),E=!0},p(t,e){(!E||1&e)&&V!==(V=t[3].id+"")&&w(r,V),(!E||1&e)&&H!==(H=t[3].file+"")&&w(d,H);const n={};1&e&&(n.quest=t[3]),m.$set(n),(!E||1&e)&&j!==(j=t[1].toHtml(t[3].quest)+"")&&(_.innerHTML=j),(!E||1&e)&&A!==(A=t[1].toHtml(t[3].answer)+"")&&(C.innerHTML=A)},i(t){E||(B(m.$$.fragment,t),E=!0)},o(t){N(m.$$.fragment,t),E=!1},d(t){t&&u(e),U(m),t&&u(b),t&&u(v),t&&u(y),t&&u(k)}}}function Ut(t){let e,n,s=t[0],o=[];for(let e=0;e<s.length;e+=1)o[e]=Qt(zt(t,s,e));const r=t=>N(o[t],1,1,(()=>{o[t]=null}));return{c(){e=f("div");for(let t=0;t<o.length;t+=1)o[t].c();$(e,"class","grid grid-2")},m(t,s){a(t,e,s);for(let t=0;t<o.length;t+=1)o[t].m(e,null);n=!0},p(t,[n]){if(7&n){let c;for(s=t[0],c=0;c<s.length;c+=1){const r=zt(t,s,c);o[c]?(o[c].p(r,n),B(o[c],1)):(o[c]=Qt(r),o[c].c(),B(o[c],1),o[c].m(e,null))}for(O(),c=s.length;c<o.length;c+=1)r(c);D()}},i(t){if(!n){for(let t=0;t<s.length;t+=1)B(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)N(o[t]);n=!1},d(t){t&&u(e),d(o,t)}}}function Wt(t,e,n){let{questions:s}=e;const o=new At,r=((t,e,n)=>{let s=0;return()=>s++%(2*t)<t?e:n})(2,"is-primary","is-info");return t.$$set=t=>{"questions"in t&&n(0,s=t.questions)},[s,o,r]}class Ft extends J{constructor(t){super(),F(this,t,Wt,Ut,c,{questions:0})}}function Jt(t){let e,n,s,o,r,c,i,d,g,b,v,x=t[0].title+"";return r=new Ft({props:{questions:t[1]}}),{c(){e=f("div"),n=f("h4"),s=p(x),o=h(),z(r.$$.fragment),c=h(),i=f("div"),d=f("button"),d.textContent="Back",$(d,"class","button"),$(i,"class","buttons"),$(e,"class","card card-shadow content")},m(u,f){a(u,e,f),l(e,n),l(n,s),l(e,o),Q(r,e,null),l(e,c),l(e,i),l(i,d),g=!0,b||(v=m(d,"click",t[3]),b=!0)},p(t,[e]){(!g||1&e)&&x!==(x=t[0].title+"")&&w(s,x);const n={};2&e&&(n.questions=t[1]),r.$set(n)},i(t){g||(B(r.$$.fragment,t),g=!0)},o(t){N(r.$$.fragment,t),g=!1},d(t){t&&u(e),U(r),b=!1,v()}}}function Rt(t,e,n){let{topic:s}=e,o=[];y((()=>{ct(s).then((t=>{n(1,o=t)}))}));const r=t=>{Y.setView("ViewTopicInfo",{topic:t})};return t.$$set=t=>{"topic"in t&&n(0,s=t.topic)},[s,o,r,()=>r(s)]}class Kt extends J{constructor(t){super(),F(this,t,Rt,Jt,c,{topic:0})}}function Yt(t,e,n){const s=t.slice();return s[8]=e[n],s}function Gt(t){let e,n,s=t[8].title+"";return{c(){e=f("li"),n=p(s)},m(t,s){a(t,e,s),l(e,n)},p(t,e){2&e&&s!==(s=t[8].title+"")&&w(n,s)},d(t){t&&u(e)}}}function Xt(e){let n,s,r,c,i,g,v,x,_,q,y,k,S,C,L,T,E,H,j,A,M,P,I,O=e[1],D=[];for(let t=0;t<O.length;t+=1)D[t]=Gt(Yt(e,O,t));return{c(){n=f("div"),s=f("div"),r=f("div"),c=p("Tag: "),i=p(e[0]),g=h(),v=f("ul");for(let t=0;t<D.length;t+=1)D[t].c();x=h(),_=f("div"),q=f("label"),q.textContent="Number of correct answers",y=h(),k=f("select"),S=f("option"),S.textContent="-- Select --",C=f("option"),C.textContent="Set 0",L=f("option"),L.textContent="Set 1",T=f("option"),T.textContent="Set 2",E=h(),H=f("div"),j=f("button"),j.textContent="Back",A=h(),M=f("button"),M.textContent="Listing",$(r,"class","is-text-left"),$(s,"class","grid grid-4"),$(q,"for","sf-set"),S.__value="-1",S.value=S.__value,C.__value="0",C.value=C.__value,L.__value="1",L.value=L.__value,T.__value="2",T.value=T.__value,$(k,"id","sf-set"),void 0===e[2]&&V((()=>e[7].call(k))),$(j,"class","button"),$(M,"class","button"),$(H,"class","buttons"),$(n,"class","card card-shadow content")},m(t,o){a(t,n,o),l(n,s),l(s,r),l(r,c),l(r,i),l(r,g),l(r,v);for(let t=0;t<D.length;t+=1)D[t].m(v,null);l(n,x),l(n,_),l(_,q),l(_,y),l(_,k),l(k,S),l(k,C),l(k,L),l(k,T),b(k,e[2]),l(n,E),l(n,H),l(H,j),l(H,A),l(H,M),P||(I=[m(k,"change",e[7]),m(k,"change",e[5]),m(j,"click",e[4]),m(M,"click",e[3])],P=!0)},p(t,[e]){if(1&e&&w(i,t[0]),2&e){let n;for(O=t[1],n=0;n<O.length;n+=1){const s=Yt(t,O,n);D[n]?D[n].p(s,e):(D[n]=Gt(s),D[n].c(),D[n].m(v,null))}for(;n<D.length;n+=1)D[n].d(1);D.length=O.length}4&e&&b(k,t[2])},i:t,o:t,d(t){t&&u(n),d(D,t),P=!1,o(I)}}}function Zt(t,e,n){let s,{tag:o}=e,{topics:r}=e,{questions:c=null}=e;return y((async()=>{try{if(!c){const t=[];r.forEach((e=>{t.push(at(e.file))})),await Promise.all(t),console.log("Loading questions for topics"),n(6,c=await(async(t,e)=>{const n=Z.transaction(["questions"],"readonly").objectStore("questions");let s=[];return t.forEach((t=>{s.push(it(n,t))})),Promise.all(s).then((t=>{let n=[].concat(...t);return n.sort(((t,e)=>e.ratio-t.ratio)),n.splice(0,e)}))})(r,30))}}catch(t){G.addError("ViewTagInfo: "+t.message)}})),t.$$set=t=>{"tag"in t&&n(0,o=t.tag),"topics"in t&&n(1,r=t.topics),"questions"in t&&n(6,c=t.questions)},[o,r,s,()=>{Y.setView("ViewTagQuests",{tag:o,topics:r,questions:c})},()=>{Y.setView("ViewTopicList")},t=>{if(!c)return;const e=t.target;(async(t,e)=>{const n=Z.transaction(["questions"],"readwrite").objectStore("questions"),s=t.map((t=>(t.progress=e,new Promise(((e,s)=>{n.put(t).onsuccess=t=>{e()}})))));await Promise.all(s)})(c,e.selectedIndex-1),e.selectedIndex=0},c,function(){s=v(this),n(2,s)}]}class te extends J{constructor(t){super(),F(this,t,Zt,Xt,c,{tag:0,topics:1,questions:6})}}function ee(t){let e,n,s,o,r,c,i,d,g,b,v,x;return c=new Ft({props:{questions:t[1]}}),{c(){e=f("div"),n=f("h4"),s=p("Tag: "),o=p(t[0]),r=h(),z(c.$$.fragment),i=h(),d=f("div"),g=f("button"),g.textContent="Back",$(g,"class","button"),$(d,"class","buttons"),$(e,"class","card card-shadow content")},m(u,f){a(u,e,f),l(e,n),l(n,s),l(n,o),l(e,r),Q(c,e,null),l(e,i),l(e,d),l(d,g),b=!0,v||(x=m(g,"click",t[4]),v=!0)},p(t,[e]){(!b||1&e)&&w(o,t[0]);const n={};2&e&&(n.questions=t[1]),c.$set(n)},i(t){b||(B(c.$$.fragment,t),b=!0)},o(t){N(c.$$.fragment,t),b=!1},d(t){t&&u(e),U(c),v=!1,x()}}}function ne(t,e,n){let{tag:s}=e,{topics:o}=e,{questions:r=[]}=e;const c=()=>{Y.setView("ViewTagInfo",{tag:s,topics:o,questions:r})};return t.$$set=t=>{"tag"in t&&n(0,s=t.tag),"topics"in t&&n(3,o=t.topics),"questions"in t&&n(1,r=t.questions)},[s,r,c,o,()=>c()]}class se extends J{constructor(t){super(),F(this,t,ne,ee,c,{tag:0,topics:3,questions:1})}}function oe(e){let n,s,o,r,c,i,d,g,m,b,v,x,_,q,y,k,S,C,L,T,E,V,H,j,A=e[0][0]+"",M=e[0][1]+"",P=e[0][2]+"",I=e[0][3]+"";return{c(){n=f("table"),s=f("tr"),o=f("td"),o.textContent="No correct Answers",r=h(),c=f("td"),i=p(A),d=h(),g=f("tr"),m=f("td"),m.textContent="One correct Answer",b=h(),v=f("td"),x=p(M),_=h(),q=f("tr"),y=f("td"),y.textContent="Two correct Answers",k=h(),S=f("td"),C=p(P),L=h(),T=f("tr"),E=f("td"),E.textContent="Learned",V=h(),H=f("td"),j=p(I),$(n,"class","table hide-md")},m(t,e){a(t,n,e),l(n,s),l(s,o),l(s,r),l(s,c),l(c,i),l(n,d),l(n,g),l(g,m),l(g,b),l(g,v),l(v,x),l(n,_),l(n,q),l(q,y),l(q,k),l(q,S),l(S,C),l(n,L),l(n,T),l(T,E),l(T,V),l(T,H),l(H,j)},p(t,[e]){1&e&&A!==(A=t[0][0]+"")&&w(i,A),1&e&&M!==(M=t[0][1]+"")&&w(x,M),1&e&&P!==(P=t[0][2]+"")&&w(C,P),1&e&&I!==(I=t[0][3]+"")&&w(j,I)},i:t,o:t,d(t){t&&u(n)}}}function re(t,e,n){let{statistic:s=[0,0,0,0]}=e;return t.$$set=t=>{"statistic"in t&&n(0,s=t.statistic)},[s]}class ce extends J{constructor(t){super(),F(this,t,re,oe,c,{statistic:0})}}function ie(t){let e,n=t[3].toHtml(t[1].details)+"";return{c(){e=f("p")},m(t,s){a(t,e,s),e.innerHTML=n},p(t,s){2&s&&n!==(n=t[3].toHtml(t[1].details)+"")&&(e.innerHTML=n)},d(t){t&&u(e)}}}function le(t){let e,n,s,o,r,c,i,d,g,m,b,v,x,_,q,y,k,S,C,L=t[0].id+"",T=t[3].toHtml(t[0].quest)+"",E=t[3].toHtml(t[0].answer)+"";d=new Nt({props:{quest:t[0]}});let V=t[1].details&&ie(t);return{c(){e=f("div"),n=f("div"),s=f("div"),o=f("div"),r=p("Question: "),c=p(L),i=h(),z(d.$$.fragment),g=h(),m=f("div"),b=f("p"),v=h(),x=f("div"),_=f("h5"),_.textContent="Answer",q=h(),y=f("div"),k=f("p"),S=h(),V&&V.c(),$(o,"class","h5"),$(s,"class","is-flex-spread block"),$(m,"class","card content is-primary"),$(y,"class","card content is-info"),x.hidden=t[2],$(e,"class","grid grid-2")},m(t,u){a(t,e,u),l(e,n),l(n,s),l(s,o),l(o,r),l(o,c),l(s,i),Q(d,s,null),l(n,g),l(n,m),l(m,b),b.innerHTML=T,l(e,v),l(e,x),l(x,_),l(x,q),l(x,y),l(y,k),k.innerHTML=E,l(y,S),V&&V.m(y,null),C=!0},p(t,[e]){(!C||1&e)&&L!==(L=t[0].id+"")&&w(c,L);const n={};1&e&&(n.quest=t[0]),d.$set(n),(!C||1&e)&&T!==(T=t[3].toHtml(t[0].quest)+"")&&(b.innerHTML=T),(!C||1&e)&&E!==(E=t[3].toHtml(t[0].answer)+"")&&(k.innerHTML=E),t[1].details?V?V.p(t,e):(V=ie(t),V.c(),V.m(y,null)):V&&(V.d(1),V=null),(!C||4&e)&&(x.hidden=t[2])},i(t){C||(B(d.$$.fragment,t),C=!0)},o(t){N(d.$$.fragment,t),C=!1},d(t){t&&u(e),U(d),V&&V.d()}}}function ae(t,e,n){let{quest:s}=e,{topic:o}=e,{hideAnswer:r}=e;const c=new At;return t.$$set=t=>{"quest"in t&&n(0,s=t.quest),"topic"in t&&n(1,o=t.topic),"hideAnswer"in t&&n(2,r=t.hideAnswer)},[s,o,r,c]}class ue extends J{constructor(t){super(),F(this,t,ae,le,c,{quest:0,topic:1,hideAnswer:2})}}function de(t){let e,n,s,r,c,i,d,g,b,v,x,_,q,y,k,S,C,L,T,E,V,H,j,A,M,P,I=t[0].title+"";return c=new ce({props:{statistic:t[1]}}),d=new ue({props:{topic:t[0],quest:t[3],hideAnswer:t[2]}}),{c(){e=f("div"),n=f("h4"),s=p(I),r=h(),z(c.$$.fragment),i=h(),z(d.$$.fragment),g=h(),b=f("div"),v=f("button"),x=p("Show"),q=h(),y=f("button"),k=p("Correct"),S=h(),C=f("button"),L=p("Wrong"),T=h(),E=f("button"),V=p("Skip"),H=h(),j=f("button"),j.textContent="Stop",$(v,"class","button"),v.hidden=_=!t[2],$(y,"class","button is-success"),y.hidden=t[2],$(C,"class","button is-danger"),C.hidden=t[2],$(E,"class","button is-warning"),E.hidden=t[2],$(j,"class","button"),$(b,"class","buttons"),$(e,"class","card card-shadow content")},m(o,u){a(o,e,u),l(e,n),l(n,s),l(e,r),Q(c,e,null),l(e,i),Q(d,e,null),l(e,g),l(e,b),l(b,v),l(v,x),l(b,q),l(b,y),l(y,k),l(b,S),l(b,C),l(C,L),l(b,T),l(b,E),l(E,V),l(b,H),l(b,j),A=!0,M||(P=[m(v,"click",t[6]),m(y,"click",t[7]),m(C,"click",t[8]),m(E,"click",t[9]),m(j,"click",t[5])],M=!0)},p(t,e){(!A||1&e)&&I!==(I=t[0].title+"")&&w(s,I);const n={};2&e&&(n.statistic=t[1]),c.$set(n);const o={};1&e&&(o.topic=t[0]),8&e&&(o.quest=t[3]),4&e&&(o.hideAnswer=t[2]),d.$set(o),(!A||4&e&&_!==(_=!t[2]))&&(v.hidden=_),(!A||4&e)&&(y.hidden=t[2]),(!A||4&e)&&(C.hidden=t[2]),(!A||4&e)&&(E.hidden=t[2])},i(t){A||(B(c.$$.fragment,t),B(d.$$.fragment,t),A=!0)},o(t){N(c.$$.fragment,t),N(d.$$.fragment,t),A=!1},d(t){t&&u(e),U(c),U(d),M=!1,o(P)}}}function fe(t){let e,n,s=t[3]&&de(t);return{c(){s&&s.c(),e=g()},m(t,o){s&&s.m(t,o),a(t,e,o),n=!0},p(t,[n]){t[3]?s?(s.p(t,n),8&n&&B(s,1)):(s=de(t),s.c(),B(s,1),s.m(e.parentNode,e)):s&&(O(),N(s,1,1,(()=>{s=null})),D())},i(t){n||(B(s),n=!0)},o(t){N(s),n=!1},d(t){s&&s.d(t),t&&u(e)}}}function pe(t,e,n){let s,{topic:o}=e;new At;let r,c,i,l=!0;const a=t=>{if(void 0===t)return c.push(i),void u();((t,e)=>{e?t.progress++:(t.progress=0,t.failed++),t.total++,t.ratio=ot(t.failed,t.total)})(i,t),(t=>new Promise(((e,n)=>{const s=Z.transaction(["questions"],"readwrite").objectStore("questions");s.put(t).onsuccess=n=>{console.log("Store:",s.name," update:",t),e()}})))(i).then((()=>{i.progress<3&&c.push(i),0===c.length&&d(),u()}))},u=()=>{n(3,i=c.shift()),console.log("next",i),n(1,s=(t=>{const e=[0,0,0,0];return t.forEach((t=>{e[t.progress]++})),e})(r)),n(2,l=!0)};y((()=>{ct(o).then((t=>{r=t,c=r.filter((t=>t.progress<3)),(t=>{for(let s=0;s<t.length;s++){let o=(e=0,n=t.length-1,Math.floor(Math.random()*(n-e+1)+e));if(s===o)continue;let r=t[s];t[s]=t[o],t[o]=r}var e,n})(c),u()}))}));const d=()=>{(t=>{const e=Z.transaction(["topics"],"readwrite").objectStore("topics"),n=e.get(t);e.get(t).onsuccess=t=>{const s=n.result;s.lastLearned=new Date,e.put(s).onsuccess=()=>{console.log("Store:",e.name,"update lastLearned:",s)}}})(o.file),Y.setView("ViewTopicList",{id:o.file})};return t.$$set=t=>{"topic"in t&&n(0,o=t.topic)},[o,s,l,i,a,d,()=>n(2,l=!1),()=>a(!0),()=>a(!1),()=>a()]}class he extends J{constructor(t){super(),F(this,t,pe,fe,c,{topic:0})}}function ge(t){let e,n;return e=new gt({}),{c(){z(e.$$.fragment)},m(t,s){Q(e,t,s),n=!0},i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){N(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function me(t){let n,s,o,r,c,i,d,p,g,m=0!==t[0].length&&ge();const w=[t[1].props];var b=t[1].component;function v(t){let n={};for(let t=0;t<w.length;t+=1)n=e(n,w[t]);return{props:n}}return b&&(i=new b(v())),{c(){n=f("div"),s=f("h2"),s.textContent="Cards",o=h(),m&&m.c(),r=h(),c=f("div"),i&&z(i.$$.fragment),d=h(),p=f("div"),p.innerHTML='<div class="is-text-right">by Volker Senkel 2021</div>',$(c,"id","main"),$(c,"class","block"),$(p,"class","block"),$(n,"class","container")},m(t,e){a(t,n,e),l(n,s),l(n,o),m&&m.m(n,null),l(n,r),l(n,c),i&&Q(i,c,null),l(n,d),l(n,p),g=!0},p(t,[e]){0!==t[0].length?m?1&e&&B(m,1):(m=ge(),m.c(),B(m,1),m.m(n,r)):m&&(O(),N(m,1,1,(()=>{m=null})),D());const s=2&e?function(t,e){const n={},s={},o={$$scope:1};let r=t.length;for(;r--;){const c=t[r],i=e[r];if(i){for(const t in c)t in i||(s[t]=1);for(const t in i)o[t]||(n[t]=i[t],o[t]=1);t[r]=i}else for(const t in c)o[t]=1}for(const t in s)t in n||(n[t]=void 0);return n}(w,[(o=t[1].props,"object"==typeof o&&null!==o?o:{})]):{};var o;if(b!==(b=t[1].component)){if(i){O();const t=i;N(t.$$.fragment,1,0,(()=>{U(t,1)})),D()}b?(i=new b(v()),z(i.$$.fragment),B(i.$$.fragment,1),Q(i,c,null)):i=null}else b&&i.$set(s)},i(t){g||(B(m),i&&B(i.$$.fragment,t),g=!0)},o(t){N(m),i&&N(i.$$.fragment,t),g=!1},d(t){t&&u(n),m&&m.d(),i&&U(i)}}}function $e(t,e,n){let s,o;return i(t,G,(t=>n(0,s=t))),i(t,Y,(t=>n(1,o=t))),y((()=>{try{(async()=>{if("serviceWorker"in navigator){const t=await navigator.serviceWorker.register("service-worker.js");console.log("Registration of serivce worker done - scope:",t.scope)}})()}catch(t){G.addError("App onMount(): "+t)}Y.views={ViewTopicList:{component:Ht},ViewTopicInfo:{component:Ot},ViewTopicQuests:{component:Kt},ViewTagInfo:{component:te},ViewTagQuests:{component:se},ViewQuestAnswer:{component:he}},ut().then((()=>{Y.setView("ViewTopicList")}))})),[s,o]}return new class extends J{constructor(t){super(),F(this,t,$e,me,c,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map

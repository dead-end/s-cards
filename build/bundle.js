var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function o(){return Object.create(null)}function s(t){t.forEach(n)}function i(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function l(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode.removeChild(t)}function d(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function g(){return p(" ")}function h(){return p("")}function m(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function w(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function b(t,e){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}t.selectedIndex=-1}function v(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}let x;function _(t){x=t}function q(){if(!x)throw new Error("Function called outside component initialization");return x}function y(t){q().$$.on_mount.push(t)}const k=[],S=[],C=[],T=[],E=Promise.resolve();let M=!1;function V(t){C.push(t)}let H=!1;const j=new Set;function L(){if(!H){H=!0;do{for(let t=0;t<k.length;t+=1){const e=k[t];_(e),A(e.$$)}for(_(null),k.length=0;S.length;)S.pop()();for(let t=0;t<C.length;t+=1){const e=C[t];j.has(e)||(j.add(e),e())}C.length=0}while(k.length);for(;T.length;)T.pop()();M=!1,H=!1,j.clear()}}function A(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(V)}}const P=new Set;let I;function z(){I={r:0,c:[],p:I}}function O(){I.r||s(I.c),I=I.p}function B(t,e){t&&t.i&&(P.delete(t),t.i(e))}function N(t,e,n,o){if(t&&t.o){if(P.has(t))return;P.add(t),I.c.push((()=>{P.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function D(t){t&&t.c()}function Q(t,e,o,r){const{fragment:c,on_mount:l,on_destroy:u,after_update:a}=t.$$;c&&c.m(e,o),r||V((()=>{const e=l.map(n).filter(i);u?u.push(...e):s(e),t.$$.on_mount=[]})),a.forEach(V)}function U(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function W(t,e){-1===t.$$.dirty[0]&&(k.push(t),M||(M=!0,E.then(L)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function R(e,n,i,r,c,l,u,d=[-1]){const f=x;_(e);const p=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:c,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:n.context||[]),callbacks:o(),dirty:d,skip_bound:!1,root:n.target||f.$$.root};u&&u(p.root);let g=!1;if(p.ctx=i?i(e,n.props||{},((t,n,...o)=>{const s=o.length?o[0]:n;return p.ctx&&c(p.ctx[t],p.ctx[t]=s)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](s),g&&W(e,t)),n})):[],p.update(),g=!0,s(p.before_update),p.fragment=!!r&&r(p.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);p.fragment&&p.fragment.l(t),t.forEach(a)}else p.fragment&&p.fragment.c();n.intro&&B(e.$$.fragment),Q(e,n.target,n.anchor,n.customElement),L()}_(f)}class F{$destroy(){U(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const J=[];function K(e,n=t){let o;const s=new Set;function i(t){if(r(e,t)&&(e=t,o)){const t=!J.length;for(const t of s)t[1](),J.push(t,e);if(t){for(let t=0;t<J.length;t+=2)J[t][0](J[t+1]);J.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(r,c=t){const l=[r,c];return s.add(l),1===s.size&&(o=n(i)||t),r(e),()=>{s.delete(l),0===s.size&&(o(),o=null)}}}}const Y=(()=>{const{subscribe:t,set:e,update:n}=K({component:""});return{views:{},subscribe:t,setView:(t,n)=>{const o=Y.views[t];o.props=n,e(o)}}})(),G=(()=>{const{subscribe:t,set:e,update:n}=K([]);return{subscribe:t,addError:t=>{console.log("Added error:",t),n((e=>(e.push(t),e)))},resetErrors:()=>{e([])}}})(),X=t=>fetch(t).then((e=>{if(!e.ok)throw Error(`Unable to get JSON: ${t} - ${e.statusText}`);return e.json()})).catch((t=>G.addError("fetchJson: "+t))),Z=t=>fetch(t,{method:"HEAD"}).then((e=>{if(!e.ok)throw Error(`Unable to last modified for: ${t} - ${e.statusText}`);const n=e.headers.get("Last-Modified");if(console.log("url: ",t,"header:",n),n)return new Date(n)})).catch((t=>G.addError("fetchLastModified: "+t)));let tt;const et=t=>{G.addError(t.type)},nt=()=>new Promise(((t,e)=>{const n=indexedDB.open("s-card",1);n.onupgradeneeded=t=>{tt=n.result,t.oldVersion<1&&(tt.createObjectStore("topics",{keyPath:"file"}),tt.createObjectStore("questions",{keyPath:"id",autoIncrement:!0}).createIndex("file","file",{unique:!1}),tt.createObjectStore("config",{keyPath:"key"}).transaction.oncomplete=()=>{console.log("Upgrade completed!")})},n.onerror=et,n.onsuccess=e=>{tt=n.result,tt.onerror=et,console.log("db init success!"),t()}})),ot=t=>{if(!t)return"";const e=t.getDate()>9?t.getDate():"0"+t.getDate(),n=t.getMonth()>9?t.getMonth():"0"+t.getMonth(),o=t.getHours()>9?t.getHours():"0"+t.getHours(),s=t.getMinutes()>9?t.getMinutes():"0"+t.getMinutes();return`${e}.${n}.${t.getFullYear()} ${o}:${s}`},st=(t,e)=>{const n=e||[];return(t||[]).toString()!==n.toString()},it=(t,e)=>{let n=0;for(let e=0;e<t.length;e++)n+=t[e];return rt(n,t.length*e)},rt=(t,e)=>{if(!e)return 0;const n=100*t/e;return Math.round(n)},ct=(t,e)=>((t,e,n,o)=>new Promise(((s,i)=>{const r=t.objectStore(e),c=r.index(n).getAllKeys(o);c.onsuccess=t=>{c.result.forEach((t=>{r.delete(t).onsuccess=e=>{console.log("Store:",r.name,"deleted:",t)}})),s()}})))(t,"questions","file",e),lt=t=>{const e=tt.transaction(["questions"],"readonly").objectStore("questions");return ut(e,t)},ut=(t,e)=>new Promise(((n,o)=>{const s=t.index("file").getAll(e.file);s.onsuccess=t=>{n(s.result)}})),at=t=>{const e=tt.transaction(["topics","questions"],"readwrite"),n=e.objectStore("topics"),o=n.getAll();o.onsuccess=s=>{const i=((t,e)=>{const n=new Map;return t.forEach((t=>{if(!t.hasOwnProperty(e))throw new Error(`Object has no property: ${e}`);n.set(t[e],t)})),n})(o.result,"file"),r=t.map((t=>t.file));for(let t of i.keys())r.includes(t)||(n.delete(t).onsuccess=()=>{console.log("Store:",n.name,"deleted:",t),ct(e,t)});t.forEach((t=>{dt(t,i.get(t.file))&&(n.put(t).onsuccess=e=>{console.log("Store:",n.name,"update:",t.file)})}))}},dt=(t,e)=>!e||(e.lastModified&&(t.lastModified=e.lastModified),t.title!==e.title||t.desc!==e.desc||(!st(t.tags,e.tags)||!st(t.details,e.details))),ft=async t=>{console.log(t);const e=(t=>new Promise(((e,n)=>{const o=tt.transaction(["topics"],"readonly").objectStore("topics"),s=o.get(t);s.onsuccess=t=>{const n=s.result.lastModified;console.log("Store:",o.name,"get lastModified:",n),e(n)}})))(t),n=Z(t),[o,s]=await Promise.all([e,n]);if(console.log("lmStore",o,"lmJson",s),!s)return;if(o&&o>=s)return;const i=await X(t);i.forEach((e=>((t,e)=>{t.file=e,t.total=0,t.failed=0,t.ratio=0,t.progress=0})(e,t))),console.log(i);const r=tt.transaction(["topics","questions"],"readwrite");ct(r,t).then((()=>{((t,e,n)=>new Promise(((o,s)=>{const i=t.objectStore(e);n.forEach((t=>{i.add(t).onsuccess=e=>{console.log("Store:",i.name,"added:",t)}})),o()})))(r,"questions",i).then((()=>{((t,e,n)=>{const o=t.objectStore("topics"),s=o.get(e);o.get(e).onsuccess=t=>{const e=s.result;e.lastModified=n,o.put(e).onsuccess=()=>{console.log("Store:",o.name,"set lastModified:",e)}}})(r,t,s)}))}))},pt=async()=>{await nt();const t=new Promise(((t,e)=>{const n=tt.transaction(["config"],"readonly").objectStore("config").get("topics-last-modified");n.onsuccess=e=>{const o=n.result;o?t(o.value):t()}})),e=Z("data/topics.json"),[n,o]=await Promise.all([t,e]);console.log("last modified store:",n),console.log("last modified head:",o),o&&(null!==n||n<o)&&await X("data/topics.json").then((t=>{at(t),(t=>{const e={key:"topics-last-modified",value:t},n=tt.transaction(["config"],"readwrite").objectStore("config");n.put(e).onsuccess=()=>{console.log("Store:",n.name,"set lastModified:",e)}})(o)}))};function gt(t,e,n){const o=t.slice();return o[2]=e[n],o}function ht(t){let e,n,o=t[2]+"";return{c(){e=f("li"),n=p(o)},m(t,o){u(t,e,o),l(e,n)},p(t,e){1&e&&o!==(o=t[2]+"")&&w(n,o)},d(t){t&&a(e)}}}function mt(e){let n,o,s,i,r,c,p,h,w,b=e[0],v=[];for(let t=0;t<b.length;t+=1)v[t]=ht(gt(e,b,t));return{c(){n=f("div"),o=f("h4"),o.textContent="Errors",s=g(),i=f("ul");for(let t=0;t<v.length;t+=1)v[t].c();r=g(),c=f("div"),p=f("button"),p.textContent="Ok",$(o,"class","is-text-danger"),$(p,"class","button"),$(c,"class","buttons"),$(n,"class","card card-shadow block content")},m(t,a){u(t,n,a),l(n,o),l(n,s),l(n,i);for(let t=0;t<v.length;t+=1)v[t].m(i,null);l(n,r),l(n,c),l(c,p),h||(w=m(p,"click",e[1]),h=!0)},p(t,[e]){if(1&e){let n;for(b=t[0],n=0;n<b.length;n+=1){const o=gt(t,b,n);v[n]?v[n].p(o,e):(v[n]=ht(o),v[n].c(),v[n].m(i,null))}for(;n<v.length;n+=1)v[n].d(1);v.length=b.length}},i:t,o:t,d(t){t&&a(n),d(v,t),h=!1,w()}}}function $t(t,e,n){let o;c(t,G,(t=>n(0,o=t)));return[o,()=>{G.resetErrors()}]}class wt extends F{constructor(t){super(),R(this,t,$t,mt,r,{})}}function bt(t){let e,n,o=t[0].desc+"";return{c(){e=f("p"),n=p(o)},m(t,o){u(t,e,o),l(e,n)},p(t,e){1&e&&o!==(o=t[0].desc+"")&&w(n,o)},d(t){t&&a(e)}}}function vt(e){let n,o,s,i,r,c,d,m,$,b,v,x,_,q,y,k,S,C,T,E,M,V,H,j,L,A,P,I,z,O,B=e[0].title+"",N=ot(e[0].lastModified)+"",D=e[0].tags.join(", ")+"",Q=e[0].desc&&bt(e);return{c(){n=f("h4"),o=p(B),s=g(),i=f("table"),r=f("tr"),c=f("td"),c.textContent="Modified",d=g(),m=f("td"),$=p(N),b=g(),v=f("tr"),x=f("td"),x.textContent="Status",_=g(),q=f("td"),y=p(e[1]),k=p("%"),S=g(),C=f("tr"),T=f("td"),T.textContent="Size",E=g(),M=f("td"),V=p(e[2]),H=g(),j=f("tr"),L=f("td"),L.textContent="Tags",A=g(),P=f("td"),I=p(D),z=g(),Q&&Q.c(),O=h()},m(t,e){u(t,n,e),l(n,o),u(t,s,e),u(t,i,e),l(i,r),l(r,c),l(r,d),l(r,m),l(m,$),l(i,b),l(i,v),l(v,x),l(v,_),l(v,q),l(q,y),l(q,k),l(i,S),l(i,C),l(C,T),l(C,E),l(C,M),l(M,V),l(i,H),l(i,j),l(j,L),l(j,A),l(j,P),l(P,I),u(t,z,e),Q&&Q.m(t,e),u(t,O,e)},p(t,[e]){1&e&&B!==(B=t[0].title+"")&&w(o,B),1&e&&N!==(N=ot(t[0].lastModified)+"")&&w($,N),2&e&&w(y,t[1]),4&e&&w(V,t[2]),1&e&&D!==(D=t[0].tags.join(", ")+"")&&w(I,D),t[0].desc?Q?Q.p(t,e):(Q=bt(t),Q.c(),Q.m(O.parentNode,O)):Q&&(Q.d(1),Q=null)},i:t,o:t,d(t){t&&a(n),t&&a(s),t&&a(i),t&&a(z),Q&&Q.d(t),t&&a(O)}}}function xt(t,e,n){let{topic:o}=e,{status:s=0}=e,{size:i=0}=e;return t.$$set=t=>{"topic"in t&&n(0,o=t.topic),"status"in t&&n(1,s=t.status),"size"in t&&n(2,i=t.size)},[o,s,i]}class _t extends F{constructor(t){super(),R(this,t,xt,vt,r,{topic:0,status:1,size:2})}}function qt(t){let e,n,o,s,i,r,c,d,p;return n=new _t({props:{topic:t[0],status:t[1],size:t[2]}}),{c(){e=f("div"),D(n.$$.fragment),o=g(),s=f("div"),i=f("button"),i.textContent="Show",$(i,"class","button"),$(s,"class","buttons"),$(e,"class","card card-shadow content"),$(e,"id",r=t[0].file)},m(r,a){u(r,e,a),Q(n,e,null),l(e,o),l(e,s),l(s,i),c=!0,d||(p=m(i,"click",t[4]),d=!0)},p(t,[o]){const s={};1&o&&(s.topic=t[0]),2&o&&(s.status=t[1]),4&o&&(s.size=t[2]),n.$set(s),(!c||1&o&&r!==(r=t[0].file))&&$(e,"id",r)},i(t){c||(B(n.$$.fragment,t),c=!0)},o(t){N(n.$$.fragment,t),c=!1},d(t){t&&a(e),U(n),d=!1,p()}}}function yt(t,e,n){let{topic:o}=e,s=0,i=0;const r=t=>{Y.setView("ViewTopicInfo",{topic:t})};y((()=>{var t;(t=o.file,new Promise(((e,n)=>{const o=[],s=IDBKeyRange.only(t),i=tt.transaction(["questions"],"readwrite").objectStore("questions"),r=i.index("file").openCursor(s);r.onsuccess=t=>{const n=r.result;if(n){const t=n.value;o.push(t.progress),n.continue()}else console.log("Store:",i.name,"progress values:",o),e(o)}}))).then((t=>{n(1,s=it(t,3)),n(2,i=t.length)}))}));return t.$$set=t=>{"topic"in t&&n(0,o=t.topic)},[o,s,i,r,()=>r(o)]}class kt extends F{constructor(t){super(),R(this,t,yt,qt,r,{topic:0})}}function St(t,e,n){const o=t.slice();return o[8]=e[n],o}function Ct(t,e,n){const o=t.slice();return o[11]=e[n],o}function Tt(t){let e,n,o,i,r,c,p,h,w=t[1],v=[];for(let e=0;e<w.length;e+=1)v[e]=Et(Ct(t,w,e));let x=t[2]&&Mt(t);return{c(){e=f("div"),n=f("label"),n.textContent="Tag Filter",o=g(),i=f("select"),r=f("option"),r.textContent="-- Select --";for(let t=0;t<v.length;t+=1)v[t].c();c=g(),x&&x.c(),$(n,"for","tag-select"),r.__value="",r.value=r.__value,$(i,"id","tag-select"),void 0===t[2]&&V((()=>t[5].call(i))),$(e,"class","block")},m(s,a){u(s,e,a),l(e,n),l(e,o),l(e,i),l(i,r);for(let t=0;t<v.length;t+=1)v[t].m(i,null);b(i,t[2]),l(e,c),x&&x.m(e,null),p||(h=[m(i,"change",t[5]),m(i,"change",t[3])],p=!0)},p(t,n){if(2&n){let e;for(w=t[1],e=0;e<w.length;e+=1){const o=Ct(t,w,e);v[e]?v[e].p(o,n):(v[e]=Et(o),v[e].c(),v[e].m(i,null))}for(;e<v.length;e+=1)v[e].d(1);v.length=w.length}6&n&&b(i,t[2]),t[2]?x?x.p(t,n):(x=Mt(t),x.c(),x.m(e,null)):x&&(x.d(1),x=null)},d(t){t&&a(e),d(v,t),x&&x.d(),p=!1,s(h)}}}function Et(t){let e,n,o,s=t[11]+"";return{c(){e=f("option"),n=p(s),e.__value=o=t[11],e.value=e.__value},m(t,o){u(t,e,o),l(e,n)},p(t,i){2&i&&s!==(s=t[11]+"")&&w(n,s),2&i&&o!==(o=t[11])&&(e.__value=o,e.value=e.__value)},d(t){t&&a(e)}}}function Mt(e){let n,o,s;return{c(){n=f("button"),n.textContent="Show",$(n,"class","button")},m(t,i){u(t,n,i),o||(s=m(n,"click",e[6]),o=!0)},p:t,d(t){t&&a(n),o=!1,s()}}}function Vt(t){let e,n;return e=new kt({props:{topic:t[8]}}),{c(){D(e.$$.fragment)},m(t,o){Q(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.topic=t[8]),e.$set(o)},i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){N(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function Ht(t){let e,n,o,s=t[1]&&Tt(t),i=t[0],r=[];for(let e=0;e<i.length;e+=1)r[e]=Vt(St(t,i,e));const c=t=>N(r[t],1,1,(()=>{r[t]=null}));return{c(){s&&s.c(),e=g(),n=f("div");for(let t=0;t<r.length;t+=1)r[t].c();$(n,"class","grid grid-4")},m(t,i){s&&s.m(t,i),u(t,e,i),u(t,n,i);for(let t=0;t<r.length;t+=1)r[t].m(n,null);o=!0},p(t,[o]){if(t[1]?s?s.p(t,o):(s=Tt(t),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),1&o){let e;for(i=t[0],e=0;e<i.length;e+=1){const s=St(t,i,e);r[e]?(r[e].p(s,o),B(r[e],1)):(r[e]=Vt(s),r[e].c(),B(r[e],1),r[e].m(n,null))}for(z(),e=i.length;e<r.length;e+=1)c(e);O()}},i(t){if(!o){for(let t=0;t<i.length;t+=1)B(r[t]);o=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)N(r[t]);o=!1},d(t){s&&s.d(t),t&&a(e),t&&a(n),d(r,t)}}}function jt(t,e,n){let o,s,{id:i=null}=e,r=[],c=[];var l;y((()=>{new Promise(((t,e)=>{const n=tt.transaction(["topics"],"readonly").objectStore("topics").getAll();n.onsuccess=e=>{t(n.result)}})).then((t=>{r=t,n(0,c=t),n(1,o=(t=>{const e=[];return t.forEach((t=>{t.tags.forEach((t=>{e.includes(t)||e.push(t)}))})),e.sort()})(r))}))})),l=()=>{if(i){const t=document.getElementById(i);t&&t.scrollIntoView()}},q().$$.after_update.push(l);return t.$$set=t=>{"id"in t&&n(4,i=t.id)},[c,o,s,()=>{n(0,c=s?r.filter((t=>t.tags.includes(s))):r)},i,function(){s=v(this),n(2,s),n(1,o)},()=>Y.setView("ViewTagInfo",{tag:s,topics:c})]}class Lt extends F{constructor(t){super(),R(this,t,jt,Ht,r,{id:4})}}class At{constructor(t,e){this.count=0,this.md=t,this.tag=e}getTag(){return++this.count%2?`<${this.tag}>`:`</${this.tag}>`}check(){if(this.count%2)throw new Error(`Unbalanced tag: ${this.md} count: ${this.count}`);this.count=0}}class Pt{constructor(){this.map={},this._register("_","u"),this._register("*","b"),this._register("~","i"),this.regex=this._pattern()}_register(t,e){this.map[t]=new At(t,e)}_pattern(){let t="";for(let e in this.map)t+=e;return new RegExp(`[${t}]`,"g")}tag(t){if(!this.map.hasOwnProperty(t))throw new Error("Unknown element: "+t);return this.map[t].getTag()}_check(){for(let t in this.map)this.map[t].check()}_substitute(t){const e=this;return t.replaceAll(this.regex,(function(t){return e.tag(t)}))}toHtml(t){Array.isArray(t)||(t=[t]);let e=!1,n="";for(let o of t)o.startsWith("- ")?(e||(n+="<ul>",e=!0),n+="<li>"+this._substitute(o.substring(2).trim())+"</li>"):(e?(n+="</ul>",e=!1):""!==n&&(n+="<br />"),n+=this._substitute(o.trim()));return e&&(n+="</ul>"),this._check(),n}}function It(t){let e,n,o,s,i,r=t[4].toHtml(t[0].details)+"";return{c(){e=f("div"),n=f("h5"),n.textContent="Details",o=g(),s=f("div"),i=f("p"),$(s,"class","card content is-info")},m(t,c){u(t,e,c),l(e,n),l(e,o),l(e,s),l(s,i),i.innerHTML=r},p(t,e){1&e&&r!==(r=t[4].toHtml(t[0].details)+"")&&(i.innerHTML=r)},d(t){t&&a(e)}}}function zt(t){let e,n,o,i,r,c,d,h,w,b,v,x,_,q,y,k,S,C,T,E,M,V,H,j,L,A;i=new _t({props:{topic:t[0],status:t[1],size:t[3]}});let P=t[0].details&&It(t);return{c(){e=f("div"),n=f("div"),o=f("div"),D(i.$$.fragment),r=g(),c=f("div"),d=f("label"),d.textContent="Number of correct answers",h=g(),w=f("select"),b=f("option"),b.textContent="-- Select --",v=f("option"),v.textContent="Set 0",x=f("option"),x.textContent="Set 1",_=f("option"),_.textContent="Set 2",q=f("option"),q.textContent="Set 3",y=g(),P&&P.c(),k=g(),S=f("div"),C=f("button"),C.textContent="Back",T=g(),E=f("button"),E.textContent="Listing",M=g(),V=f("button"),H=p("Start"),$(o,"class","is-text-left"),$(d,"for","sf-set"),b.__value="",b.value=b.__value,v.__value="0",v.value=v.__value,x.__value="1",x.value=x.__value,_.__value="2",_.value=_.__value,q.__value="3",q.value=q.__value,$(w,"id","sf-set"),$(n,"class","grid grid-4"),$(C,"class","button"),$(E,"class","button"),$(V,"class","button"),V.disabled=t[2],$(S,"class","buttons"),$(e,"class","card card-shadow content")},m(s,a){u(s,e,a),l(e,n),l(n,o),Q(i,o,null),l(n,r),l(n,c),l(c,d),l(c,h),l(c,w),l(w,b),l(w,v),l(w,x),l(w,_),l(w,q),l(n,y),P&&P.m(n,null),l(e,k),l(e,S),l(S,C),l(S,T),l(S,E),l(S,M),l(S,V),l(V,H),j=!0,L||(A=[m(w,"change",t[8]),m(C,"click",t[5]),m(E,"click",t[6]),m(V,"click",t[7])],L=!0)},p(t,[e]){const o={};1&e&&(o.topic=t[0]),2&e&&(o.status=t[1]),8&e&&(o.size=t[3]),i.$set(o),t[0].details?P?P.p(t,e):(P=It(t),P.c(),P.m(n,null)):P&&(P.d(1),P=null),(!j||4&e)&&(V.disabled=t[2])},i(t){j||(B(i.$$.fragment,t),j=!0)},o(t){N(i.$$.fragment,t),j=!1},d(t){t&&a(e),U(i),P&&P.d(),L=!1,s(A)}}}function Ot(t,e,n){let{topic:o}=e,{questions:s=null}=e;const i=new Pt;let r=0,c=!0,l=0;const u=()=>{if(!s)return;const t=s.map((t=>t.progress));n(1,r=it(t,3)),n(2,c=((t,e)=>{for(let n in t)if(t[n]!==e)return!1;return!0})(t,3)),n(3,l=t.length)};y((async()=>{try{s||(await ft(o.file),console.log("Loading questions for topics"),n(9,s=await lt(o)),u())}catch(t){G.addError("ViewTopicInfo: "+t.message)}}));return t.$$set=t=>{"topic"in t&&n(0,o=t.topic),"questions"in t&&n(9,s=t.questions)},[o,r,c,l,i,()=>{Y.setView("ViewTopicList",{id:o.file})},()=>{Y.setView("ViewTopicQuests",{topic:o})},()=>{Y.setView("ViewQuestAnswer",{topic:o})},t=>{const e=t.target;((t,e)=>{const n=IDBKeyRange.only(t),o=tt.transaction(["questions"],"readwrite").objectStore("questions"),s=o.index("file").openCursor(n);s.onsuccess=t=>{const n=s.result;if(n){const t=n.value;t.progress!==e&&(t.progress=e,o.put(t),console.log("Store:",o.name," update:",t.id)),n.continue()}else console.log("Store:",o.name,"set progress done:",e)}})(o.file,e.selectedIndex-1),e.selectedIndex=0,u()},s]}class Bt extends F{constructor(t){super(),R(this,t,Ot,zt,r,{topic:0,questions:9})}}function Nt(e){let n,o,s,i,r,c,d,h,m,b,v,x,_,q,y,k=e[0].progress+"",S=e[0].total+"",C=e[0].ratio+"";return{c(){n=f("span"),o=p("Progress: "),s=f("span"),i=p(k),r=p(" /\n  "),c=f("span"),c.textContent="3",d=g(),h=f("span"),m=p("Total: "),b=f("span"),v=p(S),x=p(" Wrong:\n    "),_=f("span"),q=p(C),y=p("%"),$(s,"class","is-text-success"),$(c,"class","is-text-success"),$(b,"class","is-text-success"),$(_,"class","is-text-danger"),$(h,"class","hide-sm"),$(n,"class","h6")},m(t,e){u(t,n,e),l(n,o),l(n,s),l(s,i),l(n,r),l(n,c),l(n,d),l(n,h),l(h,m),l(h,b),l(b,v),l(h,x),l(h,_),l(_,q),l(_,y)},p(t,[e]){1&e&&k!==(k=t[0].progress+"")&&w(i,k),1&e&&S!==(S=t[0].total+"")&&w(v,S),1&e&&C!==(C=t[0].ratio+"")&&w(q,C)},i:t,o:t,d(t){t&&a(n)}}}function Dt(t,e,n){let{quest:o}=e;return t.$$set=t=>{"quest"in t&&n(0,o=t.quest)},[o]}class Qt extends F{constructor(t){super(),R(this,t,Dt,Nt,r,{quest:0})}}function Ut(t,e,n){const o=t.slice();return o[3]=e[n],o}function Wt(t){let e,n,o,s,i,r,c,d,h,m,b,v,x,_,q,y,k,S,C=t[3].id+"",T=t[1].toHtml(t[3].quest)+"",E=t[1].toHtml(t[3].answer)+"";return r=new Qt({props:{quest:t[3]}}),{c(){e=f("div"),n=f("div"),o=p("Id: "),s=p(C),i=g(),D(r.$$.fragment),c=g(),d=f("div"),h=f("div"),m=f("p"),v=g(),x=f("div"),_=f("div"),q=f("p"),y=g(),$(n,"class","h6"),$(e,"class","is-flex-spread grid-full"),$(h,"class","content"),$(d,"class",b="card "+t[2]()),$(_,"class","content"),$(x,"class",k="card "+t[2]())},m(t,a){u(t,e,a),l(e,n),l(n,o),l(n,s),l(e,i),Q(r,e,null),u(t,c,a),u(t,d,a),l(d,h),l(h,m),m.innerHTML=T,u(t,v,a),u(t,x,a),l(x,_),l(_,q),q.innerHTML=E,l(x,y),S=!0},p(t,e){(!S||1&e)&&C!==(C=t[3].id+"")&&w(s,C);const n={};1&e&&(n.quest=t[3]),r.$set(n),(!S||1&e)&&T!==(T=t[1].toHtml(t[3].quest)+"")&&(m.innerHTML=T),(!S||1&e)&&E!==(E=t[1].toHtml(t[3].answer)+"")&&(q.innerHTML=E)},i(t){S||(B(r.$$.fragment,t),S=!0)},o(t){N(r.$$.fragment,t),S=!1},d(t){t&&a(e),U(r),t&&a(c),t&&a(d),t&&a(v),t&&a(x)}}}function Rt(t){let e,n,o=t[0],s=[];for(let e=0;e<o.length;e+=1)s[e]=Wt(Ut(t,o,e));const i=t=>N(s[t],1,1,(()=>{s[t]=null}));return{c(){e=f("div");for(let t=0;t<s.length;t+=1)s[t].c();$(e,"class","grid grid-2")},m(t,o){u(t,e,o);for(let t=0;t<s.length;t+=1)s[t].m(e,null);n=!0},p(t,[n]){if(7&n){let r;for(o=t[0],r=0;r<o.length;r+=1){const i=Ut(t,o,r);s[r]?(s[r].p(i,n),B(s[r],1)):(s[r]=Wt(i),s[r].c(),B(s[r],1),s[r].m(e,null))}for(z(),r=o.length;r<s.length;r+=1)i(r);O()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)B(s[t]);n=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)N(s[t]);n=!1},d(t){t&&a(e),d(s,t)}}}function Ft(t,e,n){let{questions:o}=e;const s=new Pt,i=((t,e,n)=>{let o=0;return()=>o++%(2*t)<t?e:n})(2,"is-primary","is-info");return t.$$set=t=>{"questions"in t&&n(0,o=t.questions)},[o,s,i]}class Jt extends F{constructor(t){super(),R(this,t,Ft,Rt,r,{questions:0})}}function Kt(t){let e,n,o,s,i,r,c,d,h,b,v,x=t[0].title+"";return i=new Jt({props:{questions:t[1]}}),{c(){e=f("div"),n=f("h4"),o=p(x),s=g(),D(i.$$.fragment),r=g(),c=f("div"),d=f("button"),d.textContent="Back",$(d,"class","button"),$(c,"class","buttons"),$(e,"class","card card-shadow content")},m(a,f){u(a,e,f),l(e,n),l(n,o),l(e,s),Q(i,e,null),l(e,r),l(e,c),l(c,d),h=!0,b||(v=m(d,"click",t[3]),b=!0)},p(t,[e]){(!h||1&e)&&x!==(x=t[0].title+"")&&w(o,x);const n={};2&e&&(n.questions=t[1]),i.$set(n)},i(t){h||(B(i.$$.fragment,t),h=!0)},o(t){N(i.$$.fragment,t),h=!1},d(t){t&&a(e),U(i),b=!1,v()}}}function Yt(t,e,n){let{topic:o}=e,s=[];y((()=>{lt(o).then((t=>{n(1,s=t)}))}));const i=t=>{Y.setView("ViewTopicInfo",{topic:t})};return t.$$set=t=>{"topic"in t&&n(0,o=t.topic)},[o,s,i,()=>i(o)]}class Gt extends F{constructor(t){super(),R(this,t,Yt,Kt,r,{topic:0})}}function Xt(t,e,n){const o=t.slice();return o[7]=e[n],o}function Zt(t){let e,n,o=t[7].title+"";return{c(){e=f("li"),n=p(o)},m(t,o){u(t,e,o),l(e,n)},p(t,e){2&e&&o!==(o=t[7].title+"")&&w(n,o)},d(t){t&&a(e)}}}function te(e){let n,o,i,r,c,h,v,x,_,q,y,k,S,C,T,E,M,H,j,L,A,P,I,z=e[1],O=[];for(let t=0;t<z.length;t+=1)O[t]=Zt(Xt(e,z,t));return{c(){n=f("div"),o=f("div"),i=f("div"),r=p("Tag: "),c=p(e[0]),h=g(),v=f("ul");for(let t=0;t<O.length;t+=1)O[t].c();x=g(),_=f("div"),q=f("label"),q.textContent="Number of correct answers",y=g(),k=f("select"),S=f("option"),S.textContent="-- Select --",C=f("option"),C.textContent="Set 0",T=f("option"),T.textContent="Set 1",E=f("option"),E.textContent="Set 2",M=g(),H=f("div"),j=f("button"),j.textContent="Back",L=g(),A=f("button"),A.textContent="Listing",$(i,"class","is-text-left"),$(o,"class","grid grid-4"),$(q,"for","sf-set"),S.__value="-1",S.value=S.__value,C.__value="0",C.value=C.__value,T.__value="1",T.value=T.__value,E.__value="2",E.value=E.__value,$(k,"id","sf-set"),void 0===e[2]&&V((()=>e[6].call(k))),$(j,"class","button"),$(A,"class","button"),$(H,"class","buttons"),$(n,"class","card card-shadow content")},m(t,s){u(t,n,s),l(n,o),l(o,i),l(i,r),l(i,c),l(i,h),l(i,v);for(let t=0;t<O.length;t+=1)O[t].m(v,null);l(n,x),l(n,_),l(_,q),l(_,y),l(_,k),l(k,S),l(k,C),l(k,T),l(k,E),b(k,e[2]),l(n,M),l(n,H),l(H,j),l(H,L),l(H,A),P||(I=[m(k,"change",e[6]),m(j,"click",e[4]),m(A,"click",e[3])],P=!0)},p(t,[e]){if(1&e&&w(c,t[0]),2&e){let n;for(z=t[1],n=0;n<z.length;n+=1){const o=Xt(t,z,n);O[n]?O[n].p(o,e):(O[n]=Zt(o),O[n].c(),O[n].m(v,null))}for(;n<O.length;n+=1)O[n].d(1);O.length=z.length}4&e&&b(k,t[2])},i:t,o:t,d(t){t&&a(n),d(O,t),P=!1,s(I)}}}function ee(t,e,n){let o,{tag:s}=e,{topics:i}=e,{questions:r=null}=e;return y((async()=>{try{if(!r){const t=[];i.forEach((e=>{t.push(ft(e.file))})),await Promise.all(t),console.log("Loading questions for topics"),n(5,r=await(async(t,e)=>{const n=tt.transaction(["questions"],"readonly").objectStore("questions");let o=[];return t.forEach((t=>{o.push(ut(n,t))})),Promise.all(o).then((t=>{let n=[].concat(...t);return n.sort(((t,e)=>e.ratio-t.ratio)),n.splice(0,e)}))})(i,30))}}catch(t){G.addError("ViewTagInfo: "+t.message)}})),t.$$set=t=>{"tag"in t&&n(0,s=t.tag),"topics"in t&&n(1,i=t.topics),"questions"in t&&n(5,r=t.questions)},[s,i,o,()=>{Y.setView("ViewTagQuests",{tag:s,topics:i,questions:r})},()=>{Y.setView("ViewTopicList")},r,function(){o=v(this),n(2,o)}]}class ne extends F{constructor(t){super(),R(this,t,ee,te,r,{tag:0,topics:1,questions:5})}}function oe(t){let e,n,o,s,i,r,c,d,h,b,v,x;return r=new Jt({props:{questions:t[1]}}),{c(){e=f("div"),n=f("h4"),o=p("Tag: "),s=p(t[0]),i=g(),D(r.$$.fragment),c=g(),d=f("div"),h=f("button"),h.textContent="Back",$(h,"class","button"),$(d,"class","buttons"),$(e,"class","card card-shadow content")},m(a,f){u(a,e,f),l(e,n),l(n,o),l(n,s),l(e,i),Q(r,e,null),l(e,c),l(e,d),l(d,h),b=!0,v||(x=m(h,"click",t[4]),v=!0)},p(t,[e]){(!b||1&e)&&w(s,t[0]);const n={};2&e&&(n.questions=t[1]),r.$set(n)},i(t){b||(B(r.$$.fragment,t),b=!0)},o(t){N(r.$$.fragment,t),b=!1},d(t){t&&a(e),U(r),v=!1,x()}}}function se(t,e,n){let{tag:o}=e,{topics:s}=e,{questions:i=[]}=e;const r=()=>{Y.setView("ViewTagInfo",{tag:o,topics:s,questions:i})};return t.$$set=t=>{"tag"in t&&n(0,o=t.tag),"topics"in t&&n(3,s=t.topics),"questions"in t&&n(1,i=t.questions)},[o,i,r,s,()=>r()]}class ie extends F{constructor(t){super(),R(this,t,se,oe,r,{tag:0,topics:3,questions:1})}}function re(e){let n,o,s,i,r,c,d,h,m,b,v,x,_,q,y,k,S,C,T,E,M,V,H,j,L=e[0][0]+"",A=e[0][1]+"",P=e[0][2]+"",I=e[0][3]+"";return{c(){n=f("table"),o=f("tr"),s=f("td"),s.textContent="No correct Answers",i=g(),r=f("td"),c=p(L),d=g(),h=f("tr"),m=f("td"),m.textContent="One correct Answer",b=g(),v=f("td"),x=p(A),_=g(),q=f("tr"),y=f("td"),y.textContent="Two correct Answers",k=g(),S=f("td"),C=p(P),T=g(),E=f("tr"),M=f("td"),M.textContent="Learned",V=g(),H=f("td"),j=p(I),$(n,"class","table hide-md")},m(t,e){u(t,n,e),l(n,o),l(o,s),l(o,i),l(o,r),l(r,c),l(n,d),l(n,h),l(h,m),l(h,b),l(h,v),l(v,x),l(n,_),l(n,q),l(q,y),l(q,k),l(q,S),l(S,C),l(n,T),l(n,E),l(E,M),l(E,V),l(E,H),l(H,j)},p(t,[e]){1&e&&L!==(L=t[0][0]+"")&&w(c,L),1&e&&A!==(A=t[0][1]+"")&&w(x,A),1&e&&P!==(P=t[0][2]+"")&&w(C,P),1&e&&I!==(I=t[0][3]+"")&&w(j,I)},i:t,o:t,d(t){t&&a(n)}}}function ce(t,e,n){let{statistic:o=[0,0,0,0]}=e;return t.$$set=t=>{"statistic"in t&&n(0,o=t.statistic)},[o]}class le extends F{constructor(t){super(),R(this,t,ce,re,r,{statistic:0})}}function ue(t){let e,n=t[3].toHtml(t[1].details)+"";return{c(){e=f("p")},m(t,o){u(t,e,o),e.innerHTML=n},p(t,o){2&o&&n!==(n=t[3].toHtml(t[1].details)+"")&&(e.innerHTML=n)},d(t){t&&a(e)}}}function ae(t){let e,n,o,s,i,r,c,d,h,m,b,v,x,_,q,y,k,S,C,T=t[0].id+"",E=t[3].toHtml(t[0].quest)+"",M=t[3].toHtml(t[0].answer)+"";d=new Qt({props:{quest:t[0]}});let V=t[1].details&&ue(t);return{c(){e=f("div"),n=f("div"),o=f("div"),s=f("div"),i=p("Question: "),r=p(T),c=g(),D(d.$$.fragment),h=g(),m=f("div"),b=f("p"),v=g(),x=f("div"),_=f("h5"),_.textContent="Answer",q=g(),y=f("div"),k=f("p"),S=g(),V&&V.c(),$(s,"class","h5"),$(o,"class","is-flex-spread block"),$(m,"class","card content is-primary"),$(y,"class","card content is-info"),x.hidden=t[2],$(e,"class","grid grid-2")},m(t,a){u(t,e,a),l(e,n),l(n,o),l(o,s),l(s,i),l(s,r),l(o,c),Q(d,o,null),l(n,h),l(n,m),l(m,b),b.innerHTML=E,l(e,v),l(e,x),l(x,_),l(x,q),l(x,y),l(y,k),k.innerHTML=M,l(y,S),V&&V.m(y,null),C=!0},p(t,[e]){(!C||1&e)&&T!==(T=t[0].id+"")&&w(r,T);const n={};1&e&&(n.quest=t[0]),d.$set(n),(!C||1&e)&&E!==(E=t[3].toHtml(t[0].quest)+"")&&(b.innerHTML=E),(!C||1&e)&&M!==(M=t[3].toHtml(t[0].answer)+"")&&(k.innerHTML=M),t[1].details?V?V.p(t,e):(V=ue(t),V.c(),V.m(y,null)):V&&(V.d(1),V=null),(!C||4&e)&&(x.hidden=t[2])},i(t){C||(B(d.$$.fragment,t),C=!0)},o(t){N(d.$$.fragment,t),C=!1},d(t){t&&a(e),U(d),V&&V.d()}}}function de(t,e,n){let{quest:o}=e,{topic:s}=e,{hideAnswer:i}=e;const r=new Pt;return t.$$set=t=>{"quest"in t&&n(0,o=t.quest),"topic"in t&&n(1,s=t.topic),"hideAnswer"in t&&n(2,i=t.hideAnswer)},[o,s,i,r]}class fe extends F{constructor(t){super(),R(this,t,de,ae,r,{quest:0,topic:1,hideAnswer:2})}}function pe(t){let e,n,o,i,r,c,d,h,b,v,x,_,q,y,k,S,C,T,E,M,V,H,j,L,A,P,I=t[0].title+"";return r=new le({props:{statistic:t[1]}}),d=new fe({props:{topic:t[0],quest:t[3],hideAnswer:t[2]}}),{c(){e=f("div"),n=f("h4"),o=p(I),i=g(),D(r.$$.fragment),c=g(),D(d.$$.fragment),h=g(),b=f("div"),v=f("button"),x=p("Show"),q=g(),y=f("button"),k=p("Correct"),S=g(),C=f("button"),T=p("Wrong"),E=g(),M=f("button"),V=p("Skip"),H=g(),j=f("button"),j.textContent="Stop",$(v,"class","button"),v.hidden=_=!t[2],$(y,"class","button is-success"),y.hidden=t[2],$(C,"class","button is-danger"),C.hidden=t[2],$(M,"class","button is-warning"),M.hidden=t[2],$(j,"class","button"),$(b,"class","buttons"),$(e,"class","card card-shadow content")},m(s,a){u(s,e,a),l(e,n),l(n,o),l(e,i),Q(r,e,null),l(e,c),Q(d,e,null),l(e,h),l(e,b),l(b,v),l(v,x),l(b,q),l(b,y),l(y,k),l(b,S),l(b,C),l(C,T),l(b,E),l(b,M),l(M,V),l(b,H),l(b,j),L=!0,A||(P=[m(v,"click",t[6]),m(y,"click",t[7]),m(C,"click",t[8]),m(M,"click",t[9]),m(j,"click",t[5])],A=!0)},p(t,e){(!L||1&e)&&I!==(I=t[0].title+"")&&w(o,I);const n={};2&e&&(n.statistic=t[1]),r.$set(n);const s={};1&e&&(s.topic=t[0]),8&e&&(s.quest=t[3]),4&e&&(s.hideAnswer=t[2]),d.$set(s),(!L||4&e&&_!==(_=!t[2]))&&(v.hidden=_),(!L||4&e)&&(y.hidden=t[2]),(!L||4&e)&&(C.hidden=t[2]),(!L||4&e)&&(M.hidden=t[2])},i(t){L||(B(r.$$.fragment,t),B(d.$$.fragment,t),L=!0)},o(t){N(r.$$.fragment,t),N(d.$$.fragment,t),L=!1},d(t){t&&a(e),U(r),U(d),A=!1,s(P)}}}function ge(t){let e,n,o=t[3]&&pe(t);return{c(){o&&o.c(),e=h()},m(t,s){o&&o.m(t,s),u(t,e,s),n=!0},p(t,[n]){t[3]?o?(o.p(t,n),8&n&&B(o,1)):(o=pe(t),o.c(),B(o,1),o.m(e.parentNode,e)):o&&(z(),N(o,1,1,(()=>{o=null})),O())},i(t){n||(B(o),n=!0)},o(t){N(o),n=!1},d(t){o&&o.d(t),t&&a(e)}}}function he(t,e,n){let o,{topic:s}=e;new Pt;let i,r,c,l=!0;const u=t=>{if(void 0===t)return r.push(c),void a();((t,e)=>{e?t.progress++:(t.progress=0,t.failed++),t.total++,t.ratio=rt(t.failed,t.total)})(c,t),(t=>new Promise(((e,n)=>{const o=tt.transaction(["questions"],"readwrite").objectStore("questions");o.put(t).onsuccess=n=>{console.log("Store:",o.name," update:",t),e()}})))(c).then((()=>{c.progress<3&&r.push(c),0===r.length&&d(),a()}))},a=()=>{n(3,c=r.shift()),console.log("next",c),n(1,o=(t=>{const e=[0,0,0,0];return t.forEach((t=>{e[t.progress]++})),e})(i)),n(2,l=!0)};y((()=>{lt(s).then((t=>{i=t,r=i.filter((t=>t.progress<3)),(t=>{for(let o=0;o<t.length;o++){let s=(e=0,n=t.length-1,Math.floor(Math.random()*(n-e+1)+e));if(o===s)continue;let i=t[o];t[o]=t[s],t[s]=i}var e,n})(r),a()}))}));const d=()=>{Y.setView("ViewTopicList",{id:s.file})};return t.$$set=t=>{"topic"in t&&n(0,s=t.topic)},[s,o,l,c,u,d,()=>n(2,l=!1),()=>u(!0),()=>u(!1),()=>u()]}class me extends F{constructor(t){super(),R(this,t,he,ge,r,{topic:0})}}function $e(t){let e,n;return e=new wt({}),{c(){D(e.$$.fragment)},m(t,o){Q(e,t,o),n=!0},i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){N(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function we(t){let n,o,s,i,r,c,d,p,h,m=0!==t[0].length&&$e();const w=[t[1].props];var b=t[1].component;function v(t){let n={};for(let t=0;t<w.length;t+=1)n=e(n,w[t]);return{props:n}}return b&&(c=new b(v())),{c(){n=f("div"),o=f("h2"),o.textContent="Cards",s=g(),m&&m.c(),i=g(),r=f("div"),c&&D(c.$$.fragment),d=g(),p=f("div"),p.innerHTML='<div class="is-text-right">by Volker Senkel 2021</div>',$(r,"id","main"),$(r,"class","block"),$(p,"class","block"),$(n,"class","container")},m(t,e){u(t,n,e),l(n,o),l(n,s),m&&m.m(n,null),l(n,i),l(n,r),c&&Q(c,r,null),l(n,d),l(n,p),h=!0},p(t,[e]){0!==t[0].length?m?1&e&&B(m,1):(m=$e(),m.c(),B(m,1),m.m(n,i)):m&&(z(),N(m,1,1,(()=>{m=null})),O());const o=2&e?function(t,e){const n={},o={},s={$$scope:1};let i=t.length;for(;i--;){const r=t[i],c=e[i];if(c){for(const t in r)t in c||(o[t]=1);for(const t in c)s[t]||(n[t]=c[t],s[t]=1);t[i]=c}else for(const t in r)s[t]=1}for(const t in o)t in n||(n[t]=void 0);return n}(w,[(s=t[1].props,"object"==typeof s&&null!==s?s:{})]):{};var s;if(b!==(b=t[1].component)){if(c){z();const t=c;N(t.$$.fragment,1,0,(()=>{U(t,1)})),O()}b?(c=new b(v()),D(c.$$.fragment),B(c.$$.fragment,1),Q(c,r,null)):c=null}else b&&c.$set(o)},i(t){h||(B(m),c&&B(c.$$.fragment,t),h=!0)},o(t){N(m),c&&N(c.$$.fragment,t),h=!1},d(t){t&&a(n),m&&m.d(),c&&U(c)}}}function be(t,e,n){let o,s;return c(t,G,(t=>n(0,o=t))),c(t,Y,(t=>n(1,s=t))),y((()=>{try{(async()=>{if("serviceWorker"in navigator){const t=await navigator.serviceWorker.register("service-worker.js");console.log("Registration of serivce worker done - scope:",t.scope)}})()}catch(t){G.addError("App: "+t)}Y.views={ViewTopicList:{component:Lt},ViewTopicInfo:{component:Bt},ViewTopicQuests:{component:Gt},ViewTagInfo:{component:ne},ViewTagQuests:{component:ie},ViewQuestAnswer:{component:me}},pt().then((()=>{Y.setView("ViewTopicList")}))})),[o,s]}return new class extends F{constructor(t){super(),R(this,t,be,we,r,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map

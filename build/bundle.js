var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function o(){return Object.create(null)}function s(t){t.forEach(n)}function r(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function l(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode.removeChild(t)}function d(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function g(){return p(" ")}function h(){return p("")}function m(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}let w;function v(t){w=t}function x(t){(function(){if(!w)throw new Error("Function called outside component initialization");return w})().$$.on_mount.push(t)}const S=[],y=[],_=[],k=[],C=Promise.resolve();let q=!1;function M(t){_.push(t)}let j=!1;const E=new Set;function P(){if(!j){j=!0;do{for(let t=0;t<S.length;t+=1){const e=S[t];v(e),A(e.$$)}for(v(null),S.length=0;y.length;)y.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];E.has(e)||(E.add(e),e())}_.length=0}while(S.length);for(;k.length;)k.pop()();q=!1,j=!1,E.clear()}}function A(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(M)}}const T=new Set;let L;function D(){L={r:0,c:[],p:L}}function O(){L.r||s(L.c),L=L.p}function V(t,e){t&&t.i&&(T.delete(t),t.i(e))}function B(t,e,n,o){if(t&&t.o){if(T.has(t))return;T.add(t),L.c.push((()=>{T.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function I(t){t&&t.c()}function N(t,e,o,c){const{fragment:i,on_mount:l,on_destroy:u,after_update:a}=t.$$;i&&i.m(e,o),c||M((()=>{const e=l.map(n).filter(r);u?u.push(...e):s(e),t.$$.on_mount=[]})),a.forEach(M)}function H(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Q(t,e){-1===t.$$.dirty[0]&&(S.push(t),q||(q=!0,C.then(P)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function z(e,n,r,c,i,l,u,d=[-1]){const f=w;v(e);const p=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:i,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:n.context||[]),callbacks:o(),dirty:d,skip_bound:!1,root:n.target||f.$$.root};u&&u(p.root);let g=!1;if(p.ctx=r?r(e,n.props||{},((t,n,...o)=>{const s=o.length?o[0]:n;return p.ctx&&i(p.ctx[t],p.ctx[t]=s)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](s),g&&Q(e,t)),n})):[],p.update(),g=!0,s(p.before_update),p.fragment=!!c&&c(p.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);p.fragment&&p.fragment.l(t),t.forEach(a)}else p.fragment&&p.fragment.c();n.intro&&V(e.$$.fragment),N(e,n.target,n.anchor,n.customElement),P()}v(f)}class W{$destroy(){H(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const F=[];function K(e,n=t){let o;const s=new Set;function r(t){if(c(e,t)&&(e=t,o)){const t=!F.length;for(const t of s)t[1](),F.push(t,e);if(t){for(let t=0;t<F.length;t+=2)F[t][0](F[t+1]);F.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(c,i=t){const l=[c,i];return s.add(l),1===s.size&&(o=n(r)||t),c(e),()=>{s.delete(l),0===s.size&&(o(),o=null)}}}}const R=(()=>{const{subscribe:t,set:e,update:n}=K({component:""});return{views:{},subscribe:t,setView:(t,n)=>{const o=R.views[t];o.props=n,e(o)}}})(),J=(()=>{const{subscribe:t,set:e,update:n}=K([]);return{subscribe:t,addError:t=>{console.log("Added error:",t),n((e=>(e.push(t),e)))},resetErrors:()=>{e([])}}})(),U=t=>fetch(t).then((t=>t.json())).catch((t=>console.error(t))),Y=t=>fetch(t,{method:"HEAD"}).then((e=>{const n=e.headers.get("Last-Modified");if(console.log("url: ",t,"header:",n),n)return new Date(n)})).catch((t=>console.error(t)));let G;const X=t=>{J.addError(t.type)},Z=()=>new Promise(((t,e)=>{const n=indexedDB.open("s-card",1);n.onupgradeneeded=t=>{G=n.result,t.oldVersion<1&&(G.createObjectStore("topics",{keyPath:"file"}),G.createObjectStore("questions",{keyPath:"id",autoIncrement:!0}).createIndex("file","file",{unique:!1}),G.createObjectStore("config",{keyPath:"key"}).transaction.oncomplete=()=>{console.log("Upgrade completed!")})},n.onerror=X,n.onsuccess=e=>{G=n.result,G.onerror=X,console.log("db init success!"),t()}})),tt=t=>{if(!t)return"";const e=new Date;e.setTime(t);const n=e.getDate()>9?e.getDate():"0"+e.getDate(),o=e.getMonth()>9?e.getMonth():"0"+e.getMonth(),s=e.getHours()>9?e.getHours():"0"+e.getHours(),r=e.getMinutes()>9?e.getMinutes():"0"+e.getMinutes();return`${n}.${o}.${e.getFullYear()} ${s}:${r}`},et=(t,e)=>{if(!e)return 0;const n=100*t/e;return Math.round(100*n)/100},nt=t=>{const e=[0,0,0,0];return t.forEach((t=>{e[t.progress]++})),e},ot=(t,e)=>((t,e,n,o)=>new Promise(((s,r)=>{const c=t.objectStore(e),i=c.index(n).getAllKeys(o);i.onsuccess=t=>{i.result.forEach((t=>{c.delete(t).onsuccess=e=>{console.log("Store:",c.name,"deleted:",t)}})),s()}})))(t,"questions","file",e),st=t=>new Promise(((e,n)=>{const o=G.transaction(["questions"],"readonly").objectStore("questions").index("file").getAll(t.file);o.onsuccess=t=>{e(o.result)}})),rt=t=>{const e=G.transaction(["topics","questions"],"readwrite"),n=e.objectStore("topics"),o=n.getAll();o.onsuccess=s=>{const r=((t,e)=>{const n=new Map;return t.forEach((t=>{if(!t.hasOwnProperty(e))throw new Error(`Object has no property: ${e}`);n.set(t[e],t)})),n})(o.result,"file"),c=t.map((t=>t.file));for(let t of r.keys())c.includes(t)||(n.delete(t).onsuccess=()=>{console.log("Store:",n.name,"deleted:",t),ot(e,t)});t.forEach((t=>{ct(t,r.get(t.file))&&(n.put(t).onsuccess=e=>{console.log("Store:",n.name,"update:",t.file)})}))}},ct=(t,e)=>!e||(e.lastModified&&(t.lastModified=e.lastModified),t.title!==e.title||t.desc!==e.desc),it=async t=>{console.log(t);const e=(t=>new Promise(((e,n)=>{const o=G.transaction(["topics"],"readonly").objectStore("topics"),s=o.get(t);s.onsuccess=t=>{const n=s.result.lastModified;console.log("Store:",o.name,"get lastModified:",n),e(n)}})))(t),n=Y(t),[o,s]=await Promise.all([e,n]);if(console.log("lmStore",o,"lmJson",s),!s)return;if(o&&o>=s)return;const r=await U(t);r.forEach((e=>((t,e)=>{t.file=e,t.total=0,t.failed=0,t.ratio=0,t.progress=0})(e,t))),console.log(r);const c=G.transaction(["topics","questions"],"readwrite");ot(c,t).then((()=>{((t,e,n)=>new Promise(((o,s)=>{const r=t.objectStore(e);n.forEach((t=>{r.add(t).onsuccess=e=>{console.log("Store:",r.name,"added:",t)}})),o()})))(c,"questions",r).then((()=>{((t,e,n)=>{const o=t.objectStore("topics"),s=o.get(e);o.get(e).onsuccess=t=>{const e=s.result;e.lastModified=n,o.put(e).onsuccess=()=>{console.log("Store:",o.name,"set lastModified:",e)}}})(c,t,s)}))}))},lt=async()=>{await Z();const t=new Promise(((t,e)=>{const n=G.transaction(["config"],"readonly").objectStore("config").get("topics-last-modified");n.onsuccess=e=>{const o=n.result;o?t(o.value):t()}})),e=Y("data/topics.json"),[n,o]=await Promise.all([t,e]);console.log("last modified store:",n),console.log("last modified head:",o),o&&(null!==n||n<o)&&await U("data/topics.json").then((t=>{rt(t),(t=>{const e={key:"topics-last-modified",value:t},n=G.transaction(["config"],"readwrite").objectStore("config");n.put(e).onsuccess=()=>{console.log("Store:",n.name,"set lastModified:",e)}})(o)}))};function ut(e){let n;return{c(){n=f("h2"),n.textContent="Cards"},m(t,e){u(t,n,e)},p:t,i:t,o:t,d(t){t&&a(n)}}}class at extends W{constructor(t){super(),z(this,t,null,ut,c,{})}}function dt(e){let n;return{c(){n=f("div"),n.innerHTML='<div class="is-text-right">by Volker Senkel 2021</div>',$(n,"class","block")},m(t,e){u(t,n,e)},p:t,i:t,o:t,d(t){t&&a(n)}}}class ft extends W{constructor(t){super(),z(this,t,null,dt,c,{})}}function pt(t,e,n){const o=t.slice();return o[2]=e[n],o}function gt(t){let e,n,o=t[2]+"";return{c(){e=f("li"),n=p(o)},m(t,o){u(t,e,o),l(e,n)},p(t,e){1&e&&o!==(o=t[2]+"")&&b(n,o)},d(t){t&&a(e)}}}function ht(e){let n,o,s,r,c,i,p,h,b,w=e[0],v=[];for(let t=0;t<w.length;t+=1)v[t]=gt(pt(e,w,t));return{c(){n=f("div"),o=f("h4"),o.textContent="Errors",s=g(),r=f("ul");for(let t=0;t<v.length;t+=1)v[t].c();c=g(),i=f("div"),p=f("button"),p.textContent="Ok",$(o,"class","is-text-danger"),$(p,"class","button"),$(i,"class","buttons"),$(n,"class","card card-shadow block content")},m(t,a){u(t,n,a),l(n,o),l(n,s),l(n,r);for(let t=0;t<v.length;t+=1)v[t].m(r,null);l(n,c),l(n,i),l(i,p),h||(b=m(p,"click",e[1]),h=!0)},p(t,[e]){if(1&e){let n;for(w=t[0],n=0;n<w.length;n+=1){const o=pt(t,w,n);v[n]?v[n].p(o,e):(v[n]=gt(o),v[n].c(),v[n].m(r,null))}for(;n<v.length;n+=1)v[n].d(1);v.length=w.length}},i:t,o:t,d(t){t&&a(n),d(v,t),h=!1,b()}}}function mt(t,e,n){let o;i(t,J,(t=>n(0,o=t)));return[o,()=>{J.resetErrors()}]}class $t extends W{constructor(t){super(),z(this,t,mt,ht,c,{})}}function bt(t){let e,n,o=t[0].desc+"";return{c(){e=f("p"),n=p(o)},m(t,o){u(t,e,o),l(e,n)},p(t,e){1&e&&o!==(o=t[0].desc+"")&&b(n,o)},d(t){t&&a(e)}}}function wt(e){let n,o,s,r,c,i,d,h,w,v,x,S=e[0].title+"",y=e[0].desc&&bt(e);return{c(){n=f("div"),o=f("h4"),s=p(S),r=g(),c=f("table"),c.innerHTML="<tr><td>Modified</td> \n      <td></td></tr> \n    <tr><td>Status</td> \n      <td></td></tr>",i=g(),y&&y.c(),d=g(),h=f("div"),w=f("button"),w.textContent="Show",$(w,"class","button"),$(h,"class","buttons"),$(n,"class","card card-shadow content")},m(t,a){u(t,n,a),l(n,o),l(o,s),l(n,r),l(n,c),l(n,i),y&&y.m(n,null),l(n,d),l(n,h),l(h,w),v||(x=m(w,"click",e[2]),v=!0)},p(t,[e]){1&e&&S!==(S=t[0].title+"")&&b(s,S),t[0].desc?y?y.p(t,e):(y=bt(t),y.c(),y.m(n,d)):y&&(y.d(1),y=null)},i:t,o:t,d(t){t&&a(n),y&&y.d(),v=!1,x()}}}function vt(t,e,n){let{topic:o}=e;const s=t=>{R.setView("TopicShow",{topic:t})};return t.$$set=t=>{"topic"in t&&n(0,o=t.topic)},[o,s,()=>s(o)]}class xt extends W{constructor(t){super(),z(this,t,vt,wt,c,{topic:0})}}function St(t,e,n){const o=t.slice();return o[1]=e[n],o}function yt(t){let e,n;return e=new xt({props:{topic:t[1]}}),{c(){I(e.$$.fragment)},m(t,o){N(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.topic=t[1]),e.$set(o)},i(t){n||(V(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function _t(t){let e,n,o=t[0],s=[];for(let e=0;e<o.length;e+=1)s[e]=yt(St(t,o,e));const r=t=>B(s[t],1,1,(()=>{s[t]=null}));return{c(){e=f("div");for(let t=0;t<s.length;t+=1)s[t].c();$(e,"class","grid grid-4")},m(t,o){u(t,e,o);for(let t=0;t<s.length;t+=1)s[t].m(e,null);n=!0},p(t,[n]){if(1&n){let c;for(o=t[0],c=0;c<o.length;c+=1){const r=St(t,o,c);s[c]?(s[c].p(r,n),V(s[c],1)):(s[c]=yt(r),s[c].c(),V(s[c],1),s[c].m(e,null))}for(D(),c=o.length;c<s.length;c+=1)r(c);O()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)V(s[t]);n=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)B(s[t]);n=!1},d(t){t&&a(e),d(s,t)}}}function kt(t,e,n){let o=[];return x((()=>{new Promise(((t,e)=>{const n=G.transaction(["topics"],"readonly").objectStore("topics").getAll();n.onsuccess=e=>{t(n.result)}})).then((t=>{n(0,o=t)}))})),[o]}class Ct extends W{constructor(t){super(),z(this,t,kt,_t,c,{})}}function qt(e){let n,o,r,c,i,d,h,w,v,x,S,y,_,k,C,q,M,j,E,P,A,T,L,D,O,V,B,I,N,H,Q,z,W,F,K,R,J,U,Y,G,X,Z,et,nt,ot,st,rt,ct,it,lt,ut,at,dt,ft,pt,gt=e[0].title+"",ht=e[0].file+"",mt=tt(e[0].lastModified)+"",$t=e[0].desc+"";return{c(){n=f("div"),o=f("h4"),r=p(gt),c=g(),i=f("div"),d=f("table"),h=f("tr"),w=f("td"),w.textContent="File",v=g(),x=f("td"),S=p(ht),y=g(),_=f("tr"),k=f("td"),k.textContent="Modified",C=g(),q=f("td"),M=p(mt),j=g(),E=f("tr"),P=f("td"),P.textContent="Description",A=g(),T=f("td"),L=p($t),D=g(),O=f("tr"),V=f("td"),V.textContent="Status",B=g(),I=f("td"),N=p(e[1]),H=g(),Q=f("tr"),z=f("td"),z.textContent="Size",W=g(),F=f("td"),K=p(e[3]),R=g(),J=f("div"),U=f("label"),U.textContent="Number of correct answers",Y=g(),G=f("select"),X=f("option"),X.textContent="-- Select --",Z=f("option"),Z.textContent="Set 0",et=f("option"),et.textContent="Set 1",nt=f("option"),nt.textContent="Set 2",ot=f("option"),ot.textContent="Set 3",st=g(),rt=f("div"),ct=f("button"),ct.textContent="Back",it=g(),lt=f("button"),lt.textContent="Listing",ut=g(),at=f("button"),dt=p("Start"),$(d,"class","is-text-left"),$(U,"for","sf-set"),X.__value="",X.value=X.__value,Z.__value="0",Z.value=Z.__value,et.__value="1",et.value=et.__value,nt.__value="2",nt.value=nt.__value,ot.__value="3",ot.value=ot.__value,$(G,"id","sf-set"),$(i,"class","grid grid-4"),$(ct,"class","button"),$(lt,"class","button"),$(at,"class","button"),at.disabled=e[2],$(rt,"class","buttons"),$(n,"class","card card-shadow content")},m(t,s){u(t,n,s),l(n,o),l(o,r),l(n,c),l(n,i),l(i,d),l(d,h),l(h,w),l(h,v),l(h,x),l(x,S),l(d,y),l(d,_),l(_,k),l(_,C),l(_,q),l(q,M),l(d,j),l(d,E),l(E,P),l(E,A),l(E,T),l(T,L),l(d,D),l(d,O),l(O,V),l(O,B),l(O,I),l(I,N),l(d,H),l(d,Q),l(Q,z),l(Q,W),l(Q,F),l(F,K),l(i,R),l(i,J),l(J,U),l(J,Y),l(J,G),l(G,X),l(G,Z),l(G,et),l(G,nt),l(G,ot),l(n,st),l(n,rt),l(rt,ct),l(rt,it),l(rt,lt),l(rt,ut),l(rt,at),l(at,dt),ft||(pt=[m(G,"change",e[7]),m(ct,"click",e[4]),m(lt,"click",e[5]),m(at,"click",e[6])],ft=!0)},p(t,[e]){1&e&&gt!==(gt=t[0].title+"")&&b(r,gt),1&e&&ht!==(ht=t[0].file+"")&&b(S,ht),1&e&&mt!==(mt=tt(t[0].lastModified)+"")&&b(M,mt),1&e&&$t!==($t=t[0].desc+"")&&b(L,$t),2&e&&b(N,t[1]),8&e&&b(K,t[3]),4&e&&(at.disabled=t[2])},i:t,o:t,d(t){t&&a(n),ft=!1,s(pt)}}}function Mt(t,e,n){let{topic:o}=e,s="",r=!0,c=0;const i=()=>{var t;(t=o.file,new Promise(((e,n)=>{const o=[],s=IDBKeyRange.only(t),r=G.transaction(["questions"],"readwrite").objectStore("questions"),c=r.index("file").openCursor(s);c.onsuccess=t=>{const n=c.result;if(n){const t=n.value;o.push(t.progress),n.continue()}else console.log("Store:",r.name,"progress values:",o),e(o)}}))).then((t=>{n(1,s=((t,e)=>{let n=0;for(let e=0;e<t.length;e++)n+=t[e];return et(n,t.length*e)})(t,3)),n(2,r=((t,e)=>{for(let n in t)if(t[n]!==e)return!1;return!0})(t,3)),n(3,c=t.length)}))};x((()=>{it(o.file).then((()=>i())).catch((t=>{J.addError(t.message)}))}));return t.$$set=t=>{"topic"in t&&n(0,o=t.topic)},[o,s,r,c,()=>{R.setView("TopicList")},()=>{R.setView("QuestList",{topic:o})},()=>{R.setView("QuestShow",{topic:o})},t=>{console.log("index",t.target.selectedIndex),((t,e)=>{const n=IDBKeyRange.only(t),o=G.transaction(["questions"],"readwrite").objectStore("questions"),s=o.index("file").openCursor(n);s.onsuccess=t=>{const n=s.result;if(n){const t=n.value;t.progress!==e&&(t.progress=e,o.put(t),console.log("Store:",o.name," update:",t.id)),n.continue()}else console.log("Store:",o.name," set progress done:",e)}})(o.file,t.target.selectedIndex-1),t.target.selectedIndex=0,i()}]}class jt extends W{constructor(t){super(),z(this,t,Mt,qt,c,{topic:0})}}function Et(t){let e,n,o,s,r,c,i,d,g,h,m,w,v=t[0].total+"",x=t[0].failed+"",S=t[0].ratio+"",y=t[1]&&Pt(t);return{c(){e=f("span"),y&&y.c(),n=p("\n\n    (Total: "),o=f("span"),s=p(v),r=p(" / Wrong:\n    "),c=f("span"),i=p(x),d=p("\n    /\n    "),g=f("span"),h=p(S),m=p("%"),w=p(")"),$(o,"class","is-text-success"),$(c,"class","is-text-danger"),$(e,"class","h6")},m(t,a){u(t,e,a),y&&y.m(e,null),l(e,n),l(e,o),l(o,s),l(e,r),l(e,c),l(c,i),l(e,d),l(e,g),l(g,h),l(g,m),l(e,w)},p(t,o){t[1]?y?y.p(t,o):(y=Pt(t),y.c(),y.m(e,n)):y&&(y.d(1),y=null),1&o&&v!==(v=t[0].total+"")&&b(s,v),1&o&&x!==(x=t[0].failed+"")&&b(i,x),1&o&&S!==(S=t[0].ratio+"")&&b(h,S)},d(t){t&&a(e),y&&y.d()}}}function Pt(t){let e,n,o,s=t[0].progress+"";return{c(){e=p("Progress: "),n=f("span"),o=p(s),$(n,"class","is-text-success")},m(t,s){u(t,e,s),u(t,n,s),l(n,o)},p(t,e){1&e&&s!==(s=t[0].progress+"")&&b(o,s)},d(t){t&&a(e),t&&a(n)}}}function At(e){let n,o=0!=e[0].total&&Et(e);return{c(){o&&o.c(),n=h()},m(t,e){o&&o.m(t,e),u(t,n,e)},p(t,[e]){0!=t[0].total?o?o.p(t,e):(o=Et(t),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:t,o:t,d(t){o&&o.d(t),t&&a(n)}}}function Tt(t,e,n){let{quest:o}=e,{showProgress:s}=e;return t.$$set=t=>{"quest"in t&&n(0,o=t.quest),"showProgress"in t&&n(1,s=t.showProgress)},[o,s]}class Lt extends W{constructor(t){super(),z(this,t,Tt,At,c,{quest:0,showProgress:1})}}function Dt(t,e,n){const o=t.slice();return o[5]=e[n],o}function Ot(t){let e,n,o,s,r,c,i,d,h,m,w,v,x,S,y,_,k,C,q,M=t[5].id+"",j=t[5].quest+"",E=t[5].answer+"";return r=new Lt({props:{showProgress:!1,quest:t[5]}}),{c(){e=f("div"),n=f("div"),o=p(M),s=g(),I(r.$$.fragment),c=g(),i=f("div"),d=f("div"),h=f("p"),m=p(j),v=g(),x=f("div"),S=f("div"),y=f("p"),_=p(E),k=g(),$(n,"class","h5"),$(e,"class","is-flex-spread grid-full"),$(d,"class","content"),$(i,"class",w="card "+t[3]()),$(S,"class","content"),$(x,"class",C="card "+t[3]())},m(t,a){u(t,e,a),l(e,n),l(n,o),l(e,s),N(r,e,null),u(t,c,a),u(t,i,a),l(i,d),l(d,h),l(h,m),u(t,v,a),u(t,x,a),l(x,S),l(S,y),l(y,_),l(x,k),q=!0},p(t,e){(!q||2&e)&&M!==(M=t[5].id+"")&&b(o,M);const n={};2&e&&(n.quest=t[5]),r.$set(n),(!q||2&e)&&j!==(j=t[5].quest+"")&&b(m,j),(!q||2&e)&&E!==(E=t[5].answer+"")&&b(_,E)},i(t){q||(V(r.$$.fragment,t),q=!0)},o(t){B(r.$$.fragment,t),q=!1},d(t){t&&a(e),H(r),t&&a(c),t&&a(i),t&&a(v),t&&a(x)}}}function Vt(t){let e,n,o,s,r,c,i,h,w,v,x,S=t[0].title+"",y=t[1],_=[];for(let e=0;e<y.length;e+=1)_[e]=Ot(Dt(t,y,e));const k=t=>B(_[t],1,1,(()=>{_[t]=null}));return{c(){e=f("div"),n=f("h4"),o=p(S),s=g(),r=f("div");for(let t=0;t<_.length;t+=1)_[t].c();c=g(),i=f("div"),h=f("button"),h.textContent="Back",$(r,"class","grid grid-2"),$(h,"class","button"),$(i,"class","buttons"),$(e,"class","card card-shadow content")},m(a,d){u(a,e,d),l(e,n),l(n,o),l(e,s),l(e,r);for(let t=0;t<_.length;t+=1)_[t].m(r,null);l(e,c),l(e,i),l(i,h),w=!0,v||(x=m(h,"click",t[4]),v=!0)},p(t,[e]){if((!w||1&e)&&S!==(S=t[0].title+"")&&b(o,S),10&e){let n;for(y=t[1],n=0;n<y.length;n+=1){const o=Dt(t,y,n);_[n]?(_[n].p(o,e),V(_[n],1)):(_[n]=Ot(o),_[n].c(),V(_[n],1),_[n].m(r,null))}for(D(),n=y.length;n<_.length;n+=1)k(n);O()}},i(t){if(!w){for(let t=0;t<y.length;t+=1)V(_[t]);w=!0}},o(t){_=_.filter(Boolean);for(let t=0;t<_.length;t+=1)B(_[t]);w=!1},d(t){t&&a(e),d(_,t),v=!1,x()}}}function Bt(t,e,n){let{topic:o}=e,s=[];x((()=>{st(o).then((t=>{n(1,s=t)}))}));const r=t=>{R.setView("TopicShow",{topic:t})},c=((t,e,n)=>{let o=0;return()=>o++%(2*t)<t?e:n})(2,"is-primary","is-info");return t.$$set=t=>{"topic"in t&&n(0,o=t.topic)},[o,s,r,c,()=>r(o)]}class It extends W{constructor(t){super(),z(this,t,Bt,Vt,c,{topic:0})}}function Nt(e){let n,o,s,r,c,i,d,h,m,w,v,x,S,y,_,k,C,q,M,j,E,P,A,T,L=e[0][0]+"",D=e[0][1]+"",O=e[0][2]+"",V=e[0][3]+"";return{c(){n=f("table"),o=f("tr"),s=f("td"),s.textContent="No correct Answers",r=g(),c=f("td"),i=p(L),d=g(),h=f("tr"),m=f("td"),m.textContent="One correct Answer",w=g(),v=f("td"),x=p(D),S=g(),y=f("tr"),_=f("td"),_.textContent="Two correct Answers",k=g(),C=f("td"),q=p(O),M=g(),j=f("tr"),E=f("td"),E.textContent="Learned",P=g(),A=f("td"),T=p(V),$(n,"class","table hide-md")},m(t,e){u(t,n,e),l(n,o),l(o,s),l(o,r),l(o,c),l(c,i),l(n,d),l(n,h),l(h,m),l(h,w),l(h,v),l(v,x),l(n,S),l(n,y),l(y,_),l(y,k),l(y,C),l(C,q),l(n,M),l(n,j),l(j,E),l(j,P),l(j,A),l(A,T)},p(t,[e]){1&e&&L!==(L=t[0][0]+"")&&b(i,L),1&e&&D!==(D=t[0][1]+"")&&b(x,D),1&e&&O!==(O=t[0][2]+"")&&b(q,O),1&e&&V!==(V=t[0][3]+"")&&b(T,V)},i:t,o:t,d(t){t&&a(n)}}}function Ht(t,e,n){let{statistic:o=[0,0,0,0]}=e;return t.$$set=t=>{"statistic"in t&&n(0,o=t.statistic)},[o]}class Qt extends W{constructor(t){super(),z(this,t,Ht,Nt,c,{statistic:0})}}function zt(t){let e,n,o,r,c,i,d,h,w,v,x,S,y,_,k,C,q,M,j,E,P,A,T,L,D,O,Q,z,W,F,K,R,J,U,Y,G,X,Z,tt,et=t[0].title+"",nt=t[3].quest+"",ot=t[3].answer+"";return c=new Qt({props:{statistic:t[1]}}),S=new Lt({props:{showProgress:!0,quest:t[3]}}),{c(){e=f("div"),n=f("h4"),o=p(et),r=g(),I(c.$$.fragment),i=g(),d=f("div"),h=f("div"),w=f("div"),v=f("div"),v.textContent="Question",x=g(),I(S.$$.fragment),y=g(),_=f("div"),k=f("p"),C=p(nt),q=g(),M=f("div"),j=f("h5"),j.textContent="Answer",E=g(),P=f("div"),A=f("p"),T=p(ot),L=g(),D=f("div"),O=f("button"),Q=p("Show"),W=g(),F=f("button"),K=p("Correct"),R=g(),J=f("button"),U=p("Wrong"),Y=g(),G=f("button"),G.textContent="Stop",$(v,"class","h5"),$(w,"class","is-flex-spread block"),$(_,"class","card content is-primary"),$(P,"class","card content is-info"),M.hidden=t[2],$(d,"class","grid grid-2"),$(O,"class","button"),O.hidden=z=!t[2],$(F,"class","button is-success"),F.hidden=t[2],$(J,"class","button is-danger"),J.hidden=t[2],$(G,"class","button"),$(D,"class","buttons"),$(e,"class","card card-shadow content")},m(s,a){u(s,e,a),l(e,n),l(n,o),l(e,r),N(c,e,null),l(e,i),l(e,d),l(d,h),l(h,w),l(w,v),l(w,x),N(S,w,null),l(h,y),l(h,_),l(_,k),l(k,C),l(d,q),l(d,M),l(M,j),l(M,E),l(M,P),l(P,A),l(A,T),l(e,L),l(e,D),l(D,O),l(O,Q),l(D,W),l(D,F),l(F,K),l(D,R),l(D,J),l(J,U),l(D,Y),l(D,G),X=!0,Z||(tt=[m(O,"click",t[5]),m(F,"click",t[6]),m(J,"click",t[7]),m(G,"click",t[4])],Z=!0)},p(t,e){(!X||1&e)&&et!==(et=t[0].title+"")&&b(o,et);const n={};2&e&&(n.statistic=t[1]),c.$set(n);const s={};8&e&&(s.quest=t[3]),S.$set(s),(!X||8&e)&&nt!==(nt=t[3].quest+"")&&b(C,nt),(!X||8&e)&&ot!==(ot=t[3].answer+"")&&b(T,ot),(!X||4&e)&&(M.hidden=t[2]),(!X||4&e&&z!==(z=!t[2]))&&(O.hidden=z),(!X||4&e)&&(F.hidden=t[2]),(!X||4&e)&&(J.hidden=t[2])},i(t){X||(V(c.$$.fragment,t),V(S.$$.fragment,t),X=!0)},o(t){B(c.$$.fragment,t),B(S.$$.fragment,t),X=!1},d(t){t&&a(e),H(c),H(S),Z=!1,s(tt)}}}function Wt(t){let e,n,o=t[3]&&zt(t);return{c(){o&&o.c(),e=h()},m(t,s){o&&o.m(t,s),u(t,e,s),n=!0},p(t,[n]){t[3]?o?(o.p(t,n),8&n&&V(o,1)):(o=zt(t),o.c(),V(o,1),o.m(e.parentNode,e)):o&&(D(),B(o,1,1,(()=>{o=null})),O())},i(t){n||(V(o),n=!0)},o(t){B(o),n=!1},d(t){o&&o.d(t),t&&a(e)}}}function Ft(t,e,n){let o,s,r,c,{topic:i}=e,l=!0;const u=t=>{((t,e)=>{e?t.progress++:(t.progress=0,t.failed++),t.total++,t.ratio=et(t.failed,t.total)})(c,t),(t=>new Promise(((e,n)=>{const o=G.transaction(["questions"],"readwrite").objectStore("questions");o.put(t).onsuccess=n=>{console.log("Store:",o.name," update:",t),e()}})))(c).then((()=>{c.progress<3&&r.push(c),0===r.length&&d(),n(1,o=nt(s)),a(),n(2,l=!l)}))},a=()=>{n(3,c=r.shift()),console.log("next",c)};x((()=>{st(i).then((t=>{s=t,r=s.filter((t=>t.progress<3)),(t=>{for(let o=0;o<t.length;o++){let s=(e=0,n=t.length-1,Math.floor(Math.random()*(n-e+1)+e));if(o===s)continue;let r=t[o];t[o]=t[s],t[s]=r}var e,n})(r),n(1,o=nt(s)),a()}))}));const d=()=>{R.setView("TopicList")};return t.$$set=t=>{"topic"in t&&n(0,i=t.topic)},[i,o,l,c,d,()=>{n(2,l=!l)},()=>{u(!0)},()=>{u(!1)}]}class Kt extends W{constructor(t){super(),z(this,t,Ft,Wt,c,{topic:0})}}function Rt(t){let e,n;return e=new $t({}),{c(){I(e.$$.fragment)},m(t,o){N(e,t,o),n=!0},i(t){n||(V(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function Jt(t){let n,o,s,r,c,i,d,p,h;o=new at({});let m=0!==t[0].length&&Rt();const b=[t[1].props];var w=t[1].component;function v(t){let n={};for(let t=0;t<b.length;t+=1)n=e(n,b[t]);return{props:n}}return w&&(i=new w(v())),p=new ft({}),{c(){n=f("div"),I(o.$$.fragment),s=g(),m&&m.c(),r=g(),c=f("div"),i&&I(i.$$.fragment),d=g(),I(p.$$.fragment),$(c,"id","main"),$(c,"class","block"),$(n,"class","container")},m(t,e){u(t,n,e),N(o,n,null),l(n,s),m&&m.m(n,null),l(n,r),l(n,c),i&&N(i,c,null),l(n,d),N(p,n,null),h=!0},p(t,[e]){0!==t[0].length?m?1&e&&V(m,1):(m=Rt(),m.c(),V(m,1),m.m(n,r)):m&&(D(),B(m,1,1,(()=>{m=null})),O());const o=2&e?function(t,e){const n={},o={},s={$$scope:1};let r=t.length;for(;r--;){const c=t[r],i=e[r];if(i){for(const t in c)t in i||(o[t]=1);for(const t in i)s[t]||(n[t]=i[t],s[t]=1);t[r]=i}else for(const t in c)s[t]=1}for(const t in o)t in n||(n[t]=void 0);return n}(b,[(s=t[1].props,"object"==typeof s&&null!==s?s:{})]):{};var s;if(w!==(w=t[1].component)){if(i){D();const t=i;B(t.$$.fragment,1,0,(()=>{H(t,1)})),O()}w?(i=new w(v()),I(i.$$.fragment),V(i.$$.fragment,1),N(i,c,null)):i=null}else w&&i.$set(o)},i(t){h||(V(o.$$.fragment,t),V(m),i&&V(i.$$.fragment,t),V(p.$$.fragment,t),h=!0)},o(t){B(o.$$.fragment,t),B(m),i&&B(i.$$.fragment,t),B(p.$$.fragment,t),h=!1},d(t){t&&a(n),H(o),m&&m.d(),i&&H(i),H(p)}}}function Ut(t,e,n){let o,s;return i(t,J,(t=>n(0,o=t))),i(t,R,(t=>n(1,s=t))),x((()=>{try{(async()=>{if("serviceWorker"in navigator){const t=await navigator.serviceWorker.register("service-worker.js");console.log("Registration of serivce worker done - scope:",t.scope)}})()}catch(t){J.addError(t)}R.views={TopicList:{component:Ct},TopicShow:{component:jt},QuestList:{component:It},QuestShow:{component:Kt}},lt().then((()=>{R.setView("TopicList")}))})),[o,s]}return new class extends W{constructor(t){super(),z(this,t,Ut,Jt,c,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map

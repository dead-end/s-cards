var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function o(){return Object.create(null)}function s(t){t.forEach(n)}function r(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function l(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode&&t.parentNode.removeChild(t)}function d(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function h(){return p(" ")}function g(){return p("")}function m(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function $(t){return function(e){return e.preventDefault(),t.call(this,e)}}function b(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function w(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function v(t,e){t.value=null==e?"":e}function k(t,e,n,o){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function x(t,e){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}t.selectedIndex=-1}function _(t){const e=t.querySelector(":checked")||function(t){for(const e of t.options)if(!e.disabled)return e}(t);return e&&e.__value}function C(t,e){return new t(e)}let y;function S(t){y=t}function q(){if(!y)throw new Error("Function called outside component initialization");return y}function L(t){q().$$.on_mount.push(t)}function T(t){q().$$.after_update.push(t)}function U(){const t=q();return(e,n,{cancelable:o=!1}={})=>{const s=t.$$.callbacks[e];if(s){const r=function(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,o,e),s}(e,n,{cancelable:o});return s.slice().forEach((e=>{e.call(t,r)})),!r.defaultPrevented}return!0}}const E=[],V=[];let j=[];const H=[],M=Promise.resolve();let A=!1;function B(t){j.push(t)}const P=new Set;let N=0;function G(){if(0!==N)return;const t=y;do{try{for(;N<E.length;){const t=E[N];N++,S(t),I(t.$$)}}catch(t){throw E.length=0,N=0,t}for(S(null),E.length=0,N=0;V.length;)V.pop()();for(let t=0;t<j.length;t+=1){const e=j[t];P.has(e)||(P.add(e),e())}j.length=0}while(E.length);for(;H.length;)H.pop()();A=!1,P.clear(),S(t)}function I(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(B)}}const R=new Set;let O;function D(){O={r:0,c:[],p:O}}function z(){O.r||s(O.c),O=O.p}function F(t,e){t&&t.i&&(R.delete(t),t.i(e))}function Q(t,e,n,o){if(t&&t.o){if(R.has(t))return;R.add(t),O.c.push((()=>{R.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}else o&&o()}function J(t){t&&t.c()}function W(t,e,o,i){const{fragment:c,after_update:l}=t.$$;c&&c.m(e,o),i||B((()=>{const e=t.$$.on_mount.map(n).filter(r);t.$$.on_destroy?t.$$.on_destroy.push(...e):s(e),t.$$.on_mount=[]})),l.forEach(B)}function K(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];j.forEach((o=>-1===t.indexOf(o)?e.push(o):n.push(o))),n.forEach((t=>t())),j=e}(n.after_update),s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Y(t,e){-1===t.$$.dirty[0]&&(E.push(t),A||(A=!0,M.then(G)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function X(e,n,r,i,c,l,a,d=[-1]){const f=y;S(e);const p=e.$$={fragment:null,ctx:[],props:l,update:t,not_equal:c,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(f?f.$$.context:[])),callbacks:o(),dirty:d,skip_bound:!1,root:n.target||f.$$.root};a&&a(p.root);let h=!1;if(p.ctx=r?r(e,n.props||{},((t,n,...o)=>{const s=o.length?o[0]:n;return p.ctx&&c(p.ctx[t],p.ctx[t]=s)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](s),h&&Y(e,t)),n})):[],p.update(),h=!0,s(p.before_update),p.fragment=!!i&&i(p.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);p.fragment&&p.fragment.l(t),t.forEach(u)}else p.fragment&&p.fragment.c();n.intro&&F(e.$$.fragment),W(e,n.target,n.anchor,n.customElement),G()}S(f)}class Z{$destroy(){K(this,1),this.$destroy=t}$on(e,n){if(!r(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const tt=[];function et(e,n=t){let o;const s=new Set;function r(t){if(i(e,t)&&(e=t,o)){const t=!tt.length;for(const t of s)t[1](),tt.push(t,e);if(t){for(let t=0;t<tt.length;t+=2)tt[t][0](tt[t+1]);tt.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(i,c=t){const l=[i,c];return s.add(l),1===s.size&&(o=n(r)||t),i(e),()=>{s.delete(l),0===s.size&&o&&(o(),o=null)}}}}const nt=(()=>{const{subscribe:t,set:e}=et({component:""});return{views:{},subscribe:t,setView:(t,n)=>{const o=nt.views[t];o.props=n,e(o)}}})(),ot=(()=>{const{subscribe:t,set:e,update:n}=et([]);return{subscribe:t,addError:t=>{n((e=>(e.push(t),e)))},throwError(t){throw n((e=>(e.push(t),e))),Error(t)},resetErrors:()=>{console.log("reset"),e([])}}})();function st(t,e,n){const o=t.slice();return o[2]=e[n],o}function rt(t){let e,n,o=t[2]+"";return{c(){e=f("li"),n=p(o)},m(t,o){a(t,e,o),l(e,n)},p(t,e){1&e&&o!==(o=t[2]+"")&&w(n,o)},d(t){t&&u(e)}}}function it(e){let n,o,s,r,i,c,p,g,$,w=e[0],v=[];for(let t=0;t<w.length;t+=1)v[t]=rt(st(e,w,t));return{c(){n=f("div"),o=f("h4"),o.textContent="Errors",s=h(),r=f("ul");for(let t=0;t<v.length;t+=1)v[t].c();i=h(),c=f("div"),p=f("button"),p.textContent="Ok",b(o,"class","is-text-danger"),b(p,"class","button"),b(c,"class","is-floating"),b(n,"class","card card-shadow block content")},m(t,u){a(t,n,u),l(n,o),l(n,s),l(n,r);for(let t=0;t<v.length;t+=1)v[t]&&v[t].m(r,null);l(n,i),l(n,c),l(c,p),g||($=m(p,"click",e[1]),g=!0)},p(t,[e]){if(1&e){let n;for(w=t[0],n=0;n<w.length;n+=1){const o=st(t,w,n);v[n]?v[n].p(o,e):(v[n]=rt(o),v[n].c(),v[n].m(r,null))}for(;n<v.length;n+=1)v[n].d(1);v.length=w.length}},i:t,o:t,d(t){t&&u(n),d(v,t),g=!1,$()}}}function ct(t,e,n){let o;c(t,ot,(t=>n(0,o=t)));return[o,()=>{ot.resetErrors()}]}class lt extends Z{constructor(t){super(),X(this,t,ct,it,i,{})}}const at=t=>{ot.addError(t.type)},ut=new Promise(((t,e)=>{const n=indexedDB.open("s-card",4);n.onupgradeneeded=e=>{const o=n.result;e.oldVersion<4&&(t=>{if(t.objectStoreNames.contains("topics")||t.createObjectStore("topics",{keyPath:"file"}),!t.objectStoreNames.contains("questions")){const e=t.createObjectStore("questions",{keyPath:"id",autoIncrement:!0});e.indexNames.contains("file")||e.createIndex("file","file",{unique:!1})}t.objectStoreNames.contains("hash")||(t.createObjectStore("hash",{keyPath:"file"}).transaction.oncomplete=()=>{console.log("Upgrade completed!")}),t.objectStoreNames.contains("admin")||t.createObjectStore("admin",{keyPath:"config"}),t.objectStoreNames.contains("config")&&t.deleteObjectStore("config")})(o),t(o)},n.onerror=t=>{ot.addError(t.type),e()},n.onsuccess=()=>{const e=n.result;e.onerror=at,console.log("db init success!"),t(e)}})),dt=(t,e)=>new Promise(((n,o)=>{const s=t.delete(e);s.onsuccess=()=>{console.log("Store:",t.name,"delete:",e),n()},s.onerror=n=>{ot.addError(`Store: ${t.name} delete: ${e} error: ${n}`),o()}})),ft=(t,e)=>new Promise(((n,o)=>{const s=t.put(e);s.onsuccess=()=>{console.log("Store:",t.name,"put:",e),n()},s.onerror=n=>{ot.addError(`Store: ${t.name} put: ${e} error: ${n}`),o()}})),pt=t=>new Promise(((e,n)=>{ut.then((o=>{const s=o.transaction(["hash"],"readonly").objectStore("hash"),r=s.get(t);r.onsuccess=()=>{const n=r.result?r.result:{file:t};console.log("Store:",s.name,"get:",n),e(n)},r.onerror=e=>{console.log("Store:",s.name,"get:",t,"error",e),n()}}))})),ht=()=>new Promise(((t,e)=>{ut.then((n=>{const o=n.transaction(["hash"],"readonly").objectStore("hash"),s=o.getAll();s.onsuccess=()=>{const e=s.result;console.log("Store:",o.name,"get all:",e.length),t(e)},s.onerror=t=>{console.log("Store:",o.name,"get all error:",t),e()}}))})),gt=(t,e)=>{const n=t.objectStore("hash");return dt(n,e)},mt=async t=>{const e=(await ut).transaction(["hash"],"readwrite").objectStore("hash");return dt(e,t)},$t=t=>{if(!t)return"";const e=t.getDate()>9?t.getDate():"0"+t.getDate(),n=t.getMonth()+1,o=n>9?n:"0"+n,s=t.getHours()>9?t.getHours():"0"+t.getHours(),r=t.getMinutes()>9?t.getMinutes():"0"+t.getMinutes();return`${e}.${o}.${t.getFullYear()} ${s}:${r}`},bt=(t,e)=>{const n=e||[];return(t||[]).toString()===n.toString()},wt=(t,e)=>{for(const n in t)if(t[n]!==e)return!1;return!0},vt=(t,e)=>{let n=0;for(let e=0;e<t.length;e++)n+=t[e];return kt(n,t.length*e)},kt=(t,e)=>{if(!e)return 0;const n=100*t/e;return Math.round(n)},xt=(t,e)=>Math.floor(Math.random()*(e-t+1)+t),_t=t=>{for(let e=0;e<t.length;e++){const n=xt(0,t.length-1);if(e===n)continue;const o=t[e];t[e]=t[n],t[n]=o}},Ct=(t,e,n)=>{let o=0;return()=>o++%(2*t)<t?e:n};function yt(t){return t instanceof Error?t.message:String(t)}const St=()=>new Promise((t=>{ut.then((e=>{const n=e.transaction(["admin"],"readonly").objectStore("admin").get("admin");n.onsuccess=()=>{let e=n.result;e||(e={config:"admin",langUrl:"https://api.github.com/repos/dead-end/cards-russian/contents/",linkUrl:"https://github.com/dead-end/cards-russian/blob/master/",backupUrl:"",file:"",token:""}),t(e)}}))})),qt=async t=>{const e=(await ut).transaction(["admin"],"readwrite").objectStore("admin");t.langUrl=Lt(t.langUrl),t.linkUrl=Lt(t.linkUrl),ft(e,t)},Lt=t=>t.endsWith("/")?t:t+"/",Tt=t=>{try{return JSON.parse((e=t,decodeURIComponent(escape(window.atob(e)))))}catch(t){ot.addError(`githubParseContent - unable to parse json content: ${t}`)}var e},Ut=t=>{const e={Accept:"application/vnd.github.v3+json"};return t&&t.token&&(e.authorization=`token ${t.token}`),e},Et=async()=>{const t=await St();return{backupUrl:t.backupUrl+t.file+".json",headers:Ut(t)}},Vt=async(t,e)=>{const n=await fetch(t,{method:"HEAD",headers:e}).catch((e=>{ot.addError(`githubGetEtag - url: ${t} error: ${e}`)}));if(!n||404===n.status)return;if(!n.ok)return void ot.addError(`githubGetEtag - url: ${t} error: ${n.statusText}`);const o=n.headers.get("ETag");if(!o)return;const s=o.startsWith("W/")?3:1;return o.substring(s,o.length-1)},jt=async(t,e)=>{const n=await fetch(t,e).catch((e=>{ot.addError(`githubGetJsonContent - url: ${t} error: ${e}`)}));if(n){if(n.ok)return n.json();ot.addError(`githubGetJsonContent - url: ${t} error: ${n.statusText}`)}},Ht=async t=>{const{fileUrl:e,headers:n}=await(async t=>{const e=await St();return{fileUrl:e.langUrl+t,headers:Ut(e)}})(t);let o=await pt(t);if(o.value){const t=await(async(t,e,n)=>{const o=await Vt(t,e);if(!o)return!1;const s=o===n;return console.log("url :",t,"ETag",o,"hash",n,"matches",s),s})(e,n,o.value);if(t)return}const s=await jt(e,n);if(!s)return;const r=Tt(s.content);return r?(o.value=s.sha,o.lastLoaded=new Date,await(t=>new Promise(((e,n)=>{ut.then((o=>{const s=o.transaction(["hash"],"readwrite").objectStore("hash"),r=s.put(t);r.onsuccess=()=>{console.log("Store:",s.name,"put:",t),e()},r.onerror=e=>{console.log("Store:",s.name,"put:",t,"error",e),n()}}))})))(o),console.log("githubGetJson",r),r):void 0},Mt=async t=>{const{backupUrl:e,headers:n}=await Et(),o=await Vt(e,n);console.log("sha",o);const s={method:"PUT",headers:n,body:JSON.stringify({sha:o,content:(r=JSON.stringify(t),window.btoa(unescape(encodeURIComponent(r)))),message:"backup"})};var r;const i=await fetch(e,s).catch((t=>{ot.addError(`githubBackup - url: ${e} error: ${t}`)}));i&&(i.ok||ot.addError(`githubBackup - url: ${e} error: ${i.statusText}`))},At=async()=>{const{backupUrl:t,headers:e}=await Et(),n=await jt(t,e);if(n)return Tt(n.content)};class Bt{constructor(t,e){this.count=0,this.md=t,this.tag=e}getTag(){return++this.count%2?`<${this.tag}>`:`</${this.tag}>`}check(t){this.count%2&&ot.addError(`Unbalanced tag: ${this.md} count: ${this.count} data: ${t}`),this.count=0}}class Pt{constructor(){this.map={},this._register("_","u"),this._register("*","b"),this._register("~","i"),this.regex=this._pattern()}_register(t,e){this.map[t]=new Bt(t,e)}_pattern(){let t="";for(const e in this.map)t+=e;return new RegExp(`[${t}]`,"g")}tag(t){return t in this.map||ot.throwError(`Unknown element: ${t}`),this.map[t].getTag()}_check(t){for(const e in this.map)this.map[e].check(t)}_substitute(t){return t.replaceAll(this.regex,(t=>this.tag(t)))}toHtml(t){Array.isArray(t)||(t=[t]);let e=!1,n="";for(const o of t)o.startsWith("- ")?(e||(n+="<ul>",e=!0),n+="<li>"+this._substitute(o.substring(2).trim())+"</li>"):(e?(n+="</ul>",e=!1):""!==n&&(n+="<br />"),n+=this._substitute(o.trim()));return e&&(n+="</ul>"),this._check(t),n}static remove(t){return t.replace(/[_*~]/g,"")}}const Nt=t=>{const e=[0,0,0,0];return t.forEach((t=>{e[t.progress]++})),e},Gt=(t,e)=>{e?t.progress++:(t.progress=0,t.failed++),t.total++,t.ratio=kt(t.failed,t.total)},It=(t,e)=>((t,e,n,o)=>new Promise((s=>{const r=t.objectStore(e),i=r.index(n).getAllKeys(o);i.onsuccess=()=>{i.result.forEach((t=>{dt(r,t)})),s()}})))(t,"questions","file",e),Rt=t=>new Promise((e=>{ut.then((n=>{const o=n.transaction(["questions"],"readwrite").objectStore("questions");o.put(t).onsuccess=()=>{console.log("Store:",o.name," update:",t),e()}}))})),Ot=async t=>{const e=(await ut).transaction(["questions"],"readonly").objectStore("questions");return Dt(e,t)},Dt=(t,e)=>new Promise((n=>{const o=t.index("file").getAll(e.file);o.onsuccess=()=>{n(o.result)}})),zt=async(t,e)=>{const n=(await ut).transaction(["questions"],"readwrite").objectStore("questions"),o=t.map((t=>(t.progress=e,new Promise((e=>{n.put(t).onsuccess=()=>{e()}})))));await Promise.all(o)},Ft=async(t,e,n)=>{const o=(await ut).transaction(["questions"],"readonly").objectStore("questions"),s=[];return t.forEach((t=>{s.push(Dt(o,t))})),Promise.all(s).then((t=>{let o=[].concat(...t);if(_t(o),o.sort(((t,e)=>e.ratio-t.ratio)),e<=0)return o;const s=Math.round(o.length*n);return console.log("max:",e,"part:",s,"fraction:",n),s>e&&(o=o.splice(0,s),_t(o)),o.splice(0,e)}))},Qt=(t,e,n)=>{const o=t.objectStore("questions"),s=o.index("file").getAll(e);s.onsuccess=()=>{const t=Xt(n),r=Xt(s.result);r.forEach((e=>{t.has(e.id)||dt(o,e.id)})),t.forEach((t=>{const n=r.get(t.id);n?(((t,e)=>{if(t.id!==e.id)throw Error(`Unable to copy question parts: ${t.id} - ${e.id}`);e.file=t.file,e.total=t.total,e.failed=t.failed,e.ratio=t.ratio,e.progress=t.progress})(n,t),ft(o,t)):(((t,e)=>{t.file=e,t.total=0,t.failed=0,t.ratio=0,t.progress=0})(t,e),((t,e)=>{new Promise(((n,o)=>{const s=t.add(e);s.onsuccess=()=>{console.log("Store:",t.name,"add:",e),n()},s.onerror=n=>{ot.addError(`Store: ${t.name} add: ${e} error: ${n}`),o()}}))})(o,t))}))}},Jt=()=>new Promise(((t,e)=>{const n=[];ut.then((o=>{const s=o.transaction(["questions"],"readonly").objectStore("questions"),r=s.openCursor();r.onsuccess=()=>{const e=r.result;if(e){const t=e.value;n.push([t.id,t.failed,t.total]),e.continue()}else console.log("Store:",s.name,"questGetBackup finished:",n.length),t(n)},r.onerror=t=>{console.log("Store:",s.name,"questGetBackup:",t),e()}}))})),Wt=async t=>{const e=(await ut).transaction(["questions"],"readwrite").objectStore("questions");t.forEach((t=>{const[n,o,s]=[...t];((t,e)=>new Promise(((n,o)=>{const s=t.get(e);s.onsuccess=()=>{n(s.result)},s.onerror=e=>{console.log("Store:",t.name,"questGet:",e),o()}})))(e,n).then((t=>{t&&t.total<s&&(t.failed=o,t.total=s,t.ratio=kt(t.failed,t.total),ft(e,t))}))}))},Kt=async t=>{const e=await Ht(t);if(e){const n=(await ut).transaction(["questions"],"readwrite");Qt(n,t,e)}},Yt=async t=>{const e=[];return t.forEach((t=>{e.push(Kt(t))})),Promise.all(e)},Xt=t=>{const e=new Map;return t.forEach((t=>{e.set(t.id,t)})),e},Zt=(t,e)=>{for(let n of t)if(Pt.remove(n).toLowerCase().includes(e))return!0;return!1},te=(t,e)=>{const n=t.toLowerCase();return new Promise(((t,o)=>{const s=[];let r=0,i=0;ut.then((c=>{const l=c.transaction(["questions"],"readonly").objectStore("questions"),a=l.openCursor();a.onsuccess=()=>{const o=a.result;if(o){const t=o.value;(Zt(t.quest,n)||Zt(t.answer,n))&&(s.length<e&&s.push(t),i++),r++,o.continue()}else console.log("Store:",l.name,"questSearch finished:",s.length),t([s,r,i])},a.onerror=t=>{console.log("Store:",l.name,"questSearch:",t),o()}}))}))},ee=t=>{const e=[];return t.forEach((t=>{t.tags.forEach((t=>{e.includes(t)||e.push(t)}))})),e.sort()},ne=()=>new Promise(((t,e)=>{ut.then((n=>{const o=n.transaction(["topics"],"readonly").objectStore("topics"),s=o.getAll();s.onsuccess=()=>{console.log("Store:",o.name,"topicGetAll:"),t(s.result)},s.onerror=t=>{console.log("Store:",o.name,"topicGetAll error:",t),e()}}))})),oe=async t=>{const e=(await ut).transaction(["topics"],"readwrite").objectStore("topics");ft(e,t)},se=(t,e)=>{const n=t.objectStore("topics");dt(n,e)},re=async t=>{const e=(await ut).transaction(["topics","questions","hash"],"readwrite"),n=e.objectStore("topics"),o=n.getAll();o.onsuccess=()=>{const s=ie(o.result),r=t.map((t=>t.file));for(const t of s.keys())r.includes(t)||(se(e,t),gt(e,t),It(e,t));t.forEach((t=>{((t,e)=>!e||(e.lastLearned&&(t.lastLearned=e.lastLearned),t.title!==e.title||t.desc!==e.desc||!bt(t.tags,e.tags)||!bt(t.details,e.details)))(t,s.get(t.file))&&ft(n,t)}))}},ie=t=>{const e=new Map;return t.forEach((t=>{e.set(t.file,t)})),e};function ce(t){let e,n,o,s,r,i,c,d,m,$,b,v,k,x,_=t[4]&&le(t);return{c(){e=f("tr"),n=f("td"),n.textContent="Questions",o=h(),s=f("td"),r=p(t[2]),i=h(),c=f("tr"),d=f("td"),d.textContent="Status",m=h(),$=f("td"),b=p(t[1]),v=p("%"),k=h(),_&&_.c(),x=g()},m(t,u){a(t,e,u),l(e,n),l(e,o),l(e,s),l(s,r),a(t,i,u),a(t,c,u),l(c,d),l(c,m),l(c,$),l($,b),l($,v),a(t,k,u),_&&_.m(t,u),a(t,x,u)},p(t,e){4&e&&w(r,t[2]),2&e&&w(b,t[1]),t[4]?_?_.p(t,e):(_=le(t),_.c(),_.m(x.parentNode,x)):_&&(_.d(1),_=null)},d(t){t&&u(e),t&&u(i),t&&u(c),t&&u(k),_&&_.d(t),t&&u(x)}}}function le(t){let e,n,o,s,r,i,c,d,g,m,$,b=$t(t[4].lastLoaded)+"",v=(t[4].value?t[4].value:"")+"";return{c(){e=f("tr"),n=f("td"),n.textContent="Last loaded",o=h(),s=f("td"),r=p(b),i=h(),c=f("tr"),d=f("td"),d.textContent="Hash",g=h(),m=f("td"),$=p(v)},m(t,u){a(t,e,u),l(e,n),l(e,o),l(e,s),l(s,r),a(t,i,u),a(t,c,u),l(c,d),l(c,g),l(c,m),l(m,$)},p(t,e){16&e&&b!==(b=$t(t[4].lastLoaded)+"")&&w(r,b),16&e&&v!==(v=(t[4].value?t[4].value:"")+"")&&w($,v)},d(t){t&&u(e),t&&u(i),t&&u(c)}}}function ae(t){let e,n,o=t[0].desc+"";return{c(){e=f("p"),n=p(o)},m(t,o){a(t,e,o),l(e,n)},p(t,e){1&e&&o!==(o=t[0].desc+"")&&w(n,o)},d(t){t&&u(e)}}}function ue(e){let n,o,s,r,i,c,d,m,$,b,v,k,x,_,C,y,S,q,L=e[0].title+"",T=$t(e[0].lastLearned)+"",U=e[0].tags.join(", ")+"",E=e[3]&&ce(e),V=e[0].desc&&ae(e);return{c(){n=f("h4"),o=p(L),s=h(),r=f("table"),i=f("tr"),c=f("td"),c.textContent="Last learned",d=h(),m=f("td"),$=p(T),b=h(),v=f("tr"),k=f("td"),k.textContent="Tags",x=h(),_=f("td"),C=p(U),y=h(),E&&E.c(),S=h(),V&&V.c(),q=g()},m(t,e){a(t,n,e),l(n,o),a(t,s,e),a(t,r,e),l(r,i),l(i,c),l(i,d),l(i,m),l(m,$),l(r,b),l(r,v),l(v,k),l(v,x),l(v,_),l(_,C),l(r,y),E&&E.m(r,null),a(t,S,e),V&&V.m(t,e),a(t,q,e)},p(t,[e]){1&e&&L!==(L=t[0].title+"")&&w(o,L),1&e&&T!==(T=$t(t[0].lastLearned)+"")&&w($,T),1&e&&U!==(U=t[0].tags.join(", ")+"")&&w(C,U),t[3]?E?E.p(t,e):(E=ce(t),E.c(),E.m(r,null)):E&&(E.d(1),E=null),t[0].desc?V?V.p(t,e):(V=ae(t),V.c(),V.m(q.parentNode,q)):V&&(V.d(1),V=null)},i:t,o:t,d(t){t&&u(n),t&&u(s),t&&u(r),E&&E.d(),t&&u(S),V&&V.d(t),t&&u(q)}}}function de(t,e,n){let o,{topic:s}=e,{status:r=0}=e,{size:i=0}=e,{details:c=!0}=e;return L((async()=>{c&&n(4,o=await pt(s.file))})),t.$$set=t=>{"topic"in t&&n(0,s=t.topic),"status"in t&&n(1,r=t.status),"size"in t&&n(2,i=t.size),"details"in t&&n(3,c=t.details)},[s,r,i,c,o]}(async()=>{const t=await Ht("data/topics.json");t&&re(t)})();class fe extends Z{constructor(t){super(),X(this,t,de,ue,i,{topic:0,status:1,size:2,details:3})}}function pe(t){let e,n,o,s,r,i,c,d,p;return n=new fe({props:{topic:t[0],details:!1}}),{c(){e=f("div"),J(n.$$.fragment),o=h(),s=f("div"),r=f("button"),r.textContent="Show",b(r,"class","button"),b(s,"class","is-floating"),b(e,"class","card card-shadow content"),b(e,"id",i=t[0].file)},m(i,u){a(i,e,u),W(n,e,null),l(e,o),l(e,s),l(s,r),c=!0,d||(p=m(r,"click",t[2]),d=!0)},p(t,[o]){const s={};1&o&&(s.topic=t[0]),n.$set(s),(!c||1&o&&i!==(i=t[0].file))&&b(e,"id",i)},i(t){c||(F(n.$$.fragment,t),c=!0)},o(t){Q(n.$$.fragment,t),c=!1},d(t){t&&u(e),K(n),d=!1,p()}}}function he(t,e,n){let{topic:o}=e;const s=t=>{nt.setView("ViewTopicInfo",{topic:t})};return t.$$set=t=>{"topic"in t&&n(0,o=t.topic)},[o,s,()=>s(o)]}class ge extends Z{constructor(t){super(),X(this,t,he,pe,i,{topic:0})}}function me(e){let n,o,s;return{c(){n=f("button"),n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg>',b(n,"class","icon reset-button")},m(t,i){a(t,n,i),o||(s=m(n,"click",(function(){r(e[0])&&e[0].apply(this,arguments)})),o=!0)},p(t,[n]){e=t},i:t,o:t,d(t){t&&u(n),o=!1,s()}}}function $e(t,e,n){let{onClick:o}=e;return t.$$set=t=>{"onClick"in t&&n(0,o=t.onClick)},[o]}class be extends Z{constructor(t){super(),X(this,t,$e,me,i,{onClick:0})}}function we(e){let n,o,s;return{c(){n=f("button"),n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>',b(n,"class","icon reset-button")},m(t,i){a(t,n,i),o||(s=m(n,"click",(function(){r(e[0])&&e[0].apply(this,arguments)})),o=!0)},p(t,[n]){e=t},i:t,o:t,d(t){t&&u(n),o=!1,s()}}}function ve(t,e,n){let{onClick:o}=e;return t.$$set=t=>{"onClick"in t&&n(0,o=t.onClick)},[o]}class ke extends Z{constructor(t){super(),X(this,t,ve,we,i,{onClick:0})}}function xe(e){let n,o,s;return{c(){n=f("button"),n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M5.25 8.25h15m-16.5 7.5h15m-1.8-13.5l-3.9 19.5m-2.1-19.5l-3.9 19.5"></path></svg>',b(n,"class","icon reset-button")},m(t,i){a(t,n,i),o||(s=m(n,"click",(function(){r(e[0])&&e[0].apply(this,arguments)})),o=!0)},p(t,[n]){e=t},i:t,o:t,d(t){t&&u(n),o=!1,s()}}}function _e(t,e,n){let{onClick:o}=e;return t.$$set=t=>{"onClick"in t&&n(0,o=t.onClick)},[o]}class Ce extends Z{constructor(t){super(),X(this,t,_e,xe,i,{onClick:0})}}function ye(e){let n,o,s;return{c(){n=f("button"),n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 21l5.25-11.25L21 21m-9-3h7.5M3 5.621a48.474 48.474 0 016-.371m0 0c1.12 0 2.233.038 3.334.114M9 5.25V3m3.334 2.364C11.176 10.658 7.69 15.08 3 17.502m9.334-12.138c.896.061 1.785.147 2.666.257m-4.589 8.495a18.023 18.023 0 01-3.827-5.802"></path></svg>',b(n,"class","icon reset-button")},m(t,i){a(t,n,i),o||(s=m(n,"click",(function(){r(e[0])&&e[0].apply(this,arguments)})),o=!0)},p(t,[n]){e=t},i:t,o:t,d(t){t&&u(n),o=!1,s()}}}function Se(t,e,n){let{onClick:o}=e;return t.$$set=t=>{"onClick"in t&&n(0,o=t.onClick)},[o]}class qe extends Z{constructor(t){super(),X(this,t,Se,ye,i,{onClick:0})}}function Le(t,e,n){const o=t.slice();return o[14]=e[n],o}function Te(t,e,n){const o=t.slice();return o[17]=e[n],o}function Ue(t){let e,n,o,r,i,c,p,g,$,w,v,k,_,C,y,S,q,L,T,U,E,V,j,H=t[1],M=[];for(let e=0;e<H.length;e+=1)M[e]=Ee(Te(t,H,e));let A=t[2]&&Ve(t);return C=new qe({props:{onClick:t[9]}}),S=new Ce({props:{onClick:t[10]}}),L=new ke({props:{onClick:t[11]}}),U=new be({props:{onClick:t[12]}}),{c(){e=f("div"),n=f("label"),n.textContent="Sort",o=h(),r=f("select"),i=f("option"),i.textContent="-- Select --",c=f("option"),c.textContent="Last learned",p=h(),g=f("label"),g.textContent="Tag Filter",$=h(),w=f("select"),v=f("option"),v.textContent="-- Select --";for(let t=0;t<M.length;t+=1)M[t].c();k=h(),A&&A.c(),_=h(),J(C.$$.fragment),y=h(),J(S.$$.fragment),q=h(),J(L.$$.fragment),T=h(),J(U.$$.fragment),b(n,"class","is-valign-center"),b(n,"for","sort-select"),i.__value="",i.value=i.__value,c.__value="time",c.value=c.__value,b(r,"id","sort-select"),void 0===t[3]&&B((()=>t[6].call(r))),b(g,"for","tag-select"),v.__value="",v.value=v.__value,b(w,"id","tag-select"),void 0===t[2]&&B((()=>t[7].call(w))),b(e,"class","is-floating")},m(s,u){a(s,e,u),l(e,n),l(e,o),l(e,r),l(r,i),l(r,c),x(r,t[3]),l(e,p),l(e,g),l(e,$),l(e,w),l(w,v);for(let t=0;t<M.length;t+=1)M[t]&&M[t].m(w,null);x(w,t[2]),l(e,k),A&&A.m(e,null),l(e,_),W(C,e,null),l(e,y),W(S,e,null),l(e,q),W(L,e,null),l(e,T),W(U,e,null),E=!0,V||(j=[m(r,"change",t[6]),m(r,"change",t[4]),m(w,"change",t[7]),m(w,"change",t[4])],V=!0)},p(t,n){if(8&n&&x(r,t[3]),2&n){let e;for(H=t[1],e=0;e<H.length;e+=1){const o=Te(t,H,e);M[e]?M[e].p(o,n):(M[e]=Ee(o),M[e].c(),M[e].m(w,null))}for(;e<M.length;e+=1)M[e].d(1);M.length=H.length}6&n&&x(w,t[2]),t[2]?A?A.p(t,n):(A=Ve(t),A.c(),A.m(e,_)):A&&(A.d(1),A=null)},i(t){E||(F(C.$$.fragment,t),F(S.$$.fragment,t),F(L.$$.fragment,t),F(U.$$.fragment,t),E=!0)},o(t){Q(C.$$.fragment,t),Q(S.$$.fragment,t),Q(L.$$.fragment,t),Q(U.$$.fragment,t),E=!1},d(t){t&&u(e),d(M,t),A&&A.d(),K(C),K(S),K(L),K(U),V=!1,s(j)}}}function Ee(t){let e,n,o,s=t[17]+"";return{c(){e=f("option"),n=p(s),e.__value=o=t[17],e.value=e.__value},m(t,o){a(t,e,o),l(e,n)},p(t,r){2&r&&s!==(s=t[17]+"")&&w(n,s),2&r&&o!==(o=t[17])&&(e.__value=o,e.value=e.__value)},d(t){t&&u(e)}}}function Ve(e){let n,o,s;return{c(){n=f("button"),n.textContent="Show",b(n,"class","button")},m(t,r){a(t,n,r),o||(s=m(n,"click",e[8]),o=!0)},p:t,d(t){t&&u(n),o=!1,s()}}}function je(t){let e,n;return e=new ge({props:{topic:t[14]}}),{c(){J(e.$$.fragment)},m(t,o){W(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.topic=t[14]),e.$set(o)},i(t){n||(F(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){K(e,t)}}}function He(t){let e,n,o,s=t[1]&&Ue(t),r=t[0],i=[];for(let e=0;e<r.length;e+=1)i[e]=je(Le(t,r,e));const c=t=>Q(i[t],1,1,(()=>{i[t]=null}));return{c(){s&&s.c(),e=h(),n=f("div");for(let t=0;t<i.length;t+=1)i[t].c();b(n,"class","grid grid-4")},m(t,r){s&&s.m(t,r),a(t,e,r),a(t,n,r);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(n,null);o=!0},p(t,[o]){if(t[1]?s?(s.p(t,o),2&o&&F(s,1)):(s=Ue(t),s.c(),F(s,1),s.m(e.parentNode,e)):s&&(D(),Q(s,1,1,(()=>{s=null})),z()),1&o){let e;for(r=t[0],e=0;e<r.length;e+=1){const s=Le(t,r,e);i[e]?(i[e].p(s,o),F(i[e],1)):(i[e]=je(s),i[e].c(),F(i[e],1),i[e].m(n,null))}for(D(),e=r.length;e<i.length;e+=1)c(e);z()}},i(t){if(!o){F(s);for(let t=0;t<r.length;t+=1)F(i[t]);o=!0}},o(t){Q(s),i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)Q(i[t]);o=!1},d(t){s&&s.d(t),t&&u(e),t&&u(n),d(i,t)}}}function Me(t,e,n){let o,s,r,{id:i}=e,c=[],l=[];L((()=>{ne().then((t=>(t.sort(((t,e)=>+(t.title>e.title)||-(t.title<e.title))),t))).then((t=>{c=t,n(0,l=t),n(1,o=ee(c))}))})),T((()=>{if(i){const t=document.getElementById(i);t&&t.scrollIntoView()}}));return t.$$set=t=>{"id"in t&&n(5,i=t.id)},[l,o,s,r,()=>{let t;t=s?c.filter((t=>t.tags.includes(s))):[...c],console.log("sort",r),r&&"time"===r&&(console.log("sorting"),t.sort(((t,e)=>{const n=t.lastLearned?t.lastLearned.getTime():0;return(e.lastLearned?e.lastLearned.getTime():0)-n}))),n(0,l=t)},i,function(){r=_(this),n(3,r)},function(){s=_(this),n(2,s),n(1,o)},()=>nt.setView("ViewTagInfo",{tag:s,topics:l}),()=>nt.setView("ViewTranslate"),()=>nt.setView("ViewHashes"),()=>nt.setView("ViewAdmin"),()=>nt.setView("ViewSearch")]}class Ae extends Z{constructor(t){super(),X(this,t,Me,He,i,{id:5})}}function Be(t){let e,n,o,s,r,i=t[4].toHtml(t[0].details)+"";return{c(){e=f("div"),n=f("h5"),n.textContent="Details",o=h(),s=f("div"),r=f("p"),b(s,"class","card content is-info"),b(e,"class","block")},m(t,c){a(t,e,c),l(e,n),l(e,o),l(e,s),l(s,r),r.innerHTML=i},p(t,e){1&e&&i!==(i=t[4].toHtml(t[0].details)+"")&&(r.innerHTML=i)},d(t){t&&u(e)}}}function Pe(t){let e,n,o,r,i,c,d,g,$,w,v,k,x,_,C,y,S,q,L,T,U,E,V,j,H,M;r=new fe({props:{topic:t[0],status:t[1],size:t[3]}});let A=t[0].details&&Be(t);return{c(){e=f("div"),n=f("div"),o=f("div"),J(r.$$.fragment),i=h(),c=f("div"),d=f("label"),d.textContent="Number of correct answers",g=h(),$=f("select"),w=f("option"),w.textContent="-- Select --",v=f("option"),v.textContent="Set 0",k=f("option"),k.textContent="Set 1",x=f("option"),x.textContent="Set 2",_=f("option"),_.textContent="Set 3",C=h(),A&&A.c(),y=h(),S=f("div"),q=f("button"),q.textContent="Back",L=h(),T=f("button"),T.textContent="Listing",U=h(),E=f("button"),V=p("Start"),b(o,"class","is-text-left"),b(d,"for","sf-set"),w.__value="",w.value=w.__value,v.__value="0",v.value=v.__value,k.__value="1",k.value=k.__value,x.__value="2",x.value=x.__value,_.__value="3",_.value=_.__value,b($,"id","sf-set"),b(c,"class","is-floating"),b(q,"class","button"),b(T,"class","button"),b(E,"class","button"),E.disabled=t[2],b(S,"class","is-floating"),b(e,"class","card card-shadow content")},m(s,u){a(s,e,u),l(e,n),l(n,o),W(r,o,null),l(n,i),l(n,c),l(c,d),l(c,g),l(c,$),l($,w),l($,v),l($,k),l($,x),l($,_),l(n,C),A&&A.m(n,null),l(e,y),l(e,S),l(S,q),l(S,L),l(S,T),l(S,U),l(S,E),l(E,V),j=!0,H||(M=[m($,"change",t[8]),m(q,"click",t[5]),m(T,"click",t[6]),m(E,"click",t[7])],H=!0)},p(t,[e]){const o={};1&e&&(o.topic=t[0]),2&e&&(o.status=t[1]),8&e&&(o.size=t[3]),r.$set(o),t[0].details?A?A.p(t,e):(A=Be(t),A.c(),A.m(n,null)):A&&(A.d(1),A=null),(!j||4&e)&&(E.disabled=t[2])},i(t){j||(F(r.$$.fragment,t),j=!0)},o(t){Q(r.$$.fragment,t),j=!1},d(t){t&&u(e),K(r),A&&A.d(),H=!1,s(M)}}}function Ne(t,e,n){let{topic:o}=e,{questions:s}=e;const r=new Pt;let i=0,c=!0,l=0;const a=()=>{if(!s)return;const t=s.map((t=>t.progress));n(1,i=vt(t,3)),n(2,c=wt(t,3)),n(3,l=t.length)};L((async()=>{try{s||(await Kt(o.file),console.log("Loading questions for topics"),n(9,s=await Ot(o)),a())}catch(t){ot.addError("ViewTopicInfo: "+yt(t))}}));return t.$$set=t=>{"topic"in t&&n(0,o=t.topic),"questions"in t&&n(9,s=t.questions)},[o,i,c,l,r,()=>{nt.setView("ViewTopicList",{id:o.file})},()=>{nt.setView("ViewTopicQuests",{topic:o})},()=>{nt.setView("ViewQuestAnswer",{topics:[o],questions:s})},async t=>{if(!s)return;const e=t.target;await zt(s,e.selectedIndex-1),e.selectedIndex=0,a()},s]}class Ge extends Z{constructor(t){super(),X(this,t,Ne,Pe,i,{topic:0,questions:9})}}function Ie(e){let n,o,s,r,i,c,d,g,m,$,v,k,x,_,C,y=e[0].progress+"",S=e[0].total+"",q=e[0].ratio+"";return{c(){n=f("div"),o=p("Progress: "),s=f("span"),r=p(y),i=p(" /\n  "),c=f("span"),c.textContent="3",d=h(),g=f("span"),m=p("Total: "),$=f("span"),v=p(S),k=p(" Wrong:\n    "),x=f("span"),_=p(q),C=p("%"),b(s,"class","is-text-success"),b(c,"class","is-text-success"),b($,"class","is-text-success"),b(x,"class","is-text-danger"),b(g,"class","hide-sm"),b(n,"class","h6")},m(t,e){a(t,n,e),l(n,o),l(n,s),l(s,r),l(n,i),l(n,c),l(n,d),l(n,g),l(g,m),l(g,$),l($,v),l(g,k),l(g,x),l(x,_),l(x,C)},p(t,[e]){1&e&&y!==(y=t[0].progress+"")&&w(r,y),1&e&&S!==(S=t[0].total+"")&&w(v,S),1&e&&q!==(q=t[0].ratio+"")&&w(_,q)},i:t,o:t,d(t){t&&u(n)}}}function Re(t,e,n){let{question:o}=e;return t.$$set=t=>{"question"in t&&n(0,o=t.question)},[o]}class Oe extends Z{constructor(t){super(),X(this,t,Re,Ie,i,{question:0})}}function De(t,e,n){const o=t.slice();return o[10]=e[n],o}function ze(t){let e,n,o,s,r,i,c,d,g,m,$,v,k,x=t[10].id+"",_=t[10].file+"";return v=new Oe({props:{question:t[10]}}),{c(){e=f("div"),n=f("div"),o=f("span"),s=p("Id: "),r=p(x),i=h(),c=f("span"),d=f("a"),g=p(_),$=h(),J(v.$$.fragment),b(o,"class","h6"),b(d,"href",m=t[3].linkUrl+t[10].file),b(d,"target","_blank"),b(c,"class","hide-sm"),b(e,"class","is-flex-spread grid-full")},m(t,u){a(t,e,u),l(e,n),l(n,o),l(o,s),l(o,r),l(n,i),l(n,c),l(c,d),l(d,g),l(e,$),W(v,e,null),k=!0},p(t,e){(!k||2&e)&&x!==(x=t[10].id+"")&&w(r,x),(!k||2&e)&&_!==(_=t[10].file+"")&&w(g,_),(!k||10&e&&m!==(m=t[3].linkUrl+t[10].file))&&b(d,"href",m);const n={};2&e&&(n.question=t[10]),v.$set(n)},i(t){k||(F(v.$$.fragment,t),k=!0)},o(t){Q(v.$$.fragment,t),k=!1},d(t){t&&u(e),K(v)}}}function Fe(t){let e,n,o,s,r,i,c,d,p,g,m=t[4].toHtml(t[10].quest)+"",$=t[4].toHtml(t[10].answer)+"",w=t[0]&&ze(t);return{c(){w&&w.c(),e=h(),n=f("div"),o=f("div"),s=f("p"),r=h(),i=f("div"),c=f("div"),d=f("p"),p=h(),b(o,"class","content"),b(n,"class","card "+t[6]()),b(c,"class","content"),b(i,"class","card "+t[6]())},m(t,u){w&&w.m(t,u),a(t,e,u),a(t,n,u),l(n,o),l(o,s),s.innerHTML=m,a(t,r,u),a(t,i,u),l(i,c),l(c,d),d.innerHTML=$,l(i,p),g=!0},p(t,n){t[0]?w?(w.p(t,n),1&n&&F(w,1)):(w=ze(t),w.c(),F(w,1),w.m(e.parentNode,e)):w&&(D(),Q(w,1,1,(()=>{w=null})),z()),(!g||2&n)&&m!==(m=t[4].toHtml(t[10].quest)+"")&&(s.innerHTML=m),(!g||2&n)&&$!==($=t[4].toHtml(t[10].answer)+"")&&(d.innerHTML=$)},i(t){g||(F(w),g=!0)},o(t){Q(w),g=!1},d(t){w&&w.d(t),t&&u(e),t&&u(n),t&&u(r),t&&u(i)}}}function Qe(t){let e,n,o,r,i,c,p,g,$,w,v,k,_,C,y,S,q=t[1],L=[];for(let e=0;e<q.length;e+=1)L[e]=Fe(De(t,q,e));const T=t=>Q(L[t],1,1,(()=>{L[t]=null}));return{c(){e=f("div"),n=f("label"),n.textContent="Details",o=h(),r=f("input"),i=h(),c=f("label"),c.textContent="Tag Filter",p=h(),g=f("select"),$=f("option"),$.textContent="-- Select --",w=f("option"),w.textContent="Total",v=f("option"),v.textContent="Ratio",k=h(),_=f("div");for(let t=0;t<L.length;t+=1)L[t].c();b(n,"for","details-checkbox"),b(r,"type","checkbox"),b(r,"id","details-checkbox"),b(c,"for","quest-sort"),$.__value="",$.value=$.__value,w.__value="total",w.value=w.__value,v.__value="ratio",v.value=v.__value,b(g,"id","quest-sort"),void 0===t[2]&&B((()=>t[9].call(g))),b(e,"class","is-floating"),b(_,"class","grid grid-2")},m(s,u){a(s,e,u),l(e,n),l(e,o),l(e,r),r.checked=t[0],l(e,i),l(e,c),l(e,p),l(e,g),l(g,$),l(g,w),l(g,v),x(g,t[2]),a(s,k,u),a(s,_,u);for(let t=0;t<L.length;t+=1)L[t]&&L[t].m(_,null);C=!0,y||(S=[m(r,"change",t[8]),m(g,"change",t[9]),m(g,"change",t[5])],y=!0)},p(t,[e]){if(1&e&&(r.checked=t[0]),4&e&&x(g,t[2]),91&e){let n;for(q=t[1],n=0;n<q.length;n+=1){const o=De(t,q,n);L[n]?(L[n].p(o,e),F(L[n],1)):(L[n]=Fe(o),L[n].c(),F(L[n],1),L[n].m(_,null))}for(D(),n=q.length;n<L.length;n+=1)T(n);z()}},i(t){if(!C){for(let t=0;t<q.length;t+=1)F(L[t]);C=!0}},o(t){L=L.filter(Boolean);for(let t=0;t<L.length;t+=1)Q(L[t]);C=!1},d(t){t&&u(e),t&&u(k),t&&u(_),d(L,t),y=!1,s(S)}}}function Je(t,e,n){let o,{questions:s}=e,r=!1,i=[],c="";const l=new Pt;L((async()=>{n(3,o=await St())})),T((()=>{console.log("afterUpdate questions:",s),n(1,i=s)}));const a=Ct(2,"is-primary","is-info");return t.$$set=t=>{"questions"in t&&n(7,s=t.questions)},[r,i,c,o,l,()=>{if(!c)return void n(1,i=s);let t=[...s];"ratio"===c?t.sort(((t,e)=>e.ratio-t.ratio)):"total"===c&&t.sort(((t,e)=>e.total-t.total)),n(1,i=t)},a,s,function(){r=this.checked,n(0,r)},function(){c=_(this),n(2,c)}]}class We extends Z{constructor(t){super(),X(this,t,Je,Qe,i,{questions:7})}}function Ke(t){let e,n;return e=new We({props:{questions:t[1]}}),{c(){J(e.$$.fragment)},m(t,o){W(e,t,o),n=!0},p(t,n){const o={};2&n&&(o.questions=t[1]),e.$set(o)},i(t){n||(F(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){K(e,t)}}}function Ye(t){let e,n,o,s,r,i,c,d,g,$,v=t[0].title+"",k=0!==t[1].length&&Ke(t);return{c(){e=f("div"),n=f("h4"),o=p(v),s=h(),k&&k.c(),r=h(),i=f("div"),c=f("button"),c.textContent="Back",b(c,"class","button"),b(i,"class","is-floating"),b(e,"class","card card-shadow content")},m(u,f){a(u,e,f),l(e,n),l(n,o),l(e,s),k&&k.m(e,null),l(e,r),l(e,i),l(i,c),d=!0,g||($=m(c,"click",t[3]),g=!0)},p(t,[n]){(!d||1&n)&&v!==(v=t[0].title+"")&&w(o,v),0!==t[1].length?k?(k.p(t,n),2&n&&F(k,1)):(k=Ke(t),k.c(),F(k,1),k.m(e,r)):k&&(D(),Q(k,1,1,(()=>{k=null})),z())},i(t){d||(F(k),d=!0)},o(t){Q(k),d=!1},d(t){t&&u(e),k&&k.d(),g=!1,$()}}}function Xe(t,e,n){let{topic:o}=e,s=[];L((()=>{Ot(o).then((t=>{n(1,s=t)}))}));const r=t=>{nt.setView("ViewTopicInfo",{topic:t})};return t.$$set=t=>{"topic"in t&&n(0,o=t.topic)},[o,s,r,()=>r(o)]}class Ze extends Z{constructor(t){super(),X(this,t,Xe,Ye,i,{topic:0})}}function tn(t,e,n){const o=t.slice();return o[15]=e[n],o}function en(t){let e,n,o=t[15].title+"";return{c(){e=f("li"),n=p(o)},m(t,o){a(t,e,o),l(e,n)},p(t,e){2&e&&o!==(o=t[15].title+"")&&w(n,o)},d(t){t&&u(e)}}}function nn(t){let e,n,o,r,i,c,d,p,g,$;return{c(){e=f("div"),n=f("label"),n.textContent="Number of correct answers",o=h(),r=f("select"),i=f("option"),i.textContent="-- Select --",c=f("option"),c.textContent="Set 0",d=f("option"),d.textContent="Set 1",p=f("option"),p.textContent="Set 2",b(n,"for","sf-set"),i.__value="-1",i.value=i.__value,c.__value="0",c.value=c.__value,d.__value="1",d.value=d.__value,p.__value="2",p.value=p.__value,b(r,"id","sf-set"),void 0===t[5]&&B((()=>t[14].call(r))),b(e,"class","is-floating")},m(s,u){a(s,e,u),l(e,n),l(e,o),l(e,r),l(r,i),l(r,c),l(r,d),l(r,p),x(r,t[5]),g||($=[m(r,"change",t[14]),m(r,"change",t[9])],g=!0)},p(t,e){32&e&&x(r,t[5])},d(t){t&&u(e),g=!1,s($)}}}function on(t){let e,n,o,r,i,c,d,p,g,$,w,v,k,_,C,y,S,q;return{c(){e=f("div"),n=f("label"),n.textContent="Load Questions",o=h(),r=f("select"),i=f("option"),i.textContent="30",c=f("option"),c.textContent="All",d=h(),p=f("div"),g=f("label"),g.textContent="Used fraction (sorted by ratio)",$=h(),w=f("select"),v=f("option"),v.textContent="40 %",k=f("option"),k.textContent="50 %",_=f("option"),_.textContent="60 %",C=f("option"),C.textContent="70 %",y=f("option"),y.textContent="80 %",b(n,"for","load-quests"),i.__value="30",i.value=i.__value,c.__value="all",c.value=c.__value,b(r,"id","load-quests"),void 0===t[2]&&B((()=>t[12].call(r))),b(e,"class","is-floating"),b(g,"for","relevant"),v.__value="0.4",v.value=v.__value,k.__value="0.5",k.value=k.__value,_.__value="0.6",_.value=_.__value,C.__value="0.7",C.value=C.__value,y.__value="0.8",y.value=y.__value,b(w,"id","relevant"),void 0===t[3]&&B((()=>t[13].call(w))),b(p,"class","is-floating")},m(s,u){a(s,e,u),l(e,n),l(e,o),l(e,r),l(r,i),l(r,c),x(r,t[2]),a(s,d,u),a(s,p,u),l(p,g),l(p,$),l(p,w),l(w,v),l(w,k),l(w,_),l(w,C),l(w,y),x(w,t[3]),S||(q=[m(r,"change",t[12]),m(w,"change",t[13])],S=!0)},p(t,e){4&e&&x(r,t[2]),8&e&&x(w,t[3])},d(t){t&&u(e),t&&u(d),t&&u(p),S=!1,s(q)}}}function sn(e){let n,o,s;return{c(){n=f("button"),n.textContent="Load",b(n,"class","button")},m(t,r){a(t,n,r),o||(s=m(n,"click",e[10]),o=!0)},p:t,d(t){t&&u(n),o=!1,s()}}}function rn(e){let n,o,r,i,c;return{c(){n=f("button"),n.textContent="Listing",o=h(),r=f("button"),r.textContent="Start",b(n,"class","button"),b(r,"class","button")},m(t,s){a(t,n,s),a(t,o,s),a(t,r,s),i||(c=[m(n,"click",e[6]),m(r,"click",e[8])],i=!0)},p:t,d(t){t&&u(n),t&&u(o),t&&u(r),i=!1,s(c)}}}function cn(e){let n,o,s,r,i,c,g,$,v,k,x,_,C,y,S,q,L,T=e[1],U=[];for(let t=0;t<T.length;t+=1)U[t]=en(tn(e,T,t));function E(t,e){return t[4]?nn:on}let V=E(e),j=V(e);function H(t,e){return t[4]?rn:sn}let M=H(e),A=M(e);return{c(){n=f("div"),o=f("div"),s=f("div"),r=f("h4"),i=p("Tag: "),c=p(e[0]),g=h(),$=f("p"),$.textContent="Files incluging the tag:",v=h(),k=f("ul");for(let t=0;t<U.length;t+=1)U[t].c();x=h(),j.c(),_=h(),C=f("div"),y=f("button"),y.textContent="Back",S=h(),A.c(),b(s,"class","is-text-left"),b(y,"class","button"),b(C,"class","is-floating"),b(n,"class","card card-shadow content")},m(t,u){a(t,n,u),l(n,o),l(o,s),l(s,r),l(r,i),l(r,c),l(s,g),l(s,$),l(s,v),l(s,k);for(let t=0;t<U.length;t+=1)U[t]&&U[t].m(k,null);l(n,x),j.m(n,null),l(n,_),l(n,C),l(C,y),l(C,S),A.m(C,null),q||(L=m(y,"click",e[7]),q=!0)},p(t,[e]){if(1&e&&w(c,t[0]),2&e){let n;for(T=t[1],n=0;n<T.length;n+=1){const o=tn(t,T,n);U[n]?U[n].p(o,e):(U[n]=en(o),U[n].c(),U[n].m(k,null))}for(;n<U.length;n+=1)U[n].d(1);U.length=T.length}V===(V=E(t))&&j?j.p(t,e):(j.d(1),j=V(t),j&&(j.c(),j.m(n,_))),M===(M=H(t))&&A?A.p(t,e):(A.d(1),A=M(t),A&&(A.c(),A.m(C,null)))},i:t,o:t,d(t){t&&u(n),d(U,t),j.d(),A.d(),q=!1,L()}}}function ln(t,e,n){let o,{tag:s}=e,{topics:r}=e,{questions:i}=e,c="30",l="0.5",a=!1;return t.$$set=t=>{"tag"in t&&n(0,s=t.tag),"topics"in t&&n(1,r=t.topics),"questions"in t&&n(11,i=t.questions)},[s,r,c,l,a,o,()=>{nt.setView("ViewTagQuests",{tag:s,topics:r,questions:i})},()=>{nt.setView("ViewTopicList")},()=>{nt.setView("ViewQuestAnswer",{tag:s,topics:r,questions:i})},t=>{if(!i)return;const e=t.target;zt(i,e.selectedIndex-1),e.selectedIndex=0},async()=>{try{const t="all"===c?-1:30;n(11,i=await Ft(r,t,parseFloat(l))),n(4,a=!0)}catch(t){ot.addError("ViewTagInfo: "+yt(t))}},i,function(){c=_(this),n(2,c)},function(){l=_(this),n(3,l)},function(){o=_(this),n(5,o)}]}class an extends Z{constructor(t){super(),X(this,t,ln,cn,i,{tag:0,topics:1,questions:11})}}function un(t){let e,n,o,s,r,i,c,d,g,$,v,k;return i=new We({props:{questions:t[1]}}),{c(){e=f("div"),n=f("h4"),o=p("Tag: "),s=p(t[0]),r=h(),J(i.$$.fragment),c=h(),d=f("div"),g=f("button"),g.textContent="Back",b(g,"class","button"),b(d,"class","is-floating"),b(e,"class","card card-shadow content")},m(u,f){a(u,e,f),l(e,n),l(n,o),l(n,s),l(e,r),W(i,e,null),l(e,c),l(e,d),l(d,g),$=!0,v||(k=m(g,"click",t[4]),v=!0)},p(t,[e]){(!$||1&e)&&w(s,t[0]);const n={};2&e&&(n.questions=t[1]),i.$set(n)},i(t){$||(F(i.$$.fragment,t),$=!0)},o(t){Q(i.$$.fragment,t),$=!1},d(t){t&&u(e),K(i),v=!1,k()}}}function dn(t,e,n){let{tag:o}=e,{topics:s}=e,{questions:r=[]}=e;const i=()=>{nt.setView("ViewTagInfo",{tag:o,topics:s,questions:r})};return t.$$set=t=>{"tag"in t&&n(0,o=t.tag),"topics"in t&&n(3,s=t.topics),"questions"in t&&n(1,r=t.questions)},[o,r,i,s,()=>i()]}class fn extends Z{constructor(t){super(),X(this,t,dn,un,i,{tag:0,topics:3,questions:1})}}function pn(e){let n,o,s,r,i,c,d,g,m,$,v,k,x,_,C,y,S,q,L,T,U,E,V,j,H=e[0][0]+"",M=e[0][1]+"",A=e[0][2]+"",B=e[0][3]+"";return{c(){n=f("table"),o=f("tr"),s=f("td"),s.textContent="No correct Answers",r=h(),i=f("td"),c=p(H),d=h(),g=f("tr"),m=f("td"),m.textContent="One correct Answer",$=h(),v=f("td"),k=p(M),x=h(),_=f("tr"),C=f("td"),C.textContent="Two correct Answers",y=h(),S=f("td"),q=p(A),L=h(),T=f("tr"),U=f("td"),U.textContent="Learned",E=h(),V=f("td"),j=p(B),b(n,"class","table hide-md")},m(t,e){a(t,n,e),l(n,o),l(o,s),l(o,r),l(o,i),l(i,c),l(n,d),l(n,g),l(g,m),l(g,$),l(g,v),l(v,k),l(n,x),l(n,_),l(_,C),l(_,y),l(_,S),l(S,q),l(n,L),l(n,T),l(T,U),l(T,E),l(T,V),l(V,j)},p(t,[e]){1&e&&H!==(H=t[0][0]+"")&&w(c,H),1&e&&M!==(M=t[0][1]+"")&&w(k,M),1&e&&A!==(A=t[0][2]+"")&&w(q,A),1&e&&B!==(B=t[0][3]+"")&&w(j,B)},i:t,o:t,d(t){t&&u(n)}}}function hn(t,e,n){let{statistic:o=[0,0,0,0]}=e;return t.$$set=t=>{"statistic"in t&&n(0,o=t.statistic)},[o]}class gn extends Z{constructor(t){super(),X(this,t,hn,pn,i,{statistic:0})}}function mn(t){let e,n=t[3].toHtml(t[1].details)+"";return{c(){e=f("p")},m(t,o){a(t,e,o),e.innerHTML=n},p(t,o){2&o&&n!==(n=t[3].toHtml(t[1].details)+"")&&(e.innerHTML=n)},d(t){t&&u(e)}}}function $n(t){let e,n,o,s,r,i,c,d,g,m,$,v,k,x,_,C,y,S,q,L=t[0].id+"",T=t[3].toHtml(t[0].quest)+"",U=t[3].toHtml(t[0].answer)+"";d=new Oe({props:{question:t[0]}});let E=t[1].details&&mn(t);return{c(){e=f("div"),n=f("div"),o=f("div"),s=f("div"),r=p("Question: "),i=p(L),c=h(),J(d.$$.fragment),g=h(),m=f("div"),$=f("p"),v=h(),k=f("div"),x=f("h5"),x.textContent="Answer",_=h(),C=f("div"),y=f("p"),S=h(),E&&E.c(),b(s,"class","h5"),b(o,"class","is-flex-spread block"),b(m,"class","card content is-primary"),b(C,"class","card content is-info"),k.hidden=t[2],b(e,"class","grid grid-2")},m(t,u){a(t,e,u),l(e,n),l(n,o),l(o,s),l(s,r),l(s,i),l(o,c),W(d,o,null),l(n,g),l(n,m),l(m,$),$.innerHTML=T,l(e,v),l(e,k),l(k,x),l(k,_),l(k,C),l(C,y),y.innerHTML=U,l(C,S),E&&E.m(C,null),q=!0},p(t,[e]){(!q||1&e)&&L!==(L=t[0].id+"")&&w(i,L);const n={};1&e&&(n.question=t[0]),d.$set(n),(!q||1&e)&&T!==(T=t[3].toHtml(t[0].quest)+"")&&($.innerHTML=T),(!q||1&e)&&U!==(U=t[3].toHtml(t[0].answer)+"")&&(y.innerHTML=U),t[1].details?E?E.p(t,e):(E=mn(t),E.c(),E.m(C,null)):E&&(E.d(1),E=null),(!q||4&e)&&(k.hidden=t[2])},i(t){q||(F(d.$$.fragment,t),q=!0)},o(t){Q(d.$$.fragment,t),q=!1},d(t){t&&u(e),K(d),E&&E.d()}}}function bn(t,e,n){let{question:o}=e,{topic:s}=e,{hideAnswer:r}=e;const i=new Pt;return t.$$set=t=>{"question"in t&&n(0,o=t.question),"topic"in t&&n(1,s=t.topic),"hideAnswer"in t&&n(2,r=t.hideAnswer)},[o,s,r,i]}class wn extends Z{constructor(t){super(),X(this,t,bn,$n,i,{question:0,topic:1,hideAnswer:2})}}function vn(t){let e,n,o,r,i,c,d,g,$,w,v,k,x,_,C,y,S,q,L,T,U,E,V,j;function H(t,e){return t[0]?xn:kn}let M=H(t),A=M(t);return o=new gn({props:{statistic:t[3]}}),i=new wn({props:{topic:t[1],question:t[2],hideAnswer:t[4]}}),{c(){e=f("div"),A.c(),n=h(),J(o.$$.fragment),r=h(),J(i.$$.fragment),c=h(),d=f("div"),g=f("button"),$=p("Show"),v=h(),k=f("button"),x=p("Correct"),_=h(),C=f("button"),y=p("Wrong"),S=h(),q=f("button"),L=p("Skip"),T=h(),U=f("button"),U.textContent="Stop",b(g,"class","button"),g.hidden=w=!t[4],b(k,"class","button is-success"),k.hidden=t[4],b(C,"class","button is-danger"),C.hidden=t[4],b(q,"class","button is-warning"),q.hidden=t[4],b(U,"class","button"),b(d,"class","is-floating"),b(e,"class","card card-shadow content")},m(s,u){a(s,e,u),A.m(e,null),l(e,n),W(o,e,null),l(e,r),W(i,e,null),l(e,c),l(e,d),l(d,g),l(g,$),l(d,v),l(d,k),l(k,x),l(d,_),l(d,C),l(C,y),l(d,S),l(d,q),l(q,L),l(d,T),l(d,U),E=!0,V||(j=[m(g,"click",t[9]),m(k,"click",t[10]),m(C,"click",t[11]),m(q,"click",t[12]),m(U,"click",t[6])],V=!0)},p(t,s){M===(M=H(t))&&A?A.p(t,s):(A.d(1),A=M(t),A&&(A.c(),A.m(e,n)));const r={};8&s&&(r.statistic=t[3]),o.$set(r);const c={};2&s&&(c.topic=t[1]),4&s&&(c.question=t[2]),16&s&&(c.hideAnswer=t[4]),i.$set(c),(!E||16&s&&w!==(w=!t[4]))&&(g.hidden=w),(!E||16&s)&&(k.hidden=t[4]),(!E||16&s)&&(C.hidden=t[4]),(!E||16&s)&&(q.hidden=t[4])},i(t){E||(F(o.$$.fragment,t),F(i.$$.fragment,t),E=!0)},o(t){Q(o.$$.fragment,t),Q(i.$$.fragment,t),E=!1},d(t){t&&u(e),A.d(),K(o),K(i),V=!1,s(j)}}}function kn(t){let e,n,o=t[1].title+"";return{c(){e=f("h4"),n=p(o)},m(t,o){a(t,e,o),l(e,n)},p(t,e){2&e&&o!==(o=t[1].title+"")&&w(n,o)},d(t){t&&u(e)}}}function xn(t){let e,n,o,s,r,i,c=t[1].title+"";return{c(){e=f("h4"),n=p("Tag: "),o=p(t[0]),s=h(),r=f("h6"),i=p(c)},m(t,c){a(t,e,c),l(e,n),l(e,o),a(t,s,c),a(t,r,c),l(r,i)},p(t,e){1&e&&w(o,t[0]),2&e&&c!==(c=t[1].title+"")&&w(i,c)},d(t){t&&u(e),t&&u(s),t&&u(r)}}}function _n(t){let e,n,o=t[2]&&vn(t);return{c(){o&&o.c(),e=g()},m(t,s){o&&o.m(t,s),a(t,e,s),n=!0},p(t,[n]){t[2]?o?(o.p(t,n),4&n&&F(o,1)):(o=vn(t),o.c(),F(o,1),o.m(e.parentNode,e)):o&&(D(),Q(o,1,1,(()=>{o=null})),z())},i(t){n||(F(o),n=!0)},o(t){Q(o),n=!1},d(t){o&&o.d(t),t&&u(e)}}}function Cn(t,e,n){let o,s,r,i,{tag:c}=e,{topics:l}=e,{questions:a}=e,u=!0;const d=t=>{if(void 0===t)return i.push(s),void f();Gt(s,t),Rt(s).then((()=>{s.progress<3&&i.push(s),0===i.length&&p(),f()}))},f=()=>{const t=i.shift();if(!t)return;n(2,s=t);const e=l.find((t=>t.file===s.file));e&&(n(1,o=e),n(3,r=Nt(a)),n(4,u=!0),console.log("next",s))};L((()=>{i=a.filter((t=>t.progress<3)),_t(i),f()}));const p=async()=>{c?nt.setView("ViewTopicList"):(n(1,o.lastLearned=new Date,o),await oe(o),nt.setView("ViewTopicList",{id:o.file}))};return t.$$set=t=>{"tag"in t&&n(0,c=t.tag),"topics"in t&&n(7,l=t.topics),"questions"in t&&n(8,a=t.questions)},[c,o,s,r,u,d,p,l,a,()=>n(4,u=!1),()=>d(!0),()=>d(!1),()=>d()]}class yn extends Z{constructor(t){super(),X(this,t,Cn,_n,i,{tag:0,topics:7,questions:8})}}function Sn(e){let n,o,r,i,c,d,g,$,k,x,_,C,y,S,q,L,T,U,E,V,j,H,M,A,B;return{c(){n=f("h4"),n.textContent="Translate",o=h(),r=f("div"),i=f("label"),c=p(e[0]),d=h(),g=f("textarea"),$=h(),k=f("label"),x=p(e[1]),_=h(),C=f("textarea"),y=h(),S=f("div"),q=f("button"),q.textContent="Back",L=h(),T=f("button"),T.textContent="Translate",U=h(),E=f("button"),E.textContent="Reset",V=h(),j=f("button"),j.textContent="Switch",H=h(),M=f("p"),M.innerHTML='The translation is done with <a href="https://libretranslate.de/">LibreTranslate</a>',b(i,"for","src"),b(g,"id","src"),b(g,"class","input"),b(k,"for","dst"),b(C,"id","dst"),C.readOnly=!0,C.value=e[3],b(C,"class","input"),b(r,"class","block"),b(q,"class","button"),b(T,"class","button"),b(E,"class","button"),b(j,"class","button"),b(S,"class","is-floating")},m(t,s){a(t,n,s),a(t,o,s),a(t,r,s),l(r,i),l(i,c),l(r,d),l(r,g),v(g,e[2]),l(r,$),l(r,k),l(k,x),l(r,_),l(r,C),a(t,y,s),a(t,S,s),l(S,q),l(S,L),l(S,T),l(S,U),l(S,E),l(S,V),l(S,j),a(t,H,s),a(t,M,s),A||(B=[m(g,"input",e[8]),m(q,"click",e[9]),m(T,"click",e[10]),m(E,"click",e[11]),m(j,"click",e[12])],A=!0)},p(t,[e]){1&e&&w(c,t[0]),4&e&&v(g,t[2]),2&e&&w(x,t[1]),8&e&&(C.value=t[3])},i:t,o:t,d(t){t&&u(n),t&&u(o),t&&u(r),t&&u(y),t&&u(S),t&&u(H),t&&u(M),A=!1,s(B)}}}function qn(t,e,n){let o="German",s="Russian",r="de",i="ru",c="",l="";const a=()=>{c&&fetch("https://libretranslate.de/translate",{method:"POST",body:JSON.stringify({q:c,source:r,target:i,format:"text"}),headers:{"Content-Type":"application/json"}}).then((t=>(t.ok||ot.addError(`Unable to get JSON: ${t.statusText}`),t.json()))).then((t=>{n(3,l=t.translatedText)}))},u=()=>{"de"===r?(n(0,o="Russian"),n(1,s="German"),r="ru",i="de"):(n(0,o="German"),n(1,s="Russian"),r="de",i="ru"),n(2,c=l),a()},d=()=>{n(2,c=""),n(3,l="")},f=()=>{nt.setView("ViewTopicList")};return[o,s,c,l,a,u,d,f,function(){c=this.value,n(2,c)},()=>f(),()=>a(),()=>d(),()=>u()]}class Ln extends Z{constructor(t){super(),X(this,t,qn,Sn,i,{})}}function Tn(t,e,n){const o=t.slice();return o[10]=e[n],o}function Un(t){let e,n,o,s,r,i,c,d,g,$,v,k,x,_,C,y=t[10].file+"",S=t[10].value+"",q=$t(t[10].lastLoaded)+"";function L(){return t[7](t[10])}return{c(){e=f("tr"),n=f("td"),o=p(y),s=h(),r=f("td"),i=p(S),c=h(),d=f("td"),g=p(q),$=h(),v=f("td"),k=f("button"),k.textContent="Delete",x=h(),b(k,"class","button")},m(t,u){a(t,e,u),l(e,n),l(n,o),l(e,s),l(e,r),l(r,i),l(e,c),l(e,d),l(d,g),l(e,$),l(e,v),l(v,k),l(e,x),_||(C=m(k,"click",L),_=!0)},p(e,n){t=e,1&n&&y!==(y=t[10].file+"")&&w(o,y),1&n&&S!==(S=t[10].value+"")&&w(i,S),1&n&&q!==(q=$t(t[10].lastLoaded)+"")&&w(g,q)},d(t){t&&u(e),_=!1,C()}}}function En(e){let n,o,r,i,c,p,g,$,w,v,k,_,C,y,S,q,L,T=e[0],U=[];for(let t=0;t<T.length;t+=1)U[t]=Un(Tn(e,T,t));return{c(){n=f("div"),o=f("label"),o.textContent="Tag Filter",r=h(),i=f("select"),c=f("option"),c.textContent="By Name",p=f("option"),p.textContent="By Date",g=h(),$=f("button"),$.textContent="Load All",w=h(),v=f("table"),k=f("tr"),k.innerHTML="<th>File</th> \n    <th>Hash</th> \n    <th>Last Loaded</th> \n    <th></th>",_=h();for(let t=0;t<U.length;t+=1)U[t].c();C=h(),y=f("div"),S=f("button"),S.textContent="Back",b(o,"for","sort-select"),c.__value="file",c.value=c.__value,p.__value="lastLoaded",p.value=p.__value,b(i,"id","sort-select"),void 0===e[1]&&B((()=>e[6].call(i))),b($,"class","button"),b(n,"class","is-floating"),b(S,"class","button"),b(y,"class","is-floating")},m(t,s){a(t,n,s),l(n,o),l(n,r),l(n,i),l(i,c),l(i,p),x(i,e[1]),l(n,g),l(n,$),a(t,w,s),a(t,v,s),l(v,k),l(v,_);for(let t=0;t<U.length;t+=1)U[t]&&U[t].m(v,null);a(t,C,s),a(t,y,s),l(y,S),q||(L=[m(i,"change",e[6]),m(i,"change",e[2]),m($,"click",e[5]),m(S,"click",e[8])],q=!0)},p(t,[e]){if(2&e&&x(i,t[1]),9&e){let n;for(T=t[0],n=0;n<T.length;n+=1){const o=Tn(t,T,n);U[n]?U[n].p(o,e):(U[n]=Un(o),U[n].c(),U[n].m(v,null))}for(;n<U.length;n+=1)U[n].d(1);U.length=T.length}},i:t,o:t,d(t){t&&u(n),t&&u(w),t&&u(v),d(U,t),t&&u(C),t&&u(y),q=!1,s(L)}}}function Vn(t,e,n){let o=[],s="file";const r=()=>{console.log("sort",s),"file"===s?o.sort(((t,e)=>+(e.file>t.file)||-(e.file<t.file))):o.sort(((t,e)=>+(e.lastLoaded>t.lastLoaded)||-(e.lastLoaded<t.lastLoaded))),n(0,o)},i=async()=>{n(0,o=await ht()),r()},c=async t=>{await mt(t),i()},l=()=>{nt.setView("ViewTopicList")};L((()=>{i()}));return[o,s,r,c,l,async()=>{const t=(await ne()).map((t=>t.file));await Yt(t),i()},function(){s=_(this),n(1,s)},t=>c(t.file),()=>l()]}class jn extends Z{constructor(t){super(),X(this,t,Vn,En,i,{})}}function Hn(t){let e,n,o=t[0].token.substring(t[0].token.length-3)+"";return{c(){e=p("..."),n=p(o)},m(t,o){a(t,e,o),a(t,n,o)},p(t,e){1&e&&o!==(o=t[0].token.substring(t[0].token.length-3)+"")&&w(n,o)},d(t){t&&u(e),t&&u(n)}}}function Mn(e){let n,o,s,r,i,c,d,g,m,$,b,v,k,x,_,C,y,S,q,L,T,U,E,V,j,H,M,A,B,P=e[0].langUrl+"",N=e[0].linkUrl+"",G=(e[0].backupUrl?e[0].backupUrl:"")+"",I=(e[0].file?e[0].file:"")+"",R=e[0].token&&Hn(e);return{c(){n=f("table"),o=f("tr"),s=f("td"),s.textContent="Github URL Language",r=h(),i=f("td"),c=p(P),d=h(),g=f("tr"),m=f("td"),m.textContent="Github Link URL",$=h(),b=f("td"),v=p(N),k=h(),x=f("tr"),_=f("td"),_.textContent="Github URL Backup",C=h(),y=f("td"),S=p(G),q=h(),L=f("tr"),T=f("td"),T.textContent="Github File",U=h(),E=f("td"),V=p(I),j=h(),H=f("tr"),M=f("td"),M.textContent="Token",A=h(),B=f("td"),R&&R.c()},m(t,e){a(t,n,e),l(n,o),l(o,s),l(o,r),l(o,i),l(i,c),l(n,d),l(n,g),l(g,m),l(g,$),l(g,b),l(b,v),l(n,k),l(n,x),l(x,_),l(x,C),l(x,y),l(y,S),l(n,q),l(n,L),l(L,T),l(L,U),l(L,E),l(E,V),l(n,j),l(n,H),l(H,M),l(H,A),l(H,B),R&&R.m(B,null)},p(t,[e]){1&e&&P!==(P=t[0].langUrl+"")&&w(c,P),1&e&&N!==(N=t[0].linkUrl+"")&&w(v,N),1&e&&G!==(G=(t[0].backupUrl?t[0].backupUrl:"")+"")&&w(S,G),1&e&&I!==(I=(t[0].file?t[0].file:"")+"")&&w(V,I),t[0].token?R?R.p(t,e):(R=Hn(t),R.c(),R.m(B,null)):R&&(R.d(1),R=null)},i:t,o:t,d(t){t&&u(n),R&&R.d()}}}function An(t,e,n){let{admin:o}=e;return t.$$set=t=>{"admin"in t&&n(0,o=t.admin)},[o]}class Bn extends Z{constructor(t){super(),X(this,t,An,Mn,i,{admin:0})}}function Pn(e){let n,o,r,i,c,d,g,$,v,x,_,C,y,S;return{c(){n=f("div"),o=f("div"),r=f("h5"),i=p(e[0]),c=h(),d=f("p"),g=p(e[1]),$=h(),v=f("div"),x=f("button"),x.textContent="OK",_=h(),C=f("button"),C.textContent="Cancel",b(x,"class","button"),b(C,"class","button"),b(v,"class","is-floating"),b(o,"class","popup-content"),b(n,"class","popup"),k(n,"display",e[2]?"block":"none")},m(t,s){a(t,n,s),l(n,o),l(o,r),l(r,i),l(o,c),l(o,d),l(d,g),l(o,$),l(o,v),l(v,x),l(v,_),l(v,C),y||(S=[m(x,"click",e[4]),m(C,"click",e[5])],y=!0)},p(t,[e]){1&e&&w(i,t[0]),2&e&&w(g,t[1]),4&e&&k(n,"display",t[2]?"block":"none")},i:t,o:t,d(t){t&&u(n),y=!1,s(S)}}}function Nn(t,e,n){let{title:o=""}=e,{msg:s=""}=e,{doShow:r=!1}=e;const i=U();return t.$$set=t=>{"title"in t&&n(0,o=t.title),"msg"in t&&n(1,s=t.msg),"doShow"in t&&n(2,r=t.doShow)},[o,s,r,i,()=>i("popup","ok"),()=>i("popup","cancel")]}class Gn extends Z{constructor(t){super(),X(this,t,Nn,Pn,i,{title:0,msg:1,doShow:2})}}function In(t){let e,n;return{c(){e=f("div"),n=p(t[2]),b(e,"class","block is-text-success")},m(t,o){a(t,e,o),l(e,n)},p(t,e){4&e&&w(n,t[2])},d(t){t&&u(e)}}}function Rn(t){let e,n,o,s;const r=[Dn,On],i=[];function c(t,e){return t[1]?0:1}return e=c(t),n=i[e]=r[e](t),{c(){n.c(),o=g()},m(t,n){i[e].m(t,n),a(t,o,n),s=!0},p(t,s){let l=e;e=c(t),e===l?i[e].p(t,s):(D(),Q(i[l],1,1,(()=>{i[l]=null})),z(),n=i[e],n?n.p(t,s):(n=i[e]=r[e](t),n.c()),F(n,1),n.m(o.parentNode,o))},i(t){s||(F(n),s=!0)},o(t){Q(n),s=!1},d(t){i[e].d(t),t&&u(o)}}}function On(t){let e,n,o,r,i,c,d,p,g,$,w;n=new Bn({props:{admin:t[0]}});let v=t[0].file&&t[0].backupUrl&&t[0].token&&zn(t);return{c(){e=f("div"),J(n.$$.fragment),o=h(),r=f("div"),i=f("button"),i.textContent="Back",c=h(),d=f("button"),d.textContent="Update",p=h(),v&&v.c(),b(i,"class","button"),b(d,"class","button"),b(r,"class","is-floating"),b(e,"class","block")},m(s,u){a(s,e,u),W(n,e,null),l(e,o),l(e,r),l(r,i),l(r,c),l(r,d),l(r,p),v&&v.m(r,null),g=!0,$||(w=[m(i,"click",t[8]),m(d,"click",t[17])],$=!0)},p(t,e){const o={};1&e&&(o.admin=t[0]),n.$set(o),t[0].file&&t[0].backupUrl&&t[0].token?v?v.p(t,e):(v=zn(t),v.c(),v.m(r,null)):v&&(v.d(1),v=null)},i(t){g||(F(n.$$.fragment,t),g=!0)},o(t){Q(n.$$.fragment,t),g=!1},d(t){t&&u(e),K(n),v&&v.d(),$=!1,s(w)}}}function Dn(e){let n,o,r,i,c,d,p,g,w,k,x,_,C,y,S,q,L,T,U,E,V,j,H,M,A,B,P,N,G,I;return{c(){n=f("form"),o=f("div"),r=f("label"),r.textContent="Github URL Language",i=h(),c=f("input"),d=h(),p=f("label"),p.textContent="Github Link URL",g=h(),w=f("input"),k=h(),x=f("label"),x.textContent="Github URL Backup",_=h(),C=f("input"),y=h(),S=f("label"),S.textContent="Github File",q=h(),L=f("input"),T=h(),U=f("label"),U.textContent="Token",E=h(),V=f("input"),j=h(),H=f("div"),M=f("button"),M.textContent="Save",A=h(),B=f("button"),B.textContent="Cancel",P=h(),N=f("button"),N.textContent="Back",b(r,"for","langUrl"),b(c,"id","langUrl"),b(c,"type","url"),b(c,"class","input"),b(p,"for","linkUrl"),b(w,"id","linkUrl"),b(w,"type","url"),b(w,"class","input"),b(x,"for","backupUrl"),b(C,"id","backupUrl"),b(C,"type","url"),b(C,"class","input"),b(S,"for","file"),b(L,"id","file"),b(L,"type","text"),b(L,"class","input"),b(U,"for","token"),b(V,"id","token"),b(V,"type","password"),b(V,"class","input"),b(o,"class","block"),b(M,"class","button"),b(B,"class","button"),b(N,"class","button"),b(H,"class","is-floating")},m(t,s){a(t,n,s),l(n,o),l(o,r),l(o,i),l(o,c),v(c,e[0].langUrl),l(o,d),l(o,p),l(o,g),l(o,w),v(w,e[0].linkUrl),l(o,k),l(o,x),l(o,_),l(o,C),v(C,e[0].backupUrl),l(o,y),l(o,S),l(o,q),l(o,L),v(L,e[0].file),l(o,T),l(o,U),l(o,E),l(o,V),v(V,e[0].token),l(n,j),l(n,H),l(H,M),l(H,A),l(H,B),l(H,P),l(H,N),G||(I=[m(c,"input",e[11]),m(w,"input",e[12]),m(C,"input",e[13]),m(L,"input",e[14]),m(V,"input",e[15]),m(B,"click",e[16]),m(N,"click",e[8]),m(n,"submit",$(e[7]))],G=!0)},p(t,e){1&e&&c.value!==t[0].langUrl&&v(c,t[0].langUrl),1&e&&w.value!==t[0].linkUrl&&v(w,t[0].linkUrl),1&e&&C.value!==t[0].backupUrl&&v(C,t[0].backupUrl),1&e&&L.value!==t[0].file&&v(L,t[0].file),1&e&&V.value!==t[0].token&&v(V,t[0].token)},i:t,o:t,d(t){t&&u(n),G=!1,s(I)}}}function zn(e){let n,o,r,i,c;return{c(){n=f("button"),n.textContent="Backup",o=h(),r=f("button"),r.textContent="Restore",b(n,"class","button"),b(r,"class","button")},m(t,s){a(t,n,s),a(t,o,s),a(t,r,s),i||(c=[m(n,"click",e[18]),m(r,"click",e[19])],i=!0)},p:t,d(t){t&&u(n),t&&u(o),t&&u(r),i=!1,s(c)}}}function Fn(t){let e,n,o,s,r,i,c=t[2]&&In(t),l=t[0]&&Rn(t);return r=new Gn({props:{title:t[4],msg:t[5],doShow:t[6]}}),r.$on("popup",t[10]),{c(){e=f("h4"),e.textContent="Configuration",n=h(),c&&c.c(),o=h(),l&&l.c(),s=h(),J(r.$$.fragment)},m(t,u){a(t,e,u),a(t,n,u),c&&c.m(t,u),a(t,o,u),l&&l.m(t,u),a(t,s,u),W(r,t,u),i=!0},p(t,[e]){t[2]?c?c.p(t,e):(c=In(t),c.c(),c.m(o.parentNode,o)):c&&(c.d(1),c=null),t[0]?l?(l.p(t,e),1&e&&F(l,1)):(l=Rn(t),l.c(),F(l,1),l.m(s.parentNode,s)):l&&(D(),Q(l,1,1,(()=>{l=null})),z());const n={};16&e&&(n.title=t[4]),32&e&&(n.msg=t[5]),64&e&&(n.doShow=t[6]),r.$set(n)},i(t){i||(F(l),F(r.$$.fragment,t),i=!0)},o(t){Q(l),Q(r.$$.fragment,t),i=!1},d(t){t&&u(e),t&&u(n),c&&c.d(t),t&&u(o),l&&l.d(t),t&&u(s),K(r,t)}}}function Qn(t,e,n){let o,s=!1,r="";L((async()=>{n(0,o=await St())}));const i=async()=>{const t=await Jt();Mt(t),n(2,r="Backup done!")},c=async()=>{const t=await At();t&&(Wt(t),n(2,r="Restore done!"))};var l;let a,u;!function(t){t[t.Backup=0]="Backup",t[t.Restore=1]="Restore"}(l||(l={}));let d,f=!1;const p=t=>{switch(t){case l.Backup:n(4,a="Information"),n(5,u="Do you realy want to create a backup?"),d=i;break;case l.Restore:n(4,a="Warning"),n(5,u="Do you realy want to restore the backup?"),d=c;break;default:console.log("Unkown type",t)}n(6,f=!0)};return[o,s,r,l,a,u,f,()=>{o.langUrl&&qt(o),n(1,s=!1)},()=>{nt.setView("ViewTopicList")},p,t=>{n(6,f=!1),"ok"===t.detail&&d()},function(){o.langUrl=this.value,n(0,o)},function(){o.linkUrl=this.value,n(0,o)},function(){o.backupUrl=this.value,n(0,o)},function(){o.file=this.value,n(0,o)},function(){o.token=this.value,n(0,o)},()=>n(1,s=!1),()=>n(1,s=!0),()=>p(l.Backup),()=>p(l.Restore)]}class Jn extends Z{constructor(t){super(),X(this,t,Qn,Fn,i,{})}}function Wn(t){let e,n;return{c(){e=f("div"),n=p(t[2]),b(e,"class","is-text-danger")},m(t,o){a(t,e,o),l(e,n)},p(t,e){4&e&&w(n,t[2])},d(t){t&&u(e)}}}function Kn(t){let e,n,o,s,r,i,c,d;return c=new We({props:{questions:t[1]}}),{c(){e=f("div"),n=p("Total: "),o=p(t[3]),s=p(" found: "),r=p(t[4]),i=h(),J(c.$$.fragment)},m(t,u){a(t,e,u),l(e,n),l(e,o),l(e,s),l(e,r),a(t,i,u),W(c,t,u),d=!0},p(t,e){(!d||8&e)&&w(o,t[3]),(!d||16&e)&&w(r,t[4]);const n={};2&e&&(n.questions=t[1]),c.$set(n)},i(t){d||(F(c.$$.fragment,t),d=!0)},o(t){Q(c.$$.fragment,t),d=!1},d(t){t&&u(e),t&&u(i),K(c,t)}}}function Yn(t){let e,n,o,r,i,c,d,p,g,w,k,x,_,C,y,S,q,L;w=new be({props:{onClick:t[5]}});let T=t[2]&&Wn(t),U=0!==t[1].length&&Kn(t);return{c(){e=f("h4"),e.textContent="Search",n=h(),o=f("form"),r=f("div"),i=f("label"),i.textContent="Search String",c=h(),d=f("div"),p=f("input"),g=h(),J(w.$$.fragment),k=h(),T&&T.c(),x=h(),U&&U.c(),_=h(),C=f("div"),y=f("button"),y.textContent="Back",b(i,"for","searchStr"),b(p,"id","searchStr"),b(p,"class","input"),b(d,"class","is-floating"),b(r,"class",""),b(y,"class","button"),b(C,"class","is-floating")},m(s,u){a(s,e,u),a(s,n,u),a(s,o,u),l(o,r),l(r,i),l(r,c),l(r,d),l(d,p),v(p,t[0]),l(d,g),W(w,d,null),l(r,k),T&&T.m(r,null),a(s,x,u),U&&U.m(s,u),a(s,_,u),a(s,C,u),l(C,y),S=!0,q||(L=[m(p,"input",t[7]),m(o,"submit",$(t[5])),m(y,"click",t[6])],q=!0)},p(t,[e]){1&e&&p.value!==t[0]&&v(p,t[0]),t[2]?T?T.p(t,e):(T=Wn(t),T.c(),T.m(r,null)):T&&(T.d(1),T=null),0!==t[1].length?U?(U.p(t,e),2&e&&F(U,1)):(U=Kn(t),U.c(),F(U,1),U.m(_.parentNode,_)):U&&(D(),Q(U,1,1,(()=>{U=null})),z())},i(t){S||(F(w.$$.fragment,t),F(U),S=!0)},o(t){Q(w.$$.fragment,t),Q(U),S=!1},d(t){t&&u(e),t&&u(n),t&&u(o),K(w),T&&T.d(),t&&u(x),U&&U.d(t),t&&u(_),t&&u(C),q=!1,s(L)}}}const Xn=30;function Zn(t,e,n){let o="",s=[],r="",i=0,c=0;return[o,s,r,i,c,async()=>{console.log("Searching:",o);const t=o.trim();!t||t.length<3?n(2,r="Please enter search string with at least 3 chars!"):(r&&n(2,r=""),n(1,s=[]),n(1,[s,i,c]=await te(t,Xn),s,n(3,i),n(4,c)),0===s.length?n(2,r="Nothing found!"):s.length<c&&n(2,r="More than: "+Xn+" questions found"))},()=>{nt.setView("ViewTopicList",{id:""})},function(){o=this.value,n(0,o)}]}class to extends Z{constructor(t){super(),X(this,t,Zn,Yn,i,{})}}function eo(t){let e,n;return e=new lt({}),{c(){J(e.$$.fragment)},m(t,o){W(e,t,o),n=!0},i(t){n||(F(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){K(e,t)}}}function no(t){let n,o,s,r,i,c,d,p,g,m=0!==t[0].length&&eo();const $=[t[1].props];var w=t[1].component;function v(t){let n={};for(let t=0;t<$.length;t+=1)n=e(n,$[t]);return{props:n}}return w&&(c=C(w,v())),{c(){n=f("div"),o=f("h2"),o.textContent="Cards",s=h(),m&&m.c(),r=h(),i=f("div"),c&&J(c.$$.fragment),d=h(),p=f("div"),p.innerHTML='<div class="is-text-right">by Volker Senkel 2021</div>',b(i,"id","main"),b(i,"class","block"),b(p,"class","block"),b(n,"class","container")},m(t,e){a(t,n,e),l(n,o),l(n,s),m&&m.m(n,null),l(n,r),l(n,i),c&&W(c,i,null),l(n,d),l(n,p),g=!0},p(t,[e]){0!==t[0].length?m?1&e&&F(m,1):(m=eo(),m.c(),F(m,1),m.m(n,r)):m&&(D(),Q(m,1,1,(()=>{m=null})),z());const o=2&e?function(t,e){const n={},o={},s={$$scope:1};let r=t.length;for(;r--;){const i=t[r],c=e[r];if(c){for(const t in i)t in c||(o[t]=1);for(const t in c)s[t]||(n[t]=c[t],s[t]=1);t[r]=c}else for(const t in i)s[t]=1}for(const t in o)t in n||(n[t]=void 0);return n}($,[(s=t[1].props,"object"==typeof s&&null!==s?s:{})]):{};var s;if(2&e&&w!==(w=t[1].component)){if(c){D();const t=c;Q(t.$$.fragment,1,0,(()=>{K(t,1)})),z()}w?(c=C(w,v()),J(c.$$.fragment),F(c.$$.fragment,1),W(c,i,null)):c=null}else w&&c.$set(o)},i(t){g||(F(m),c&&F(c.$$.fragment,t),g=!0)},o(t){Q(m),c&&Q(c.$$.fragment,t),g=!1},d(t){t&&u(n),m&&m.d(),c&&K(c)}}}function oo(t,e,n){let o,s;return c(t,ot,(t=>n(0,o=t))),c(t,nt,(t=>n(1,s=t))),L((()=>{nt.views={ViewTopicList:{component:Ae},ViewTopicInfo:{component:Ge},ViewTopicQuests:{component:Ze},ViewTagInfo:{component:an},ViewTagQuests:{component:fn},ViewQuestAnswer:{component:yn},ViewTranslate:{component:Ln},ViewHashes:{component:jn},ViewAdmin:{component:Jn},ViewSearch:{component:to}},nt.setView("ViewTopicList")})),[o,s]}return new class extends Z{constructor(t){super(),X(this,t,oo,no,i,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
